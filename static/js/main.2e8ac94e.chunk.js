(window["webpackJsonpfront-end"]=window["webpackJsonpfront-end"]||[]).push([[0],{142:function(e,n){},147:function(e,n,t){},149:function(e,n,t){"use strict";t.r(n);var r,a=t(0),o=t.n(a),i=t(19),s=t.n(i),c=t(7),u=t(2),l=t.n(u),p=t(3),d=t(6),f=t(27),m=t(39),g=t.n(m),b=t(16),v=t.n(b),h="https://api-chat-back.herokuapp.com/",x=v()(h),w=JSON.parse(localStorage.getItem("@chat@")),E=w?g.a.create({baseURL:h,headers:{Authorization:"Bearer ".concat(w.hasOwnProperty("token")?w.token:"")}}):g.a.create({baseURL:h}),O="convertation:USER_STATUS",y=function(){return function(){var e=Object(p.a)(l.a.mark((function e(n){var t,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.get("/conversations");case 2:t=e.sent,r=t.data,n({type:"conversations:LOADING_CONVERSATIONS",payload:r});case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},j=function(e){return function(n){e?n({type:O,payload:{}}):x.on("status",(function(e){n({type:O,payload:e})}))}},k=v()(h),S=function(e,n){return function(){var t=Object(p.a)(l.a.mark((function t(r){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={data:""},t.next=3,E.post("/auth/sign-in",{email:e,password:n});case 3:a=t.sent,localStorage.setItem("@chat@",JSON.stringify({token:a.data.token})),r({type:"user:LOGIN_USER",payload:a.data});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},N=function(e){return function(){var n=Object(p.a)(l.a.mark((function n(t){var r;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(""===e){n.next=4;break}return n.next=3,E.get("/users/".concat(e));case 3:r=n.sent;case 4:t({type:"user:SEARCH_USER",payload:r?r.data:[]});case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},C=function(e,n){var t=new Date(e).getHours(),r=new Date(e).getMinutes();r=r<10?"0".concat(r):r,t=t<10?"0".concat(t):t;var a=new Date(e).getDate(),o=new Date(e).getMonth(),i=new Date(e).getFullYear();return"posts"===n?"".concat(t,":").concat(r):a===(new Date).getDate()?"".concat(t,":").concat(r):(new Date).getDate()-a>1||(new Date).getMonth()+1>o+1?"".concat(a<10?"0".concat(a):a,"/").concat(o<10?"".concat(o+1):o,"/").concat(i):(new Date).getDate()-a===1&&"list"===n?"Ontem":"Ontem ".concat(t,":").concat(r)},P=t(4),I=t(5);function _(){var e=Object(P.a)(["\n  width: 170px;\n  background: #f1f1f1;\n  position: absolute;\n  top: 60px;\n  left: 0px;\n  border: solid 1px #bbb;\n  color: #666;\n  list-style-type: none;\n  z-index: 14;\n  outline: 0;\n  li{\n    font-size: 15px;\n    font-weight: 600;\n    text-align: center;\n    height: 30px;\n    border-bottom: 1px solid #bbb;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    cursor: pointer;\n\n    label{\n      width: 100%;\n      display: inline-block;\n      padding-top: 5px;\n      height: 100%;\n      cursor: pointer;\n    }\n\n    &:hover{\n      background: #ddd;\n    }\n  }\n"]);return _=function(){return e},e}var U=I.a.ul(_()),A=function(e){var n=e.setFileImage,t=e.setShowInpurtUpdateName,r=e.isMenuVisible,i=e.setIsMenuVisible,s=Object(a.useRef)();Object(a.useEffect)((function(){s.current&&s.current.focus()}),[r]);return o.a.createElement(o.a.Fragment,null,o.a.createElement("input",{type:"file",id:"#fileUser",hidden:!0,onChange:function(e){var t=e.target.files;return n(t[0])}}),r&&o.a.createElement(U,{ref:s,tabIndex:0,onBlur:function(){return i(!1)}},o.a.createElement("li",{onClick:function(){return t(!0)}},"Alterar nome do perfil"),o.a.createElement("li",null,o.a.createElement("label",{htmlFor:"#fileUser"},"Alterar imagem")),o.a.createElement("li",{onClick:function(){localStorage.removeItem("@chat@"),window.location.reload()}},"Logout")))},D=t(10);function R(){var e=Object(P.a)(["\n  align-items:center;\n  background: #eee;\n  border-bottom: 1px solid #ddd;\n  cursor: pointer;\n  display: flex;\n  padding: 2px 5px;\n  height: 60px;\n  transition: background 200ms linear;\n  position: relative;\n  width: 100%;\n  &:hover{\n    background: #ddd;\n  }  \n  &:hover .btn-user-options{\n    display: block;\n  }\n\n  .user-image{\n    width: 40px;\n    img{\n      border-radius: 50%;\n      width: 100%;\n      max-width: 100%;\n    }\n  }\n\n  .user-info{\n    margin-left: 10px;\n    color: #666;\n    width: 70%;\n    letter-spacing: 0.6px;\n\n    p{\n     font-size: 12px; \n    }\n  }\n  .messages-not-read{\n    position: absolute;\n    background:rgba(89, 125, 204, 0.9);\n    width: 22px;\n    height: 22px;\n    max-height: 25px;\n    font-size: 14px;\n    padding-top: 3px ;\n    border-radius: 50%;\n    color: #F8f8f8;\n    left:25px;\n    text-align: center;\n    bottom: 1px;\n  }\n  .last-update{\n    position: absolute;\n    right: 10px;\n    top:6px;\n    font-size: 13px;\n    color: #777;\n    z-index: 8;\n  }\n  .btn-user-options{\n    position: absolute;\n    right: 10px;\n    bottom: 7px;\n    display: none;\n    z-index: 14;\n    width: 60px;\n  \n    i{\n      margin-left: 15px;\n      color: #888;\n      border-radius: 50%;\n      padding: 6px 12px;\n      transition: background 200ms ease-in;\n      &:hover{\n        background: rgba(0, 0, 0, 0.1);\n      }\n    }\n    .user-options{\n      width:160px;\n      position: absolute;\n      right: 28px;\n      background: #EEEEEE;\n      border-radius: 4px;\n      border: solid 1px #bbb;\n      z-index: 15;\n    }\n    li{\n      padding: 8px 5px 8px 10px;\n      border-bottom: 1px solid #bbb;\n    }\n  }\n\n  .add-chat a{\n    display: block;\n    text-decoration: none;\n    background: #7693D2;\n    color: #f8f8f8;\n    margin-top: 3px;\n    margin-bottom: 3px;\n    padding: 3px;\n    border-radius: 4px;\n    text-align: center;\n    width: 150px;\n  }\n"]);return R=function(){return e},e}var T=I.a.li(R());function L(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function M(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?L(t,!0).forEach((function(n){Object(D.a)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):L(t).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var z=Object(c.b)((function(e){return{listConversations:e.listConversations,userActive:e.posts.userActive,posts:e.posts.posts}}),{loadingPosts:function(e){return function(){var n=Object(p.a)(l.a.mark((function n(t){var r;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.idConversation){n.next=4;break}return n.next=3,E.get("conversation/messages/".concat(e.idConversation,"/1"));case 3:r=n.sent;case 4:t({type:"posts:LOADING_POSTS",payload:{posts:r?r.data:{messages:[],_id:e.idConversation},userActive:e}});case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},updateStatus:j,changeUserActive:function(e){return function(n){n({type:O,payload:{}}),n({type:"posts:CHANGE_USER_ACTIVE",payload:e})}}})((function(e){var n=e.userChat,t=e.loadingPosts,r=e.search,i=e.listConversations,s=e.lastUpdate,c=e.updateStatus,u=e.userActive,f=e.posts,m=e.messagesNotRead,g=e.setIsShowConfirm,b=e.setDeleteUser,v=e.idConversation,h=e.setShowList,x=e.changeUserActive,w=Object(a.useState)(!1),O=Object(d.a)(w,2),y=O[0],j=O[1],k=function(){var e=Object(p.a)(l.a.mark((function e(r){var a,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.contacts.some((function(e){return e.user._id===r}))){e.next=13;break}return e.next=4,E.post("/create/conversation",{userId:r});case 4:return a=e.sent,o=a.data,e.next=8,t(M({},n,{idConversation:o.idConversation}));case 8:if(!u.hasOwnProperty("_id")){e.next=13;break}if(u._id!==r){e.next=11;break}return e.abrupt("return",!1);case 11:return c(!0),e.abrupt("return",!0);case 13:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return o.a.createElement(T,{onClick:function(){0===i.contacts.length?k(n._id):i.contacts.every((function(e){return e.user._id===n._id?function(e){if(!u.hasOwnProperty("_id"))return t(M({},n,{idConversation:e,messagesNotRead:m})),!1;if(u.hasOwnProperty("_id")){if(u._id.toString()===n._id.toString())return!1;if(f[e])return void x(M({},n,{idConversation:e,messagesNotRead:m}));t(M({},n,{idConversation:e,messagesNotRead:m})),c(!0)}}(e.idConversation):k(n._id)})),r&&h(!1)}},o.a.createElement("div",{className:"user-image"},o.a.createElement("img",{src:n.imageProfile?n.imageProfile:"images/userDefault.png",alt:""})),o.a.createElement("div",{className:"user-info"},o.a.createElement("div",{className:"user-name"},o.a.createElement("h4",null,n.name.length>=18?n.name.substring(0,18)+"...":n.name),o.a.createElement("p",null,n.username),!r&&!!m&&o.a.createElement("span",{className:"messages-not-read"},m))),!r&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"last-update"},o.a.createElement("span",null,C(s,"list"))),o.a.createElement("div",{className:"btn-user-options",onClick:function(){return j(!y)},onMouseLeave:function(){return j(!1)}},o.a.createElement("i",{className:"fas fa-ellipsis-v"}),y&&o.a.createElement("ul",{className:"user-options"},o.a.createElement("li",{onClick:function(){g(!0),b({idUser:n._id,idConversation:v})}},"Excluir mensagens")))))}));function F(){var e=Object(P.a)(["\n  flex: 3;\n  display: flex;\n  align-items: center;\n\n  form{\n    width: 60%;\n    position: relative;\n    \n    input{\n      width: 100%;\n      padding: 5px 3px;\n      border-top-left-radius: 5px;\n      border-bottom-left-radius: 3px;\n      border-top-right-radius: 5px;\n      border-bottom-right-radius: 3px;\n      border: none;\n      outline: 0;\n    }\n    ul{\n      box-shadow: 1px 1px 5px #999;\n      width: 100%;\n      position: absolute;\n      z-index: 12;\n    }\n  }\n"]);return F=function(){return e},e}var G=I.a.div(F()),V=Object(c.b)((function(e){return{searchUsers:e.userInfo.serachUsers}}),{searchUser:N})((function(e){var n=e.searchUsers,t=e.searchUser,r=Object(a.useState)(!1),i=Object(d.a)(r,2),s=i[0],c=i[1],u=Object(a.useRef)();return o.a.createElement(G,null,o.a.createElement("form",{action:""},o.a.createElement("input",{type:"text",ref:u,className:"input-search",onFocus:function(){return c(!0)},onBlur:function(){return u.current.value=""},placeholder:"Pesquisar usu\xe1rios",name:"input",autoComplete:"off",onChange:function(){var e=u.current.value;t(e)}}),s&&o.a.createElement("ul",null,n.map((function(e){return o.a.createElement(z,{key:"search:".concat(e._id),search:!0,userChat:e,setShowList:c})})))))}));function B(){var e=Object(P.a)(["\n  width: 100%;\n  position: absolute;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.6);\n  z-index: 20;\n  top: 0;\n  left: 0;\n  form{\n    max-width: 350px;\n    width: 100%;\n    margin: 250px auto;\n     \n    .form-group input{\n      width: 100%;\n      /* height: 35px; */\n      padding: 8px 5px;\n    }\n\n    .action{\n      \n    }\n  }\n"]);return B=function(){return e},e}function H(){var e=Object(P.a)(["\n    margin: 0 auto;\n    align-items: center;\n    display: flex;\n    max-width: 350px;\n    padding-top: 20px;\n\n    .btn{\n      height: 40px;\n      text-transform: uppercase;\n      font-weight: 600; \n      width: 100%;\n      border: 1px solid #aaa;\n      outline: none;\n      cursor: pointer;\n\n      &:first-child{\n        margin-right: 10px;\n        background: rgba(89, 125, 204, 0.8);\n        color: #f8f8f8;\n        &:hover{\n          background: rgba(89, 125, 204, 0.6);\n        }\n      }\n    }\n"]);return H=function(){return e},e}function q(){var e=Object(P.a)(["\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.5);\n  top: 0;\n  left:0;\n  z-index: 15;\n\n  .close-preview{\n    color:white;\n    right: 250px;\n  }\n  .image-content{\n    display: flex;\n    justify-content: center;\n    width: 100%;\n    figure{\n      margin-top: 50px;\n      img{\n        display: block;\n        width:100%;\n        max-width:400px;\n      }\n    }\n  }\n"]);return q=function(){return e},e}function J(){var e=Object(P.a)(["\n  width:100%;\n  background: rgba(89, 125, 204, 0.8);\n  height: 70px;\n  border-bottom: 1px solid #bbb;\n  padding: 5px 10px;\n  display: flex;\n  border-top-left-radius: 8px;\n  border-top-right-radius: 8px;\n  justify-content: space-between;\n  \n  .user-logged > div, .user-conversation{\n    display: flex;\n    align-items:center;\n    color: #f2f2f2;\n    position: relative;\n    flex: 2;\n  }\n  .user-conversation{\n    flex: 2;\n  }\n  .user-logged > div{\n    justify-content: flex-end;\n    height: 100%;\n    i {\n      margin-right: 15px;\n      margin-left: 15px;\n    }\n  }\n  .user-logged{\n    position: relative;\n  }\n  .user-logged > div:hover{\n    cursor: pointer;\n    background: rgba(89, 125, 204, 0.5);\n  }\n  .user-img{\n    width: 60px;\n    img{\n      background: white;\n      ::selection{\n        background: transparent;\n      }\n      border-radius: 50%;\n      max-width:100%;\n    }\n  }\n  .user-img.conversation{\n    width: 40px;\n    float:right;\n  }\n  .user-info.logged{\n    margin-right: 10px;\n  }\n  .user-info.conversation{\n    margin-left: 10px;\n    p{\n      font-size: 14px;\n    }\n    .user-status{\n      position: relative;\n      margin-left: 4px;\n      letter-spacing: 0.6px;\n      &::before{\n        content: '';\n        position: relative;\n        top:3px;\n        right: 5px;\n        display: inline-block;\n        width: 15px;\n        height: 15px;\n        border-radius: 50%;\n        background: #4fdb66;\n      }\n    }\n  }\n"]);return J=function(){return e},e}var X,W=I.a.header(J()),Y=I.a.div(q()),K=I.a.div(H()),Q=I.a.div(B()),Z=Object(c.b)((function(e){return{userInfo:e.userInfo,status:e.listConversations.status,userActive:e.posts.userActive}}),{updateImageProfile:function(e){return function(){var n=Object(p.a)(l.a.mark((function n(t){var r,a;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,E.put("users/imageProfile",e);case 2:r=n.sent,a=r.data.newImage,t({type:"user:UPDATE_IMAGE_PROFILE",payload:a});case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},updateNameUser:function(e){return function(){var n=Object(p.a)(l.a.mark((function n(t){var r,a;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,E.put("/user",{name:e});case 2:r=n.sent,a=r.data.newName,t({type:"user:UPDATE_NAME_USER",payload:a});case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}})((function(e){var n=e.userInfo,t=e.userActive,r=e.status,i=e.updateImageProfile,s=e.updateNameUser,c=Object(a.useState)(!1),u=Object(d.a)(c,2),f=u[0],m=u[1],g=Object(a.useState)(!1),b=Object(d.a)(g,2),v=b[0],h=b[1],w=Object(a.useState)(!1),E=Object(d.a)(w,2),O=E[0],y=E[1],j=Object(a.useState)(!1),k=Object(d.a)(j,2),S=k[0],N=k[1];Object(a.useEffect)((function(){t._id&&x.on("typing",(function(e){e.idUser===t._id&&e.idConversation===t.idConversation&&(clearTimeout(X),N(!0),X=setTimeout((function(){N(!1)}),1e3))}))}),[t._id]);var P=function(){var e=Object(p.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O&&((n=new FormData).append("imageProfile",O),i(n),I());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){y(null),m(!1)};return o.a.createElement(W,{className:"header-info"},O&&o.a.createElement(Y,null,o.a.createElement("div",{className:"close-preview",onClick:I},o.a.createElement("i",{className:"fas fa-times"})),o.a.createElement("div",{className:"image-content"},o.a.createElement("figure",null,o.a.createElement("img",{src:window.URL.createObjectURL(O),alt:""}))),o.a.createElement(K,null,o.a.createElement("button",{className:"btn",onClick:P},"Confirmar"),o.a.createElement("button",{className:"btn",onClick:I},"Cancelar"))),v&&o.a.createElement(Q,null,o.a.createElement("form",{action:"",onSubmit:function(e){e.preventDefault();var n=e.target.newName.value;""!==n&&(s(n),h(!1),m(!1))}},o.a.createElement("div",{className:"form-group"},o.a.createElement("input",{type:"text",name:"newName",defaultValue:n.name,placeholder:"Digite um novo nome para o perfil"})),o.a.createElement(K,null,o.a.createElement("button",{className:"btn"},"Alterar"),o.a.createElement("button",{className:"btn",onClick:function(){return h(!1)}},"Cancelar")))),o.a.createElement("div",{className:"user-conversation"},t.hasOwnProperty("_id")&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"user-img conversation"},o.a.createElement("img",{src:t.imageProfile?t.imageProfile:"images/userDefault.png",alt:""})),o.a.createElement("div",{className:"user-info conversation"},t&&o.a.createElement("h4",null,t.name),t&&o.a.createElement("p",null,t.username),function(){if(r.hasOwnProperty("_id"))return r.status?o.a.createElement("small",{className:"user-status"},o.a.createElement("b",null,S?"Digitando...":"Online")):o.a.createElement("small",{style:{fontSize:11}},o.a.createElement("b",null,"Visto por \xfaltimo ",C(r.updatedAt)))}()))),o.a.createElement(V,null),o.a.createElement("div",{className:"user-logged"},o.a.createElement("div",{onClick:function(){return setTimeout((function(){return m(!f)}),100)}},o.a.createElement("i",{className:"fas fa-sort-down"}),o.a.createElement("div",{className:"user-info logged"},n.name&&o.a.createElement("h3",null,n.name),n.email&&o.a.createElement("p",null,n.email)),o.a.createElement("div",{className:"user-img logged"},o.a.createElement("img",{src:n.imageProfile?n.imageProfile:"images/userDefault.png",alt:""}))),o.a.createElement(A,{setFileImage:y,setIsMenuVisible:m,isMenuVisible:f,setShowInpurtUpdateName:h})))})),$=t(151),ee=t(29);function ne(){var e=Object(P.a)(["\n  clear: both;\n  position: relative;\n\n .warningMessage{\n    text-align: center;\n    font-weight: bold;\n    font-size: 13px;\n    color: #888;\n    width: fit-content;\n    background: #dcdcdc;\n    border-bottom: 1px solid #bbb;\n    display: block;\n    padding: 5px;\n    border-radius: 5px;\n    margin: 0 auto;\n  } \n\n  .content-message{\n    width: fit-content;\n    min-width:40px;\n    max-width: ",";\n    background: ",";\n    margin-bottom: 5px;\n    border-radius: 6px;\n    padding: 5px 8px;\n    z-index: 2;\n    float: ",";\n    display: flex;\n    flex-direction: column;\n    box-shadow: 0 0 15px #aaa;\n    position: ",";\n\n    &::after{\n      content: '';\n      position: absolute;\n      border-width: 10px;\n      border-color: beige transparent transparent transparent;\n      border-style: solid;\n      top:0;\n      right: -10px;\n      ","\n    }\n\n    .content-img{\n      width: 100%;\n      overflow: hidden;\n      max-width: 100%;\n      max-height: 250px;\n      cursor: pointer;\n    }\n    .content-img img{\n      width: 210px;\n      margin: 0 auto;\n      text-align: center;\n      display: block;\n      transition: transform 300ms ease-in-out;\n    }\n    div{\n      .hour{\n        position: relative;\n        width: 30px;\n        font-weight: 600;\n        color: #777;\n        float: right;\n        font-size: 11px;\n        right: -7px;\n        margin-top: 3px;\n      }\n    }\n  }\n  \n"]);return ne=function(){return e},e}var te=I.a.div(ne(),(function(e){return e.isImg?"40%":"60%"}),(function(e){return e.isIdUserLogged?"beige":"#f8f8f8"}),(function(e){return e.isIdUserLogged?"right":"left"}),(function(e){return e.preview?"static":"relative"}),(function(e){return!e.isIdUserLogged&&"\n        left: -10px;\n        right: inherit;\n        border-color: #f8f8f8 transparent transparent transparent;\n      "})),re=function(e){var n=e.isIdUserLogged,t=e.message,r=e.setUrlPreviewImage;return o.a.createElement(te,{isIdUserLogged:n,"data-id-message":t._id,"data-js":!n&&"viewed:".concat(t.viewed),isImg:!1},t&&o.a.createElement("div",{className:"content-message"},t.imagePath&&o.a.createElement("div",{className:"content-img"},o.a.createElement("img",{onClick:function(){return r(t.imagePath)},src:t.imagePath,alt:""})),o.a.createElement("div",null,o.a.createElement("p",null,t.message),o.a.createElement("span",{className:"hour"},C(t.createdAt,"posts")))))};function ae(){var e=Object(P.a)(["\n  background: #d6d6c5;\n  width: 100%;\n  height: 100%;\n  padding: 5px 15px;\n  overflow-y: auto;\n  position: relative;\n  opacity: 0;\n  transition: opacity 50ms linear;\n  flex: 5;\n  \n  ::-webkit-scrollbar {\n    width: 6px;\n    background: #F4F4F4;\n  }\n  ::-webkit-scrollbar-thumb {\n    -webkit-border-radius: 5px;\n    border-radius: 5px;\n    background:rgba(172, 167, 167, 0.8); \n  }\n"]);return ae=function(){return e},e}var oe=I.a.main(ae());function ie(e){var n=function(e,n){if("object"!==typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"===typeof n?n:String(n)}function se(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function ce(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?se(t,!0).forEach((function(n){Object(D.a)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):se(t).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var ue={},le=0,pe=Object(c.b)((function(e){return{userInfo:e.userInfo,posts:e.posts.posts,messagesNotRead:e.posts.userActive.messagesNotRead}}),{newMessage:function(e){return function(){var n=Object(p.a)(l.a.mark((function n(t){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t({type:"posts:NEW_MESSAGE",payload:e});case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},previousPosts:function(e,n){return function(){var t=Object(p.a)(l.a.mark((function t(r){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.get("conversation/messages/".concat(e,"/").concat(n));case 2:a=t.sent,r({type:"posts:PREVIOUS_POSTS",payload:{posts:a.data}});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var n=e.posts,t=e.userInfo,r=e.idConversation,i=e.containerChatRef,s=e.positionLine,c=e.messagesNotRead,u=e.previousPosts,d=e.setUrlPreviewImage,f=e.setLoadingMessages,m=e.newMessage,g=e.loadingMessages,b=v()(h);Object(a.useEffect)((function(){le=0,i.current.style.opacity=0,i.current.scrollTop=0,c?(i.current.scrollTop=0,w(!0)):(i.current.scrollTop+=99999,i.current.style.opacity=1,E()),i.current.style.opacity=1,E()}),[r]),Object(a.useEffect)((function(){b.on("newMessage",function(){var e=Object(p.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(n);case 2:E(),i.current.scrollHeight-i.current.scrollTop-100<650?i.current.scrollTop=99999:w(!1);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())}),[]);var w=function(e){var n=document.querySelectorAll('[data-js="viewed:false"]')[0];if(n){var t=n.getBoundingClientRect().top;i.current.style.opacity=1,function(e){var n=document.createElement("span");n.textContent="Mensagen(s) n\xe3o visualizada(s)",n.classList.add("warningMessage"),e.insertAdjacentElement("afterbegin",n)}(n),e&&(i.current.scrollTop=t-s.bottom+100)}},E=function(){if(i.current.scrollHeight===i.current.clientHeight){var e=document.querySelectorAll('[data-js="viewed:false"]');e&&(Object.keys(ue).forEach((function(n){e.forEach(function(){var e=Object(p.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.getBoundingClientRect().top<s.bottom&&x.emit("registerMessageViewed",n);case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())})),ue={}),i.current.style.opacity=1}},O=function(){var e=Object(p.a)(l.a.mark((function e(t){var a,o,i,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n[r],o=a.totalPages,i=a.page,s=a.nextPage,!(i<o&&le!==i)){e.next=8;break}return le=i,f(!0),e.next=6,u(r,s);case 6:return setTimeout((function(){f(!1)}),500),e.abrupt("return");case 8:i===o&&(le=0);case 9:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),y=function(){var e=Object(p.a)(l.a.mark((function e(n){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object.keys(ue).length>0&&document.querySelectorAll('[data-js="viewed:false"]').forEach((function(e){if(ue[e.getAttribute("data-id-message")]){var n=ue[e.getAttribute("data-id-message")];if(e.getBoundingClientRect().top<s.bottom){var t=ue,r=(t[n],Object(ee.a)(t,[n].map(ie)));ue=ce({},r),x.emit("registerMessageViewed",n)}}})),!(n.currentTarget.scrollTop<150)){e.next=6;break}return t=i.current.childNodes[1],e.next=5,O(n);case 5:g&&(i.current.scrollTop=s.top+t.getBoundingClientRect().top);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return o.a.createElement(oe,{ref:i,onScroll:y},n[r].posts.map((function(e){return function(e){(e.from.toString()!==t._id||e.to.toString()!==t._id)&&!e.viewed&&(ue=ce({},ue,Object(D.a)({},e._id,e._id)))}(e),o.a.createElement(re,{key:e._id,setUrlPreviewImage:d,isIdUserLogged:e.from.toString()===t._id,message:e})})))})),de=t(68);t(146);function fe(){var e=Object(P.a)(["\n  position: absolute;\n  max-width: 100%;\n  width: 100%;\n  padding: 15px 0;\n  left: 0;\n  background: #eee;\n  bottom: 100%;\n  z-index: 10;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n\n  .header{\n    .close{\n      position: absolute;\n      right: 50px;\n      top: 10px;\n      font-size: 28px;\n      cursor: pointer;\n      color: #444;\n    }\n\n    .image-name{\n      margin-bottom: 20px;\n      font-weight: 600;\n    }\n  }\n\n  .img-content{\n    max-width: 45%;\n    max-height: 380px;\n    img{\n      max-width: 80%;\n      max-height: 380px;\n      width: 100%;\n    }\n  }\n"]);return fe=function(){return e},e}function me(){var e=Object(P.a)(["\n  background: #ddd;\n  padding: 8px 15px;\n  width: 100%;\n  display: flex;\n  max-height: 80px;\n  flex-wrap:wrap;\n  align-items: center;\n  position: relative;\n\n  @media (max-height: 700px) {\n    max-height: 100px;\n    margin-bottom: 15px;\n  }\n  \n  .message-content{\n    div.close-picker{\n      width: 100%;\n      height: 1000%;\n      background: transparent;\n      position: absolute;\n      top:-900%;\n      left:0;\n      z-index: 0;\n    }\n    textarea{\n      max-width: 500px;\n      resize: none;\n      overflow-x: hidden;\n      padding-left:12px;\n      padding-top:10px;\n      border-radius: 50px;\n      border: solid 1px #bbb;\n      outline:0;\n      @media (max-width: 900px) {\n        max-width: 320px;\n      }\n    }\n  }\n  .icons i{\n    font-size: 28px;\n    color: #3bb6e7;\n    margin-left: 10px;\n    cursor: pointer;\n  }\n  .icons .fa-laugh{\n    color: #999;\n  }\n  .btn-send{\n    margin-left: 8px;\n    button{\n      border-radius: 20px;\n      text-decoration:none;\n      background: #aaa;\n      color: #f8f8f8;\n      font-size: 18px;\n      padding: 10px 40px;\n      display: block;\n      letter-spacing: 0.8px;\n      font-weight: 600;\n      border:none;\n      outline: none;\n\n      &:active{\n        transition: background 200ms ease;\n        background: #ccc;\n      }\n    }\n  }\n"]);return me=function(){return e},e}var ge=I.a.div(me()),be=I.a.figure(fe()),ve=Object(c.b)((function(e){return{userActive:e.posts.userActive,listConversations:e.listConversations,userInfo:e.userInfo}}),{loadingConversations:y})((function(e){var n=e.userActive,t=e.userInfo,r=e.containerChatRef,i=Object(a.useState)(""),s=Object(d.a)(i,2),c=s[0],u=s[1],f=Object(a.useState)(!1),m=Object(d.a)(f,2),g=m[0],b=m[1],v=Object(a.useState)(null),h=Object(d.a)(v,2),w=h[0],O=h[1],y=Object(a.useRef)(),j=function(){var e=Object(p.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===c.trim()&&!w){e.next=12;break}return(t=new FormData).append("userId",n._id),t.append("message",c),t.append("image",w||""),e.next=7,E.post("conversation/message",t);case 7:r.current&&(r.current.scrollTop=r.current.scrollHeight),u(""),O(null),(a=document.querySelector(".warningMessage"))&&a.remove();case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return o.a.createElement(ge,null,w&&o.a.createElement(be,null,o.a.createElement("div",{className:"header"},o.a.createElement("div",{className:"image-name"},o.a.createElement("p",null,w.name)),o.a.createElement("div",{className:"close",onClick:function(){return O(null)}},o.a.createElement("i",{className:"fas fa-times"}))),o.a.createElement("div",{className:"img-content"},o.a.createElement("img",{src:URL.createObjectURL(w),alt:""}))),o.a.createElement("div",{className:"message-content"},g&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"close-picker",onClick:function(){y.current.focus(),b(!1)}}),o.a.createElement(de.a,{onSelect:function(e){var n=e.native;u(c+n)},set:"google",style:{position:"absolute",bottom:"65px",left:0,zIndex:20,height:""}})),o.a.createElement("textarea",{cols:"50",rows:"2",ref:y,placeholder:"Escreva uma mensagem",value:c,onChange:function(e){u(e.target.value),x.emit("writing",{idUser:t._id,idConversation:n.idConversation})},onKeyUp:function(e){13===e.keyCode&&j()}})),o.a.createElement("input",{type:"file",id:"#file",hidden:!0,onChange:function(e){var n=e.target.files;return O(n[0])}}),o.a.createElement("div",{className:"icons"},o.a.createElement("i",{className:"far fa-laugh",onClick:function(){b(!g)}}),o.a.createElement("label",{htmlFor:"#file"},o.a.createElement("i",{className:"fas fa-image"}))),o.a.createElement("div",{className:"btn-send"},o.a.createElement("button",{onClick:j},"Enviar")))}));function he(){var e=Object(P.a)(["\n  max-width: 1060px;\n  height: 30px;\n  width: 100%;\n  position: absolute;\n  ","\n  overflow: unset\n"]);return he=function(){return e},e}function xe(){var e=Object(P.a)(["\n  flex: 1 1 70%;\n  height: 91%;\n  display:flex;\n  flex-direction: column;\n  position: relative;\n  background-image: url('images/speech-bubble.svg');\n  background-size: 60%;\n  background-repeat: no-repeat;\n  background-position-x: 150px;\n  background-position-y: 60px;\n  @media (max-height: 700px) {\n    background-position-y: 0px;\n  }\n  .loader-mensagens{\n    width: 100%;\n    position: absolute;\n    top:0;\n    left:0;\n    text-align: center;\n    background: rgba(255, 255, 255, 0.5);\n    z-index: 15;\n  }\n"]);return xe=function(){return e},e}var we=I.a.div(xe()),Ee=I.a.div(he(),(function(e){return e.top?"\n    top: 0px;\n  ":"\n    bottom:75px;\n  "})),Oe={},ye=Object(c.b)((function(e){return{userActive:e.posts.userActive}}),{loadingConversations:y,updateMessageRead:function(e){var n=e.message,t=e.messagesNotRead;return function(e){e({type:"conversations:UPDATE_MESSAGES_NOT_READ",payload:{numberMessages:t,idConversation:n.conversation}}),e({type:"posts:MESSAGE_READ",payload:n})}}})((function(e){var n=e.userActive,t=e.loadingConversations,r=e.updateMessageRead,i=Object(a.useState)(""),s=Object(d.a)(i,2),c=s[0],u=s[1],m=Object(a.useState)(!1),g=Object(d.a)(m,2),b=g[0],w=g[1],E=Object(a.useRef)(),O=Object(a.useRef)(),y=Object(a.useRef)();Object(a.useEffect)((function(){Oe={top:O.current.getBoundingClientRect().bottom,bottom:y.current.getBoundingClientRect().top},v()(h).on("newMessage",Object(p.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout((function(){return t()}),200);case 1:case"end":return e.stop()}}),e)})))),x.on("messageRead",(function(e){setTimeout((function(){return r(e)}),300)}))}),[]),Object(a.useEffect)((function(){j()}),[n.idConversation]);var j=function(){return o.a.createElement(pe,{positionLine:Oe,idConversation:n.idConversation,containerChatRef:E,setUrlPreviewImage:u,setLoadingMessages:w,loadingMessages:b})};return o.a.createElement(o.a.Fragment,null,o.a.createElement($.a,{in:!!c,timeout:300,classNames:"preview",unmountOnExit:!0},o.a.createElement("div",{className:"preview-image"},o.a.createElement("div",{className:"close-preview",onClick:function(){return u(!1)}},o.a.createElement("i",{className:"fas fa-times"})),o.a.createElement("figure",null,c&&o.a.createElement("img",{src:c,alt:""})))),o.a.createElement(we,null,o.a.createElement("div",{className:"loader-mensagens"},o.a.createElement(f.PulseLoader,{loading:b,color:"#7693d2"})),n.hasOwnProperty("_id")&&j(),o.a.createElement(Ee,{ref:O,top:!0}),o.a.createElement(Ee,{ref:y}),n.hasOwnProperty("_id")&&o.a.createElement(ve,{containerChatRef:E})))}));function je(){var e=Object(P.a)(["\n  position: absolute;\n  height: 120px;\n  width: 100%;\n  background: rgba(0, 0, 0, 0.5);\n  z-index: 6;\n  top: 50%;\n  transform: translateY(-50%);\n  color: #eee;\n\n  .close-modal{\n    position: absolute;\n    right: 10%;\n    top: 10px;\n    font-size: 26px;\n  }\n  .confirm-content{\n    padding-top:10px;\n    text-align:center;\n\n    h3{\n      letter-spacing: 0.7px;\n      margin-left: 5px;\n    }\n    i{\n      color: #eaf73b;\n      font-size: 26px;\n      margin-right: 10px;\n    }\n  }\n\n  .btn-actions{\n    margin-top: 20px;\n\n    .btn{\n      max-width: 160px;\n      width: 100%;\n      height: 30px;\n      text-transform: uppercase;\n      font-weight: 600;\n      border: 1px solid #aaa;\n      outline: 0;\n      cursor: pointer;\n      &:hover{\n        background: rgba(255, 255, 255, 0.6)\n      }\n    }\n    .btn.ok{\n      margin-left: 10px;\n      background: #7693D2;\n      color: #f8f8f8;\n      &:hover{\n        background: rgba(118, 147, 210, 0.8);\n      }\n    }\n  }\n"]);return je=function(){return e},e}var ke=I.a.div(je()),Se=function(e){var n=e.setIsShowConfirm,t=e.deleteConversation;return o.a.createElement(ke,null,o.a.createElement("div",{className:"close-modal",onClick:function(){return n(!1)}},o.a.createElement("i",{className:"fas fa-times"})),o.a.createElement("div",{className:"confirm-content"},o.a.createElement("h4",null,o.a.createElement("i",{className:"fas fa-exclamation-triangle"}),"Tem certeza disso? Isso apagar\xe1 todas as mensagens.",o.a.createElement("br",null),"Deseja realmente continuar?"),o.a.createElement("div",{className:"btn-actions"},o.a.createElement("button",{className:"btn cancel",onClick:function(){return n(!1)}},"Cancelar"),o.a.createElement("button",{className:"btn ok",onClick:function(){return t()}},"Excluir"))))};function Ne(){var e=Object(P.a)(["\nposition: relative;\nflex: 1 1 25%;\n@media (max-width: 930px) {\n  /* min-width: 500px; */\n  /* flex: 0;    */\n}\n.content{\n  z-index: 5;\n  position: relative;\n  height: 100%;\n  background: #ffffef;\n  /* height: 90%; */\n  overflow-y: auto;\n  border-left: solid 1px #bbb;\n    /* @media (max-width: 930px) {\n      transform: translateX(110%);\n      height: 100%;\n      position: absolute;\n      right: 0;\n      bottom: 0;\n    } */\n    .add-user{\n      text-align: center;\n      margin-top: 50px;\n      color: #555;\n      font-style: italic;\n    }\n  }\n"]);return Ne=function(){return e},e}var Ce=I.a.section(Ne()),Pe=Object(c.b)((function(e){return{listConversations:e.listConversations}}),{cleanPosts:function(e){var n=e.idConversation,t=e.idUser;return function(){var e=Object(p.a)(l.a.mark((function e(r){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(n,t),e.next=3,E.delete("conversation/".concat(n,"/").concat(t));case 3:r({type:"posts:CLEAN_POSTS_USER",payload:n});case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},loadingConversations:y,searchUser:N})((function(e){var n=e.listConversations,t=e.cleanPosts,r=e.loadingConversations,i=(e.searchUser,Object(a.useState)(!1)),s=Object(d.a)(i,2),c=s[0],u=s[1],f=Object(a.useState)({}),m=Object(d.a)(f,2),g=m[0],b=m[1],v=function(){var e=Object(p.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(g);case 2:r(),u(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return o.a.createElement(o.a.Fragment,null,c&&o.a.createElement(Se,{deleteConversation:v,setIsShowConfirm:u}),o.a.createElement(Ce,null,o.a.createElement("div",{className:"content"},n.contacts.length?o.a.createElement("ul",{className:"list-conversas"},n.contacts.map((function(e){return o.a.createElement(z,{key:e.user._id,userChat:e.user,lastUpdate:e.updatedAt,idConversation:e.idConversation,messagesNotRead:e.messagesNotRead,setDeleteUser:b,setIsShowConfirm:u})}))):o.a.createElement("div",{className:"add-user"},"Sua lista de conversas est\xe1 vazia",o.a.createElement("br",null)))))}));function Ie(){var e=Object(P.a)(["\n  text-align: center;\n  width: 100%;\n  max-width: 350px;\n  margin: 0 auto;\n\n  .error{\n    color: red;\n    display: block;\n    margin-bottom: 10px;\n  }\n  .group-input{\n    margin-bottom: 15px;\n    position: relative;\n\n    ","\n  }\n  input{\n    width: 100%;\n    max-width: 350px;\n    padding: 8px 5px;\n  }\n  .btn-actions{\n    margin: 0 auto;\n    align-items: center;\n    display: flex;\n    max-width: 350px;\n    \n    .fa-arrow-left{\n      margin-right: 5px;\n    }\n  }\n  .btn{\n    height: 45px;\n    text-transform: uppercase;\n    font-weight: 600; \n    width: 100%;\n    border: 1px solid #aaa;\n    outline: none;\n    cursor: pointer;\n\n  }\n  .sign-in{\n    background: rgba(89, 125, 204, 0.8);\n    color: #f8f8f8;\n    &:hover{\n      background: rgba(89, 125, 204, 0.6);\n    }\n  }\n  .sign-up{\n    &:hover{\n      background: rgba(0, 0, 0, 0.1);\n      color: #444;\n    }\n  }\n\n"]);return Ie=function(){return e},e}var _e=I.a.form(Ie(),(function(e){return e.signUp&&"\n      &:before{\n        content: '*';\n        color: red;\n        position: absolute;\n        display: block;\n        left: -10px;\n      }\n    "})),Ue=function(e){var n=e.submit,t=e.signUp,r=e.setIsSignIn,a=e.messageError;return o.a.createElement(_e,{onSubmit:n,signUp:t},o.a.createElement("span",{className:"error"},a),t&&o.a.createElement("div",{className:"group-input"},o.a.createElement("input",{type:"text",name:"name",placeholder:"Digite seu nome completo"})),o.a.createElement("div",{className:"group-input"},o.a.createElement("input",{type:"email",name:"email",placeholder:"Digite seu email"})),o.a.createElement("div",{className:"group-input"},o.a.createElement("input",{type:"password",name:"password",placeholder:"Digite sua senha"})),t&&o.a.createElement("div",{className:"group-input"},o.a.createElement("input",{type:"password",name:"confirmPassword",placeholder:"Confirme sua senha"})),o.a.createElement("div",{className:"btn-actions"},o.a.createElement("button",{onClick:function(){return r(!!t)},className:"btn sign-up",type:"button"},t?o.a.createElement("span",null,o.a.createElement("i",{className:"fas fa-arrow-left"}),"Voltar"):"Cadastre-se"),o.a.createElement("button",{className:"btn sign-in"},t?"Cadastre-se":"Login")))},Ae=Object(c.b)(null,{loginUser:S})((function(e){var n=e.loginUser,t=e.setIsSignIn,r=e.messageError,i=e.setMessageError;Object(a.useEffect)((function(){i("")}),[]);var s=function(){var e=Object(p.a)(l.a.mark((function e(t){var r,a,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r=t.target,a=r.email,o=r.password,a.value&&o.value){e.next=5;break}return i("Preencha os campos corretamente!"),e.abrupt("return",!1);case 5:return e.next=7,n(a.value,o.value);case 7:window.location.reload();case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return o.a.createElement(Ue,{submit:s,setIsSignIn:t,messageError:r})})),De=Object(c.b)(null,{loginUser:S})((function(e){var n=e.setIsSignIn,t=e.messageError,r=e.setMessageError,i=e.loginUser;Object(a.useEffect)((function(){r("")}),[]);var s=function(){var e=Object(p.a)(l.a.mark((function e(n){var t,a,o,s,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),t=n.target,a=t.name,o=t.email,s=t.password,c=t.confirmPassword,a.value&&o.value&&s.value&&c.value){e.next=5;break}return r("Todos os campos s\xe3o obrigat\xf3rios!"),e.abrupt("return",!1);case 5:if(s.value===c.value){e.next=8;break}return r("Senhas diferentes!"),e.abrupt("return",!1);case 8:return e.prev=8,e.next=11,E.post("auth/register",{name:a.value,email:o.value,password:s.value});case 11:return e.next=13,i(o.value,s.value);case 13:window.location.reload(),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(8),r("Ocorreu um erro ao tentar se cadastrar!");case 19:case"end":return e.stop()}}),e,null,[[8,16]])})));return function(n){return e.apply(this,arguments)}}();return o.a.createElement(Ue,{submit:s,setIsSignIn:n,signUp:!0,messageError:t})}));function Re(){var e=Object(P.a)(["\n  background: #ddd;\n  height: 100%;\n  width: 100%;\n\n  header{\n    text-align:center;\n\n    .logo{\n      font-size: 7.5em;\n      color: rgba(89, 125, 204, 0.8);\n      p{\n        font-size: 20px;\n      }\n    }\n    .login{\n      color: #444;\n      font-style: italic;\n      font-size: 1.4em;\n    }\n  }\n"]);return Re=function(){return e},e}var Te=I.a.section(Re()),Le=function(){var e=Object(a.useState)(!0),n=Object(d.a)(e,2),t=n[0],r=n[1],i=Object(a.useState)(""),s=Object(d.a)(i,2),c=s[0],u=s[1];return o.a.createElement(Te,null,o.a.createElement("header",null,o.a.createElement("div",{className:"logo"},o.a.createElement("i",{className:"fas fa-comments"}),o.a.createElement("p",null,"Chat")),o.a.createElement("div",{className:"login"},o.a.createElement("h1",null,t?"Login":"Cadastro"))),t?o.a.createElement(Ae,{setIsSignIn:r,messageError:c,setMessageError:u}):o.a.createElement(De,{setIsSignIn:r,messageError:c,setMessageError:u}))};function Me(){var e=Object(P.a)(["\n  max-width: 1160px;\n  min-width: 1000px;\n  width: 100%;\n  height: 88vh;\n  border: 1px solid #bbb;\n  margin: 40px auto;\n  display: flex;\n  flex-wrap: wrap;\n  border-radius: 8px;\n  overflow: hidden;\n  position: relative;\n  box-shadow: 0 0 10px #666; \n\n  .preview-image{\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    background: #f8f8f8;\n    z-index: 10;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    figure{\n      width: 100%;\n      img{\n        margin: 20px auto;\n        display: block;\n        max-width: 70%;\n        max-height: 500px;\n      }\n    }\n  }\n\n  .loader{\n    width: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n\n.preview-enter {\n  opacity: 0;\n}\n.preview-enter-active {\n  opacity: 1;\n  transition: opacity 400ms ease-in;\n}\n.preview-exit {\n  opacity: 1;\n}\n.preview-exit-active {\n  opacity: 0;\n  transition: opacity 200ms ease-out;\n}\n"]);return Me=function(){return e},e}var ze,Fe=I.a.div(Me()),Ge=Object(c.b)((function(e){return{userInfo:e.userInfo,userActive:e.posts.userActive}}),{updateStatus:j,loadingConversations:y,loginUser:S,getInfoUserLogged:function(){return function(){var e=Object(p.a)(l.a.mark((function e(n){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.get("/user");case 3:t=e.sent,clearInterval(r),r=setInterval((function(){k.emit("online",t.data._id)}),2e3),n({type:"user:LOGIN_USER",payload:t.data}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),localStorage.removeItem("@chat@"),window.location.reload();case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(n){return e.apply(this,arguments)}}()}})((function(e){var n=e.userInfo,t=e.loadingConversations,r=e.userActive,i=e.updateStatus,s=e.getInfoUserLogged,c=Object(a.useState)(null),u=Object(d.a)(c,2),m=u[0],g=u[1],b=Object(a.useState)(!1),v=Object(d.a)(b,2),h=v[0],w=v[1],E=Object(a.useState)(!0),O=Object(d.a)(E,2),y=O[0],j=O[1];return Object(a.useEffect)((function(){(function(){var e=Object(p.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!JSON.parse(localStorage.getItem("@chat@"))){e.next=10;break}return g(!0),e.next=5,s();case 5:return e.next=7,t();case 7:setTimeout((function(){return j(!1)}),500),e.next=11;break;case 10:g(!1);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(a.useEffect)((function(){r.hasOwnProperty("_id")&&(clearInterval(ze),ze=setInterval((function(){x.emit("verifyStatus",r._id)}),3e3))}),[r]),Object(a.useEffect)((function(){h||(i(),w(!0))}),[r]),n._id&&window.addEventListener("beforeunload",(function(){return x.emit("off",n._id),""})),o.a.createElement(Fe,null,!1===m&&o.a.createElement(Le,null),m&&o.a.createElement(o.a.Fragment,null,y?o.a.createElement("div",{className:"loader"},o.a.createElement(f.PulseLoader,{color:"rgba(89, 125, 204, 0.8)"})):o.a.createElement(o.a.Fragment,null,o.a.createElement(Z,{socket:x}),o.a.createElement(ye,null),o.a.createElement(Pe,null))))}));var Ve=function(){return o.a.createElement("div",{className:"App"},o.a.createElement(Ge,null))},Be=(t(147),t(14)),He=t(42);function qe(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Je(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?qe(t,!0).forEach((function(n){Object(D.a)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):qe(t).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Xe={serachUsers:[]},We=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"user:LOGIN_USER":return Je({},e,{},n.payload);case"user:SEARCH_USER":return Je({},e,{serachUsers:n.payload});case"user:UPDATE_IMAGE_PROFILE":return Je({},e,{imageProfile:n.payload});case"user:UPDATE_NAME_USER":return Je({},e,{name:n.payload});default:return e}},Ye=t(43);function Ke(e){var n=function(e,n){if("object"!==typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"===typeof n?n:String(n)}function Qe(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Ze(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Qe(t,!0).forEach((function(n){Object(D.a)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Qe(t).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var $e={posts:{},userActive:{}},en=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"posts:LOADING_POSTS":var t=n.payload,r=t.userActive,a=t.posts;return Ze({},e,{posts:Ze({},e.posts,Object(D.a)({},a.idConversation,a)),userActive:r});case"posts:CHANGE_USER_ACTIVE":return Ze({},e,{userActive:n.payload});case"posts:PREVIOUS_POSTS":var o=n.payload.posts;return Ze({},e,{posts:Ze({},e.posts,Object(D.a)({},o.idConversation,Ze({},e.posts[o.idConversation],{},o,{posts:[].concat(Object(Ye.a)(o.posts),Object(Ye.a)(e.posts[o.idConversation].posts))})))});case"posts:NEW_MESSAGE":var i=n.payload.conversation;return e.posts[i]?Ze({},e,{posts:Ze({},e.posts,Object(D.a)({},i,Ze({},e.posts[i],{posts:e.posts[i].hasOwnProperty("posts")&&e.posts[i].posts.concat(n.payload)})))}):e;case"posts:CLEAN_POSTS_USER":var s=e.posts,c=n.payload,u=(s[c],Object(ee.a)(s,[c].map(Ke)));return{posts:Ze({},u),userActive:{}};case"posts:MESSAGE_READ":var l=n.payload,p=l._id,d=l.conversation;return Ze({},e,{posts:Ze({},e.posts,Object(D.a)({},d,Ze({},e.posts[d],{posts:e.posts[d].posts.map((function(e){return e._id===p?Ze({},n.payload):e}))})))});default:return e}};function nn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function tn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?nn(t,!0).forEach((function(n){Object(D.a)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):nn(t).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var rn,an={contacts:[],status:{}},on=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:an,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"conversations:LOADING_CONVERSATIONS":return tn({},e,{contacts:n.payload});case O:return tn({},e,{status:n.payload});case"conversations:UPDATE_MESSAGES_NOT_READ":return tn({},e,{contacts:e.contacts.map((function(e){return e.idConversation===n.payload.idConversation?tn({},e,{messagesNotRead:n.payload.numberMessages}):e}))});default:return e}},sn=Object(Be.c)({userInfo:We,posts:en,listConversations:on}),cn=function(){return window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()};rn=cn()?Object(Be.d)(Object(Be.a)(He.a),cn()):Object(Be.d)(Object(Be.a)(He.a));var un=Object(Be.e)(sn,{},rn);t(148);s.a.render(o.a.createElement(c.a,{store:un},o.a.createElement(Ve,null)),document.getElementById("root"))},72:function(e,n,t){e.exports=t(149)}},[[72,1,2]]]);
//# sourceMappingURL=main.2e8ac94e.chunk.js.map