{"version":3,"sources":["reducers/userInfo/actionsCreators.js","config/api.js","config/socket.io.js","reducers/conversations/actionsCreators.js","config/getHours.js","components/InfoUser/UserConfig/styles.js","components/InfoUser/UserConfig/index.js","reducers/posts/actionsCreators.js","components/ListChat/UserChat/styles.js","components/ListChat/UserChat/index.js","components/SearchUser/styles.js","components/SearchUser/index.js","components/InfoUser/styles.js","components/InfoUser/index.js","components/Chat/Message/styles.js","components/Chat/Message/index.js","components/Chat/Posts/styles.js","components/Chat/Posts/index.js","components/Chat/SendMessage/styles.js","components/Chat/SendMessage/index.js","components/Chat/styles.js","components/Chat/index.js","components/Confirm/styles.js","components/Confirm/index.js","components/ListChat/styles.js","components/ListChat/index.js","components/Form/styles.js","components/Form/index.js","components/Auth/SignIn/index.js","components/Auth/SignUp/index.js","components/Auth/styles.js","components/Auth/index.js","pages/Chat/styles.js","pages/Chat/index.js","App.js","reducers/userInfo/index.js","reducers/posts/index.js","reducers/conversations/index.js","store/index.js","reducers/index.js","index.js"],"names":["timer","getToken","token","JSON","parse","localStorage","getItem","axios","create","baseURL","headers","socket","io","STATUS","loadingConversations","dispatch","a","api","get","data","type","payload","updateStatus","cleanStatus","on","status","loginUser","email","password","post","setItem","stringify","time","place","hour","Date","getHours","minutes","getMinutes","day","getDate","month","getMonth","year","getFullYear","ConfigList","styled","ul","MenuConfig","setFileImage","configRef","useRef","useEffect","current","focus","ref","id","hidden","onChange","files","target","htmlFor","onClick","removeItem","window","location","reload","newMessage","mensagem","UserConversation","li","connect","state","listConversations","userActive","posts","loadingPosts","userChatActive","idConversation","messages","_id","userChat","search","lastUpdate","messagesNotRead","setIsShowConfirm","setDeleteUser","useState","isMenuOptions","setIsMenuOptions","createConversation","userId","contacts","some","conversation","user","hasOwnProperty","handleClickList","toString","length","every","item","className","src","imageProfile","alt","name","substring","username","onMouseLeave","idUser","ContainerSearch","div","searchUsers","userInfo","serachUsers","searchUser","query","action","placeholder","autoComplete","e","input","value","map","key","ConatinerInfo","header","PreviewImage","updateImageProfile","image","put","newImage","isMenuVisible","setIsMenuVisible","fileImage","imageProfileUpdate","FormData","append","closeUpdateImage","URL","createObjectURL","style","fontSize","gethours","updatedAt","renderStatus","setTimeout","ContainerMessage","props","preview","isImg","isIdUserLogged","Message","message","isPreview","setIsPreview","data-id-message","data-js","viewed","imagePath","createdAt","ContainerPosts","main","scroll","idsMessages","page","pageActual","totalPages","nextPage","previousPosts","containerChatRef","positionLine","socketnewMessage","warningMessage","document","createElement","textContent","classList","add","querySelectorAll","positionMessage","getBoundingClientRect","top","scrollTop","insertAdjacentElement","scrollHeight","initialConversation","clientHeight","Object","keys","forEach","emit","postsPrevious","currentTarget","messagesViewed","getAttribute","tail","onScroll","registerIdsMessages","ContainerSend","PreviewImg","figure","messageText","setMessageText","showEmoji","setShowEmoji","fileImg","setFileImg","sendMessage","preventDefault","onSelect","emoji","native","set","position","bottom","left","zIndex","cols","rows","href","ContainerChat","MessageViewed","updateMessageRead","numberMessages","lineRef","socketMessageRead","Container","Confirm","deleteConversation","ContainerList","cleanPosts","delete","isShowConfirm","deleteUser","FormContainer","form","Form","submit","signUp","setIsSignIn","messageError","onSubmit","setMessageError","login","register","confirmPassword","section","Auth","isSignIn","getInfoUserLogged","clearInterval","setInterval","isLogged","setIsLogged","isInitialStatusUpdate","setIsInitialStatusUpdate","getUserInfo","addEventListener","App","initialState","concat","tall","compo","conversations","contact","combineReducers","logger","__REDUX_DEVTOOLS_EXTENSION__","compose","applyMiddleware","thunk","createStore","reducers","ReactDOM","render","store","getElementById"],"mappings":"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","file":"static/js/main.d1f665eb.chunk.js","sourcesContent":["import api from '../../config/api'\r\nimport io from 'socket.io-client'\r\nexport const LOGIN_USER = 'user:LOGIN_USER'\r\nexport const SEARCH_USER = 'user:SEARCH_USER'\r\nexport const UPDATE_IMAGE_PROFILE = 'user:UPDATE_IMAGE_PROFILE'\r\n\r\nconst socket = io('https://api-chat-back.herokuapp.com')\r\n// const socket = io('http://localhost:3333')\r\nlet timer\r\nexport const loginUser = (email, password) => async dispatch => {\r\n  let data = { data: '' }\r\n  data = await api.post(`/auth/sign-in`, {\r\n    email,\r\n    password\r\n  })\r\n  localStorage.setItem('@chat@', JSON.stringify({ token: data.data.token }))\r\n\r\n  // clearInterval(timer)\r\n  // timer = setInterval(() => {\r\n  //   socket.emit('online', data.data.user._id)\r\n  // }, 2000)\r\n  dispatch({\r\n    type: LOGIN_USER,\r\n    payload: data.data\r\n  })\r\n}\r\n\r\nexport const getInfoUserLogged = () => async dispatch => {\r\n  const user = await api.get('/user')\r\n  clearInterval(timer)\r\n  timer = setInterval(() => {\r\n    socket.emit('online', user.data._id)\r\n  }, 2000)\r\n  dispatch({\r\n    type: LOGIN_USER,\r\n    payload: user.data\r\n  })\r\n}\r\n\r\nexport const searchUser = (query) => async dispatch => {\r\n  let data\r\n  if (query !== '') {\r\n    data = await api.get(`/users/${query}`)\r\n  }\r\n\r\n  dispatch({\r\n    type: SEARCH_USER,\r\n    payload: data ? data.data : []\r\n  })\r\n}\r\n\r\nexport const updateImageProfile = (image) => async dispatch => {\r\n  const { data: { newImage } } = await api.put('users/imageProfile', image)\r\n  dispatch({\r\n    type: UPDATE_IMAGE_PROFILE,\r\n    payload: newImage\r\n  })\r\n}","import axios from 'axios'\r\n\r\nconst getToken = () => {\r\n  const token = JSON.parse(localStorage.getItem('@chat@'))\r\n  if (token) {\r\n    return axios.create({\r\n      // baseURL: 'https://api-chat-back.herokuapp.com/',\r\n      baseURL: 'http://localhost:3333',\r\n      headers: {\r\n        'Authorization': `Bearer ${token.token}`\r\n      }\r\n    })\r\n  } else {\r\n    return axios.create({\r\n      // baseURL: 'https://api-chat-back.herokuapp.com/',\r\n      baseURL: 'http://localhost:3333',\r\n    })\r\n  }\r\n\r\n}\r\n\r\nexport default getToken()","import io from 'socket.io-client'\r\n// const socket = io('http://localhost:3333')\r\nconst socket = io('https://api-chat-back.herokuapp.com')\r\n\r\nexport default socket","import api from '../../config/api'\r\nimport socket from '../../config/socket.io'\r\n\r\nexport const LOADING_CONVERSATIONS = 'conversations:LOADING_CONVERSATIONS'\r\nexport const UPDATE_MESSAGES_NOT_READ = 'conversations:UPDATE_MESSAGES_NOT_READ'\r\nexport const STATUS = 'convertation:USER_STATUS'\r\n\r\nexport const loadingConversations = () => async  dispatch => {\r\n  const { data } = await api.get('/conversations')\r\n\r\n  dispatch({\r\n    type: LOADING_CONVERSATIONS,\r\n    payload: data\r\n  })\r\n}\r\n\r\nexport const updateStatus = (cleanStatus) => dispatch => {\r\n  if (cleanStatus) {\r\n    dispatch({\r\n      type: STATUS,\r\n      payload: {}\r\n    })\r\n  } else {\r\n    socket.on('status', status => {\r\n      dispatch({\r\n        type: STATUS,\r\n        payload: status\r\n      })\r\n    })\r\n  }\r\n}\r\n\r\n","export default function (time, place) {\r\n  let hour = new Date(time).getHours()\r\n  let minutes = new Date(time).getMinutes()\r\n\r\n  minutes = minutes < 10 ? `0${minutes}` : minutes\r\n  hour = hour < 10 ? `0${hour}` : hour\r\n\r\n  let day = new Date(time).getDate()\r\n  let month = new Date(time).getMonth()\r\n  let year = new Date(time).getFullYear()\r\n  if (place === 'posts') {\r\n    return `${hour}:${minutes}`\r\n  }\r\n  if (day === new Date().getDate()) {\r\n    return `${hour}:${minutes}`\r\n  }\r\n  if ((new Date().getDate() - day) > 1 || new Date().getMonth() + 1 > month + 1) {\r\n    // if(new Date().getMonth() - month)\r\n    return `${day < 10 ? `0${day}` : day}/${month < 10 ? `0${month + 1}` : month}/${year}`\r\n  }\r\n  if ((new Date().getDate() - day) === 1 && place === 'list') {\r\n    return `Ontem`\r\n  } else {\r\n    return `Ontem ${hour}:${minutes}`\r\n  }\r\n\r\n  // else {\r\n  //   return `${day < 10 ? `0${day}` : day}/${month < 10 ? `0${month + 1}` : month}/${year}`\r\n  // }\r\n  // let hours = (timer / 1000 / 60 / 60)\r\n  // if (hours < 24) {\r\n  //   return `${hour}:${minutes}`\r\n  // } else if (hours > 24 && hours < 48) {\r\n  //   return `${place === 'list' ? 'ontem' : `${hour}:${minutes}`}`\r\n  // } else if (hours > 48) {\r\n  //   return `${day < 10 ? `0${day}` : day}/${month < 10 ? `0${month + 1}` : month}/${year}`\r\n  // }\r\n  // return `${hour}:${minutes}`\r\n}","import styled from 'styled-components'\r\n\r\nexport const ConfigList = styled.ul`\r\n  width: 170px;\r\n  background: #f1f1f1;\r\n  position: absolute;\r\n  top: 60px;\r\n  left: 0px;\r\n  border: solid 1px #bbb;\r\n  color: #666;\r\n  list-style-type: none;\r\n  z-index: 14;\r\n  li{\r\n    font-size: 15px;\r\n    font-weight: 600;\r\n    text-align: center;\r\n    height: 30px;\r\n    border-bottom: 1px solid #bbb;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n\r\n    label{\r\n      width: 100%;\r\n      display: inline-block;\r\n      padding-top: 5px;\r\n      height: 100%;\r\n    }\r\n\r\n    &:hover{\r\n      background: #ddd;\r\n    }\r\n  }\r\n`","import React, { useRef, useEffect } from 'react'\r\nimport { ConfigList } from './styles'\r\n\r\nconst MenuConfig = ({ setFileImage }) => {\r\n  const configRef = useRef()\r\n  useEffect(() => { configRef.current.focus() }, [])\r\n  const logout = () => {\r\n    localStorage.removeItem('@chat@')\r\n    window.location.reload()\r\n  }\r\n  return (\r\n    <>\r\n      <ConfigList ref={configRef}>\r\n        <li>\r\n          <input\r\n            type=\"file\"\r\n            id=\"#file\" hidden\r\n            onChange={({ target: { files } }) => setFileImage(files[0])} />\r\n          <label htmlFor=\"#file\">\r\n            Alterar imagem\r\n        </label></li>\r\n        <li onClick={logout}>Logout</li>\r\n      </ConfigList>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default MenuConfig\r\n","import api from '../../config/api'\r\nimport { UPDATE_MESSAGES_NOT_READ } from '../conversations/actionsCreators'\r\nexport const LOADING_POSTS = 'posts:LOADING_POSTS'\r\nexport const PREVIOUS_POSTS = 'posts:PREVIOUS_POSTS'\r\nexport const CLEAN_POSTS_USER = 'posts:CLEAN_POSTS_USER'\r\nexport const NEW_MESSAGE = 'posts:NEW_MESSAGE'\r\nexport const MESSAGE_READ = 'posts:MESSAGE_READ'\r\n\r\n\r\nexport const loadingPosts = (userChatActive) => async dispatch => {\r\n  let messages\r\n  if (userChatActive.idConversation) {\r\n    messages = await api.get(`conversation/messages/${userChatActive.idConversation}/1`)\r\n  }\r\n  dispatch({\r\n    type: LOADING_POSTS,\r\n    payload: {\r\n      // posts: messages ? messages.data : { messages: [], _id: userChatActive.idConversation },\r\n      posts: messages ? messages.data : { messages: [], _id: userChatActive.idConversation },\r\n      userActive: userChatActive,\r\n    }\r\n  })\r\n}\r\n\r\nexport const previousPosts = (idConversation, page) => async dispatch => {\r\n  const messages = await api.get(`conversation/messages/${idConversation}/${page}`)\r\n  dispatch({\r\n    type: PREVIOUS_POSTS,\r\n    payload: {\r\n      posts: messages.data\r\n    }\r\n  })\r\n}\r\n\r\nexport const newMessage = (mensagem) => async dispatch => {\r\n  dispatch({\r\n    type: NEW_MESSAGE,\r\n    payload: mensagem\r\n  })\r\n}\r\n\r\nexport const cleanPosts = ({ idConversation, idUser }) => async dispatch => {\r\n  await api.delete(`conversation/${idConversation}/${idUser}`)\r\n  dispatch({\r\n    type: CLEAN_POSTS_USER,\r\n    payload: idConversation\r\n  })\r\n}\r\n\r\nexport const updateMessageRead = ({ message, messagesNotRead }) => dispatch => {\r\n  dispatch({\r\n    type: UPDATE_MESSAGES_NOT_READ,\r\n    payload: {\r\n      numberMessages: messagesNotRead,\r\n      idConversation: message.conversation\r\n    }\r\n  })\r\n  dispatch({\r\n    type: MESSAGE_READ,\r\n    payload: message\r\n  })\r\n}","import styled from 'styled-components'\r\n\r\nexport const UserConversation = styled.li`\r\n  align-items:center;\r\n  background: #eee;\r\n  border-bottom: 1px solid #ddd;\r\n  cursor: pointer;\r\n  display: flex;\r\n  padding: 2px 5px;\r\n  height: 60px;\r\n  transition: background 200ms linear;\r\n  position: relative;\r\n  width: 100%;\r\n  &:hover{\r\n    background: #ddd;\r\n  }  \r\n  &:hover .btn-user-options{\r\n    display: block;\r\n  }\r\n\r\n  .user-image{\r\n    width: 40px;\r\n    img{\r\n      border-radius: 50%;\r\n      width: 100%;\r\n      max-width: 100%;\r\n    }\r\n  }\r\n\r\n  .user-info{\r\n    margin-left: 10px;\r\n    color: #666;\r\n    width: 70%;\r\n    letter-spacing: 0.6px;\r\n\r\n    p{\r\n     font-size: 12px; \r\n    }\r\n  }\r\n  .messages-not-read{\r\n    position: absolute;\r\n    background:rgba(89, 125, 204, 0.9);\r\n    width: 22px;\r\n    height: 22px;\r\n    max-height: 25px;\r\n    font-size: 14px;\r\n    padding-top: 3px ;\r\n    border-radius: 50%;\r\n    color: #F8f8f8;\r\n    left:25px;\r\n    text-align: center;\r\n    bottom: 1px;\r\n  }\r\n  .last-update{\r\n    position: absolute;\r\n    right: 10px;\r\n    top:6px;\r\n    font-size: 13px;\r\n    color: #777;\r\n    z-index: 8;\r\n  }\r\n  .btn-user-options{\r\n    position: absolute;\r\n    right: 10px;\r\n    bottom: 7px;\r\n    display: none;\r\n    z-index: 14;\r\n    width: 60px;\r\n  \r\n    i{\r\n      margin-left: 15px;\r\n      color: #888;\r\n      border-radius: 50%;\r\n      padding: 6px 12px;\r\n      transition: background 200ms ease-in;\r\n      &:hover{\r\n        background: rgba(0, 0, 0, 0.1);\r\n      }\r\n    }\r\n    .user-options{\r\n      width:160px;\r\n      position: absolute;\r\n      right: 28px;\r\n      background: #EEEEEE;\r\n      border-radius: 4px;\r\n      border: solid 1px #bbb;\r\n      z-index: 15;\r\n    }\r\n    li{\r\n      padding: 8px 5px 8px 10px;\r\n      border-bottom: 1px solid #bbb;\r\n    }\r\n  }\r\n\r\n  .add-chat a{\r\n    display: block;\r\n    text-decoration: none;\r\n    background: #7693D2;\r\n    color: #f8f8f8;\r\n    margin-top: 3px;\r\n    margin-bottom: 3px;\r\n    padding: 3px;\r\n    border-radius: 4px;\r\n    text-align: center;\r\n    width: 150px;\r\n  }\r\n`","import React, { useState } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport api from '../../../config/api'\r\nimport getHours from '../../../config/getHours'\r\nimport { loadingPosts } from '../../../reducers/posts/actionsCreators'\r\nimport { updateStatus } from '../../../reducers/conversations/actionsCreators'\r\nimport { UserConversation } from './styles'\r\n\r\nconst UserChat = ({ userChat, loadingPosts, search, listConversations, lastUpdate, updateStatus, userActive, posts, messagesNotRead, setIsShowConfirm, setDeleteUser, idConversation }) => {\r\n  const [isMenuOptions, setIsMenuOptions] = useState(false)\r\n\r\n  const createConversation = async (userId) => {\r\n    const isCreatedConversation = listConversations.contacts.some(conversation => conversation.user._id === userId)\r\n    if (!isCreatedConversation) {\r\n      const { data } = await api.post('/create/conversation', { userId })\r\n      await loadingPosts({ ...userChat, idConversation: data.idConversation })\r\n      if (userActive.hasOwnProperty('_id')) {\r\n        if (userActive._id === userId) return false\r\n        updateStatus(true)\r\n        return true\r\n      }\r\n    }\r\n  }\r\n\r\n  const handleClickList = async (idConversation) => {\r\n    if (!userActive.hasOwnProperty('_id')) {\r\n      await loadingPosts({ ...userChat, idConversation, messagesNotRead })\r\n      return false\r\n    }\r\n    if (userActive.hasOwnProperty('_id')) {\r\n      if (userActive._id.toString() === userChat._id.toString() && posts[idConversation]) {\r\n        return false\r\n      }\r\n      await loadingPosts({ ...userChat, idConversation, messagesNotRead })\r\n      updateStatus(true)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <UserConversation\r\n      onClick={() => listConversations.contacts.length === 0\r\n        ? createConversation(userChat._id)\r\n        : listConversations.contacts.every(item => item.user._id === userChat._id\r\n          ? handleClickList(item.idConversation)\r\n          : createConversation(userChat._id))}\r\n      search={search}>\r\n      <div className=\"user-image\">\r\n        <img src={userChat.imageProfile ? userChat.imageProfile : 'images/userDefault.png'} alt=\"\" />\r\n      </div>\r\n      <div className=\"user-info\">\r\n        <div className=\"user-name\">\r\n          <h4>{userChat.name.length >= 18 ? userChat.name.substring(0, 18) + '...' : userChat.name}</h4>\r\n          <p>{userChat.username}</p>\r\n          {!search && !!messagesNotRead && <span className='messages-not-read'>\r\n            {messagesNotRead}\r\n          </span>}\r\n        </div>\r\n      </div>\r\n      {!search &&\r\n        <>\r\n          <div className=\"last-update\">\r\n            <span>{getHours(lastUpdate, 'list')}</span>\r\n          </div>\r\n          <div className=\"btn-user-options\"\r\n            onClick={() => setIsMenuOptions(!isMenuOptions)}\r\n            onMouseLeave={() => setIsMenuOptions(false)}>\r\n            <i className=\"fas fa-ellipsis-v\"></i>\r\n            {isMenuOptions && <ul className='user-options'>\r\n              <li onClick={() => {\r\n                setIsShowConfirm(true)\r\n                setDeleteUser({\r\n                  idUser: userChat._id,\r\n                  idConversation\r\n                })\r\n              }}>Excluir contato</li>\r\n            </ul>}\r\n          </div>\r\n        </>\r\n      }\r\n    </UserConversation>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  listConversations: state.listConversations,\r\n  userActive: state.posts.userActive,\r\n  posts: state.posts.posts\r\n})\r\n\r\nexport default connect(mapStateToProps, { loadingPosts, updateStatus })(UserChat)\r\n","import styled from 'styled-components'\r\n\r\nexport const ContainerSearch = styled.div`\r\n  flex: 3;\r\n  display: flex;\r\n  align-items: center;\r\n\r\n  form{\r\n    width: 60%;\r\n    position: relative;\r\n    \r\n    input{\r\n      width: 100%;\r\n      padding: 5px 3px;\r\n      border-top-left-radius: 5px;\r\n      border-bottom-left-radius: 3px;\r\n      border-top-right-radius: 5px;\r\n      border-bottom-right-radius: 3px;\r\n      border: none;\r\n      outline: 0;\r\n    }\r\n    ul{\r\n      box-shadow: 1px 1px 5px #999;\r\n      width: 100%;\r\n      position: absolute;\r\n      z-index: 12;\r\n    }\r\n  }\r\n`","import React, { useState } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport UserChat from '../ListChat/UserChat'\r\nimport { searchUser } from '../../reducers/userInfo/actionsCreators'\r\nimport { ContainerSearch } from './styles'\r\n\r\nconst SearchUser = ({ searchUsers, searchUser }) => {\r\n  const [inputText, setInpuntText] = useState('')\r\n\r\n  const search = (e) => {\r\n    const input = e.target\r\n    searchUser(input.value)\r\n  }\r\n\r\n  return (\r\n    <ContainerSearch>\r\n      <form action=\"\">\r\n        <input type=\"text\"\r\n          placeholder='Pesquisar usuários'\r\n          name='input'\r\n          autoComplete='off'\r\n          onChange={search}\r\n        />\r\n        <ul>\r\n          {searchUsers.map(user => (\r\n            <UserChat\r\n              key={`search:${user._id}`}\r\n              search={true}\r\n              userChat={user}\r\n            />\r\n          ))}\r\n        </ul>\r\n      </form>\r\n    </ContainerSearch>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  searchUsers: state.userInfo.serachUsers\r\n})\r\n\r\nexport default connect(mapStateToProps, { searchUser })(SearchUser)\r\n","import styled from 'styled-components'\r\n\r\nexport const ConatinerInfo = styled.header`\r\n  width:100%;\r\n  background: rgba(89, 125, 204, 0.8);\r\n  height: 70px;\r\n  border-bottom: 1px solid #bbb;\r\n  padding: 5px 10px;\r\n  display: flex;\r\n  border-top-left-radius: 8px;\r\n  border-top-right-radius: 8px;\r\n  justify-content: space-between;\r\n  \r\n  .user-logged > div, .user-conversation{\r\n    display: flex;\r\n    align-items:center;\r\n    color: #f2f2f2;\r\n    position: relative;\r\n    flex: 2;\r\n  }\r\n  .user-conversation{\r\n    flex: 2;\r\n  }\r\n  .user-logged > div{\r\n    justify-content: flex-end;\r\n    height: 100%;\r\n    i {\r\n      margin-right: 15px;\r\n      margin-left: 15px;\r\n    }\r\n  }\r\n  .user-logged{\r\n    position: relative;\r\n  }\r\n  .user-logged > div:hover{\r\n    cursor: pointer;\r\n    background: rgba(89, 125, 204, 0.5);\r\n  }\r\n  .user-img{\r\n    width: 60px;\r\n    img{\r\n      background: white;\r\n      ::selection{\r\n        background: transparent;\r\n      }\r\n      border-radius: 50%;\r\n      max-width:100%;\r\n    }\r\n  }\r\n  .user-img.conversation{\r\n    width: 40px;\r\n    float:right;\r\n  }\r\n  .user-info.logged{\r\n    margin-right: 10px;\r\n  }\r\n  .user-info.conversation{\r\n    margin-left: 10px;\r\n    p{\r\n      font-size: 14px;\r\n    }\r\n    .user-status{\r\n      position: relative;\r\n      margin-left: 4px;\r\n      &::before{\r\n        content: '';\r\n        position: relative;\r\n        top:3px;\r\n        right: 5px;\r\n        display: inline-block;\r\n        width: 15px;\r\n        height: 15px;\r\n        border-radius: 50%;\r\n        background: #4fdb66;\r\n      }\r\n    }\r\n  }\r\n`\r\n\r\nexport const PreviewImage = styled.div`\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 100%;\r\n  background: rgba(0, 0, 0, 0.5);\r\n  top: 0;\r\n  left:0;\r\n  z-index: 15;\r\n\r\n  .close-preview{\r\n    color:white;\r\n    right: 250px;\r\n  }\r\n  .image-content{\r\n    display: flex;\r\n    justify-content: center;\r\n    width: 100%;\r\n    figure{\r\n      margin-top: 50px;\r\n      img{\r\n        display: block;\r\n        width:100%;\r\n        max-width:400px;\r\n      }\r\n    }\r\n  }\r\n  .actions{\r\n    margin: 0 auto;\r\n    align-items: center;\r\n    display: flex;\r\n    max-width: 350px;\r\n    padding-top: 20px;\r\n\r\n    .btn{\r\n      height: 45px;\r\n      text-transform: uppercase;\r\n      font-weight: 600; \r\n      width: 100%;\r\n      border: 1px solid #aaa;\r\n      outline: none;\r\n      cursor: pointer;\r\n\r\n      &:first-child{\r\n        margin-right: 10px;\r\n        background: rgba(89, 125, 204, 0.8);\r\n        color: #f8f8f8;\r\n        &:hover{\r\n          background: rgba(89, 125, 204, 0.6);\r\n        }\r\n      }\r\n    }\r\n  }\r\n`","import React, { useState } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport gethours from '../../config/getHours'\r\nimport UserMenuConfig from './UserConfig'\r\nimport SearchUser from '../SearchUser'\r\nimport { updateImageProfile } from '../../reducers/userInfo/actionsCreators'\r\nimport { ConatinerInfo, PreviewImage } from './styles'\r\n\r\nconst InfoUser = ({ userInfo, userActive, status, updateImageProfile }) => {\r\n  const [isMenuVisible, setIsMenuVisible] = useState(false)\r\n  const [fileImage, setFileImage] = useState(false)\r\n  const renderStatus = () => {\r\n    if (status.hasOwnProperty('_id')) {\r\n      return (\r\n        status.status ?\r\n          <small className='user-status'>\r\n            <b>Online</b>\r\n          </small>\r\n          :\r\n          <small style={{ fontSize: 11 }}>\r\n            <b>Visto por último {gethours(status.updatedAt)}</b>\r\n          </small>\r\n      )\r\n    }\r\n  }\r\n\r\n  const imageProfileUpdate = async () => {\r\n    if (fileImage) {\r\n      const data = new FormData()\r\n      data.append('imageProfile', fileImage)\r\n      updateImageProfile(data)\r\n      closeUpdateImage()\r\n    }\r\n  }\r\n\r\n  const closeUpdateImage = () => {\r\n    setFileImage(null)\r\n    setIsMenuVisible(false)\r\n  }\r\n\r\n  return (\r\n    <ConatinerInfo>\r\n      {fileImage && <PreviewImage>\r\n        <div className=\"close-preview\" onClick={closeUpdateImage}>\r\n          <i className=\"fas fa-times\"></i>\r\n        </div>\r\n        <div className=\"image-content\">\r\n          <figure>\r\n            <img src={window.URL.createObjectURL(fileImage)} alt=\"\" />\r\n          </figure>\r\n        </div>\r\n        <div className=\"actions\">\r\n          <button className='btn' onClick={imageProfileUpdate}>Confirmar</button>\r\n          <button className='btn' onClick={closeUpdateImage}>Cancelar</button>\r\n        </div>\r\n      </PreviewImage>}\r\n\r\n      <div className=\"user-conversation\">\r\n        {userActive.hasOwnProperty('_id') &&\r\n          <>\r\n            <div className=\"user-img conversation\">\r\n              <img src={userActive.imageProfile ? userActive.imageProfile : 'images/userDefault.png'} alt=\"\" />\r\n            </div>\r\n            <div className=\"user-info conversation\">\r\n              {userActive && <h4>{userActive.name}</h4>}\r\n              {userActive && <p>{userActive.username}</p>}\r\n              {renderStatus()}\r\n            </div>\r\n          </>\r\n        }\r\n      </div>\r\n      <SearchUser />\r\n      <div className=\"user-logged\">\r\n        <div onClick={() => setTimeout(() => setIsMenuVisible(!isMenuVisible), 100)}>\r\n          <i className=\"fas fa-sort-down\"></i>\r\n          <div className=\"user-info logged\">\r\n            {userInfo.name && <h3>{userInfo.name}</h3>}\r\n            {userInfo.email && <p>{userInfo.email}</p>}\r\n          </div>\r\n          <div className=\"user-img logged\">\r\n            <img src={userInfo.imageProfile ? userInfo.imageProfile : 'images/userDefault.png'} alt=\"\" />\r\n          </div>\r\n        </div>\r\n        {isMenuVisible &&\r\n          <UserMenuConfig\r\n            setFileImage={setFileImage}\r\n            setIsMenuVisible={setIsMenuVisible} />\r\n        }\r\n      </div>\r\n    </ConatinerInfo>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  userInfo: state.userInfo,\r\n  status: state.listConversations.status,\r\n  userActive: state.posts.userActive\r\n})\r\n\r\nexport default connect(mapStateToProps, { updateImageProfile })(InfoUser)\r\n","import styled from 'styled-components'\r\n\r\nexport const ContainerMessage = styled.div`\r\n  clear: both;\r\n  position: ${props => props.preview ? 'static' : 'relative'};\r\n\r\n .warningMessage{\r\n    text-align: center;\r\n    font-weight: bold;\r\n    font-size: 1em;\r\n    color: #888;\r\n    width: fit-content;\r\n    background: #C6C6D9;\r\n    height: 30px;\r\n    border-bottom: 1px solid #bbb;\r\n    display: block;\r\n    padding: 5px;\r\n    border-radius: 5px;\r\n    margin: 0 auto;\r\n  } \r\n  ${props => props.preview && `\r\n    &:before{\r\n      content: '';\r\n      position:absolute;\r\n      width: 100%;\r\n      height: 100%;\r\n      background: #f1f1f1;\r\n      z-index: 10;\r\n      top:0;\r\n      left: 0;\r\n      border-radius: 6px;\r\n    }      \r\n  `}\r\n\r\n  .content-message{\r\n    width: fit-content;\r\n    min-width:40px;\r\n    max-width: ${props => props.isImg ? '40%' : '60%'};\r\n    background: ${props => props.isIdUserLogged ? 'beige' : '#f8f8f8'};\r\n    margin-bottom: 5px;\r\n    border-radius: 6px;\r\n    padding: 5px 8px;\r\n    z-index: 2;\r\n    float: ${props => props.isIdUserLogged ? 'right' : 'left'};\r\n    display: flex;\r\n    flex-direction: column;\r\n    position: ${props => props.preview ? 'static' : 'relative'};\r\n\r\n    &::after{\r\n      content: '';\r\n      position: absolute;\r\n      border-width: 10px;\r\n      border-color: beige transparent transparent transparent;\r\n      border-style: solid;\r\n      top:0;\r\n      right: -10px;\r\n      ${props => !props.isIdUserLogged && `\r\n        left: -10px;\r\n        right: inherit;\r\n        border-color: #f8f8f8 transparent transparent transparent;\r\n      `}\r\n    }\r\n\r\n    .content-img{\r\n      width: 100%;\r\n      overflow: hidden;\r\n      max-width: 100%;\r\n      max-height: 250px;\r\n    }\r\n    .content-img img{\r\n      width: 210px;\r\n      margin: 0 auto;\r\n      text-align: center;\r\n      display: block;\r\n      transition: transform 300ms ease-in-out;\r\n      ${props => props.preview && `\r\n        position: absolute;\r\n        min-width: 350px;\r\n        max-width: 700px;\r\n        width:100%;\r\n        max-height: 700px;\r\n        z-index: 11;\r\n        transform: translate(-50%, -50%);\r\n        left:50%;\r\n        top: 50%;\r\n      `}\r\n    }\r\n    div{\r\n      .hour{\r\n        position: relative;\r\n        width: 30px;\r\n        font-weight: 600;\r\n        color: #777;\r\n        float: right;\r\n        font-size: 11px;\r\n        right: -7px;\r\n        margin-top: 3px;\r\n      }\r\n    }\r\n  }\r\n`","import React, { useState } from 'react'\r\nimport getHours from '../../../config/getHours'\r\nimport { ContainerMessage } from './styles'\r\n\r\nconst Message = ({ isIdUserLogged, message }) => {\r\n  const [isPreview, setIsPreview] = useState(false)\r\n\r\n  return (\r\n    <>\r\n      {isPreview && <div className=\"close-preview\" onClick={() => setIsPreview(false)}>\r\n        <i className=\"fas fa-times\"></i>\r\n      </div>}\r\n      <ContainerMessage\r\n        // className='message'\r\n        isIdUserLogged={isIdUserLogged}\r\n        data-id-message={message._id}\r\n        data-js={!isIdUserLogged && `viewed:${message.viewed}`}\r\n        isImg={false}\r\n        preview={isPreview}>\r\n        {message &&\r\n          <div className=\"content-message\">\r\n            {message.imagePath && <div className=\"content-img\">\r\n              <img\r\n                onClick={() => setIsPreview(!isPreview)}\r\n                src={message.imagePath}\r\n                alt=\"\" />\r\n            </div>}\r\n            <div>\r\n              <p>{message.message}</p>\r\n              <span className='hour'>\r\n                {getHours(message.createdAt, 'posts')}\r\n              </span>\r\n            </div>\r\n          </div>\r\n        }\r\n      </ContainerMessage>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Message\r\n","import styled from 'styled-components'\r\n\r\nexport const ContainerPosts = styled.main`\r\n  background: #d6d6c5;\r\n  width: 100%;\r\n  height: 100%;\r\n  padding: 5px 15px;\r\n  overflow-y: auto;\r\n  position: relative;\r\n  \r\n  ::-webkit-scrollbar {\r\n    width: 6px;\r\n    background: #F4F4F4;\r\n  }\r\n  ::-webkit-scrollbar-thumb {\r\n    -webkit-border-radius: 5px;\r\n    border-radius: 5px;\r\n    background:rgba(172, 167, 167, 0.8); \r\n  }\r\n`","import React, { useEffect, useState } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport io from 'socket.io-client'\r\nimport socket from '../../../config/socket.io'\r\nimport { newMessage, previousPosts } from '../../../reducers/posts/actionsCreators'\r\nimport Message from '../Message'\r\nimport { ContainerPosts } from './styles'\r\n\r\nlet scroll = {}\r\nlet idsMessages = {}\r\nlet page = 0\r\nconst Posts = ({ posts, userInfo, idConversation, containerChatRef, positionLine, messagesNotRead, pageActual, nextPage, previousPosts, totalPages }) => {\r\n  const [loadingMessages, setLoadingMessages] = useState(false)\r\n  const [isMessagesNotRead, setMessageWarning] = useState(false)\r\n\r\n  // let socketnewMessage = io('http://localhost:3333')\r\n  let socketnewMessage = io('https://api-chat-back.herokuapp.com')\r\n  useEffect(() => {\r\n    if (!messagesNotRead) {\r\n      containerChatRef.current.scrollTop = containerChatRef.current.scrollHeight\r\n    } else {\r\n      let warningMessage = document.createElement('span')\r\n      warningMessage.textContent = 'Mensagen(s) não visualizada(s)'\r\n      warningMessage.classList.add('warningMessage')\r\n      const messages = document.querySelectorAll('[data-js=\"viewed:false\"]')[0]\r\n      let positionMessage = messages.getBoundingClientRect().top\r\n      containerChatRef.current.scrollTop = (positionMessage - positionLine) + 100\r\n      messages.insertAdjacentElement('afterbegin', warningMessage)\r\n    }\r\n    // if (scroll[idConversation]) {\r\n    //   containerChatRef.current.scrollTop = scroll[idConversation]\r\n    // }\r\n    socketnewMessage.on('newMessage', () => {\r\n      if (containerChatRef.current.scrollHeight - containerChatRef.current.scrollTop - 100 < 600) {\r\n        containerChatRef.current.scrollTop = containerChatRef.current.scrollHeight\r\n      }\r\n    })\r\n    initialConversation()\r\n  }, [idConversation])\r\n\r\n  const initialConversation = () => {\r\n    if (containerChatRef.current.scrollHeight === containerChatRef.current.clientHeight) {\r\n      const messages = document.querySelectorAll('[data-js=\"viewed:false\"]')\r\n      if (messages) {\r\n        Object.keys(idsMessages).forEach(id => {\r\n          messages.forEach(async message => {\r\n            if (message.getBoundingClientRect().top < positionLine) {\r\n              socket.emit('registerMessageViewed', id)\r\n            }\r\n          })\r\n        })\r\n        idsMessages = {}\r\n      }\r\n    }\r\n  }\r\n  const registerIdsMessages = (message) => {\r\n    if (message.idUser.toString() !== userInfo._id && !message.viewed) {\r\n      idsMessages = {\r\n        ...idsMessages,\r\n        [message._id]: message._id\r\n      }\r\n    }\r\n  }\r\n\r\n  const postsPrevious = async (e) => {\r\n    if (e.currentTarget.scrollTop < 200) {\r\n      if (pageActual < totalPages && page !== pageActual) {\r\n        page = pageActual\r\n        await previousPosts(idConversation, nextPage)\r\n        return\r\n      }\r\n    }\r\n  }\r\n\r\n  const messagesViewed = async (e) => {\r\n    scroll = {\r\n      ...scroll,\r\n      [idConversation]: e.currentTarget.scrollTop\r\n    }\r\n    if (Object.keys(idsMessages).length > 0) {\r\n      const messages = document.querySelectorAll('[data-js=\"viewed:false\"]')\r\n      messages.forEach(message => {\r\n        if (idsMessages[message.getAttribute('data-id-message')]) {\r\n          let id = idsMessages[message.getAttribute('data-id-message')]\r\n          if (message.getBoundingClientRect().top < positionLine) {\r\n            let { [id]: key, ...tail } = idsMessages\r\n            idsMessages = {\r\n              ...tail\r\n            }\r\n            socket.emit('registerMessageViewed', id)\r\n          }\r\n        }\r\n      })\r\n    }\r\n    await postsPrevious(e)\r\n  }\r\n\r\n  return (\r\n    <ContainerPosts ref={containerChatRef} onScroll={messagesViewed}>\r\n      {posts[idConversation].map(message => {\r\n        registerIdsMessages(message)\r\n        return (\r\n          <Message\r\n            key={message._id}\r\n            isIdUserLogged={message.idUser.toString() === userInfo._id}\r\n            message={message}\r\n          />\r\n        )\r\n      })}\r\n    </ContainerPosts>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  userInfo: state.userInfo,\r\n  posts: state.posts.posts,\r\n  pageActual: state.posts.page,\r\n  totalPages: state.posts.totalPages,\r\n  nextPage: state.posts.nextPage,\r\n  messagesNotRead: state.posts.userActive.messagesNotRead\r\n})\r\n\r\nexport default connect(mapStateToProps, { newMessage, previousPosts })(Posts)\r\n","import styled from 'styled-components'\r\n\r\nexport const ContainerSend = styled.div`\r\n  background: #ddd;\r\n  padding: 5px 15px;\r\n  width: 100%;\r\n  height: 90px;\r\n  display: flex;\r\n  padding-bottom:15px;\r\n  flex-wrap:wrap;\r\n  align-items: center;\r\n  position: relative;\r\n\r\n  .message-content{\r\n    textarea{\r\n      max-width: 400px;\r\n      resize: none;\r\n      overflow-x: hidden;\r\n      padding-left:12px;\r\n      padding-top:10px;\r\n      border-radius: 50px;\r\n      border: solid 1px #bbb;\r\n      outline:0;\r\n    }\r\n  }\r\n  .icons i{\r\n    font-size: 28px;\r\n    color: #3bb6e7;\r\n    margin-left: 10px;\r\n    cursor: pointer;\r\n  }\r\n  .icons .fa-laugh{\r\n    color: #999;\r\n  }\r\n  .btn-send{\r\n    margin-left: 8px;\r\n    a{\r\n      border-radius: 20px;\r\n      text-decoration:none;\r\n      background: #aaa;\r\n      color: #f8f8f8;\r\n      font-size: 18px;\r\n      padding: 10px 40px;\r\n      display: block;\r\n      letter-spacing: 0.8px;\r\n      font-weight: 600;\r\n    }\r\n  }\r\n`\r\n\r\nexport const PreviewImg = styled.figure`\r\n  position: absolute;\r\n  max-width: 100%;\r\n  width: 100%;\r\n  padding: 15px 0;\r\n  left: 0;\r\n  background: #eee;\r\n  bottom: 100%;\r\n  z-index: 10;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  flex-direction: column;\r\n\r\n  .header{\r\n    .close{\r\n      position: absolute;\r\n      right: 50px;\r\n      top: 10px;\r\n      font-size: 28px;\r\n      cursor: pointer;\r\n      color: #444;\r\n    }\r\n\r\n    .image-name{\r\n      margin-bottom: 20px;\r\n      font-weight: 600;\r\n    }\r\n  }\r\n\r\n  .img-content{\r\n    max-width: 45%;\r\n    max-height: 380px;\r\n    img{\r\n      max-width: 80%;\r\n      max-height: 380px;\r\n      width: 100%;\r\n    }\r\n  }\r\n`","import React, { useState } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Picker } from 'emoji-mart'\r\nimport { loadingConversations } from '../../../reducers/conversations/actionsCreators'\r\nimport 'emoji-mart/css/emoji-mart.css'\r\nimport api from '../../../config/api'\r\nimport { ContainerSend, PreviewImg } from './styles'\r\n\r\nconst SendMessage = ({ userActive, loadingConversations, containerChatRef }) => {\r\n  const [messageText, setMessageText] = useState('')\r\n  const [showEmoji, setShowEmoji] = useState(false)\r\n  const [fileImg, setFileImg] = useState(null)\r\n\r\n  const sendMessage = async (e) => {\r\n    e.preventDefault()\r\n    if (messageText || fileImg) {\r\n      const data = new FormData()\r\n      data.append('userId', userActive._id)\r\n      data.append('message', messageText)\r\n      data.append('image', fileImg ? fileImg : '')\r\n      await api.post('conversation/message', data)\r\n      if (containerChatRef.current) {\r\n        containerChatRef.current.scrollTop = containerChatRef.current.scrollHeight\r\n      }\r\n      setMessageText('')\r\n      setFileImg(null)\r\n    }\r\n  }\r\n\r\n  const addEmoji = (e) => {\r\n    let emoji = e.native;\r\n    setMessageText(messageText + emoji)\r\n  }\r\n\r\n  return (\r\n    <ContainerSend>\r\n      {fileImg && <PreviewImg>\r\n        <div className=\"header\">\r\n          <div className=\"image-name\">\r\n            <p>{fileImg.name}</p>\r\n          </div>\r\n          <div className=\"close\" onClick={() => setFileImg(null)}>\r\n            <i className=\"fas fa-times\"></i>\r\n          </div>\r\n        </div>\r\n        <div className=\"img-content\">\r\n          <img src={URL.createObjectURL(fileImg)} alt=\"\" />\r\n        </div>\r\n      </PreviewImg>}\r\n      <div className=\"message-content\">\r\n        {showEmoji && <Picker\r\n          onSelect={addEmoji}\r\n          set={'google'}\r\n          style={{ position: 'absolute', bottom: '80px', left: 0, zIndex: 20 }}\r\n        />}\r\n        <textarea\r\n          cols=\"50\"\r\n          rows=\"2\"\r\n          placeholder='Escreva uma mensagem'\r\n          value={messageText}\r\n          onChange={({ target }) => setMessageText(target.value)}\r\n        />\r\n      </div>\r\n      <input type=\"file\" name=\"\" id=\"#file\" hidden onChange={({ target: { files } }) => setFileImg(files[0])} />\r\n\r\n      <div className=\"icons\">\r\n        <i className=\"far fa-laugh\" onClick={() => setShowEmoji(!showEmoji)} />\r\n        <label htmlFor=\"#file\">\r\n          <i className=\"fas fa-image\" />\r\n        </label>\r\n      </div>\r\n      <div className=\"btn-send\">\r\n        <a href=\"/\" onClick={sendMessage}>Enviar</a>\r\n      </div>\r\n    </ContainerSend>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  userActive: state.posts.userActive,\r\n  listConversations: state.listConversations\r\n})\r\n\r\nexport default connect(mapStateToProps, { loadingConversations })(SendMessage)\r\n","import styled from 'styled-components'\r\n\r\nexport const ContainerChat = styled.div`\r\n  flex: 1 1 70%;\r\n  height: 90%;\r\n  display:flex;\r\n  flex-direction: column;\r\n  position: relative;\r\n  background-image: url('images/speech-bubble.svg');\r\n  background-repeat: no-repeat;\r\n  background-position-x: 70px;\r\n`\r\n\r\nexport const MessageViewed = styled.div`\r\n  max-width: 1060px;\r\n  height: 30px;\r\n  width: 100%;\r\n  position: absolute;\r\n  bottom:90px;\r\n  overflow: unset\r\n`","import React, { useEffect, useRef, useState } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport io from 'socket.io-client'\r\nimport Posts from './Posts'\r\nimport { newMessage, updateMessageRead } from '../../reducers/posts/actionsCreators'\r\nimport { loadingConversations } from '../../reducers/conversations/actionsCreators'\r\nimport SendMessage from './SendMessage'\r\nimport { ContainerChat, MessageViewed } from './styles'\r\nimport socketMessageRead from '../../config/socket.io'\r\nlet positionLine\r\nconst Chat = ({ userActive, newMessage, loadingConversations, updateMessageRead }) => {\r\n  const containerChatRef = useRef()\r\n  const lineRef = useRef()\r\n\r\n  useEffect(() => {\r\n    positionLine = lineRef.current.getBoundingClientRect().top\r\n    // const socket = io('http://localhost:3333')\r\n    const socket = io('https://api-chat-back.herokuapp.com')\r\n    socket.on('newMessage', message => {\r\n      newMessage(message)\r\n      loadingConversations()\r\n    })\r\n    socketMessageRead.on('messageRead', message => {\r\n      updateMessageRead(message)\r\n    })\r\n  }, [])\r\n\r\n  return (\r\n    <ContainerChat>\r\n      {userActive.hasOwnProperty('_id') &&\r\n        <Posts\r\n          positionLine={positionLine}\r\n          idConversation={userActive.idConversation}\r\n          containerChatRef={containerChatRef}\r\n        />\r\n      }\r\n      <MessageViewed ref={lineRef} />\r\n      {userActive.hasOwnProperty('_id') &&\r\n        <SendMessage containerChatRef={containerChatRef}\r\n        />\r\n      }\r\n    </ContainerChat>\r\n  )\r\n}\r\nconst mapStateToProps = state => ({\r\n  userActive: state.posts.userActive\r\n})\r\nexport default connect(mapStateToProps, { newMessage, loadingConversations, updateMessageRead })(Chat)\r\n","import styled from 'styled-components'\r\n\r\nexport const Container = styled.div`\r\n  position: absolute;\r\n  height: 120px;\r\n  width: 100%;\r\n  background: rgba(0, 0, 0, 0.5);\r\n  z-index: 6;\r\n  top: 50%;\r\n  transform: translateY(-50%);\r\n  color: #eee;\r\n\r\n  .close-modal{\r\n    position: absolute;\r\n    right: 10%;\r\n    top: 10px;\r\n    font-size: 26px;\r\n  }\r\n  .confirm-content{\r\n    padding-top:10px;\r\n    text-align:center;\r\n\r\n    h3{\r\n      letter-spacing: 0.7px;\r\n      margin-left: 5px;\r\n    }\r\n    i{\r\n      color: #eaf73b;\r\n      font-size: 26px;\r\n      margin-right: 10px;\r\n    }\r\n  }\r\n\r\n  .btn-actions{\r\n    margin-top: 20px;\r\n\r\n    .btn{\r\n      max-width: 160px;\r\n      width: 100%;\r\n      height: 30px;\r\n      text-transform: uppercase;\r\n      font-weight: 600;\r\n      border: 1px solid #aaa;\r\n      outline: 0;\r\n      cursor: pointer;\r\n      &:hover{\r\n        background: rgba(255, 255, 255, 0.6)\r\n      }\r\n    }\r\n    .btn.ok{\r\n      margin-left: 10px;\r\n      background: #7693D2;\r\n      color: #f8f8f8;\r\n      &:hover{\r\n        background: rgba(118, 147, 210, 0.8);\r\n      }\r\n    }\r\n  }\r\n`","import React from 'react'\r\nimport { Container } from './styles'\r\n\r\nconst Confirm = ({ setIsShowConfirm, deleteConversation }) => {\r\n  return (\r\n    <Container>\r\n      <div className=\"close-modal\" onClick={() => setIsShowConfirm(false)}>\r\n        <i className=\"fas fa-times\"></i>\r\n      </div>\r\n      <div className=\"confirm-content\">\r\n        <h4>\r\n          <i className=\"fas fa-exclamation-triangle\"></i>\r\n          Deseja realmente excluir o contato? Todas as mensagens serão apagadas. <br />Deseja realmente continuar?\r\n        </h4>\r\n        <div className=\"btn-actions\">\r\n          <button className='btn cancel' onClick={() => setIsShowConfirm(false)}>\r\n            Cancelar\r\n          </button>\r\n          <button className='btn ok' onClick={() => deleteConversation()}>\r\n            Excluir\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </Container>\r\n  )\r\n}\r\n\r\nexport default Confirm\r\n","import styled from 'styled-components'\r\n\r\nexport const ContainerList = styled.div`\r\n  flex: 1 1 25%;\r\n  background: #ffffef;\r\n  height: 90%;\r\n  overflow-y: auto;\r\n  border-left: solid 1px #bbb;\r\n  z-index: 5;\r\n`","import React, { useState } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport UserChat from './UserChat'\r\nimport Confirm from '../Confirm'\r\nimport { cleanPosts } from '../../reducers/posts/actionsCreators'\r\nimport { loadingConversations } from '../../reducers/conversations/actionsCreators'\r\nimport { ContainerList } from './styles'\r\n\r\nconst ListChat = ({ listConversations, cleanPosts, loadingConversations }) => {\r\n  const [isShowConfirm, setIsShowConfirm] = useState(false)\r\n  const [deleteUser, setDeleteUser] = useState({})\r\n\r\n  const deleteConversation = async () => {\r\n    await cleanPosts(deleteUser)\r\n    loadingConversations()\r\n    setIsShowConfirm(false)\r\n  }\r\n  return (\r\n    <>\r\n      {isShowConfirm && <Confirm\r\n        deleteConversation={deleteConversation}\r\n        setIsShowConfirm={setIsShowConfirm} />\r\n      }\r\n      <ContainerList>\r\n        <ul className=\"list-conversas\">\r\n          {listConversations.contacts.map(conversation => (\r\n            <UserChat\r\n              key={conversation.user._id}\r\n              userChat={conversation.user}\r\n              lastUpdate={conversation.updatedAt}\r\n              idConversation={conversation.idConversation}\r\n              messagesNotRead={conversation.messagesNotRead}\r\n              setDeleteUser={setDeleteUser}\r\n              setIsShowConfirm={setIsShowConfirm}\r\n            />\r\n          ))}\r\n        </ul>\r\n      </ContainerList>\r\n\r\n    </>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  listConversations: state.listConversations\r\n})\r\n\r\nexport default connect(mapStateToProps, { cleanPosts, loadingConversations })(ListChat)\r\n","import styled from 'styled-components'\r\n\r\nexport const FormContainer = styled.form`\r\n  text-align: center;\r\n  width: 100%;\r\n  max-width: 350px;\r\n  margin: 0 auto;\r\n\r\n  .error{\r\n    color: red;\r\n    display: block;\r\n    margin-bottom: 10px;\r\n  }\r\n  .group-input{\r\n    margin-bottom: 15px;\r\n    position: relative;\r\n\r\n    &:before{\r\n      content: '*';\r\n      color: red;\r\n      position: absolute;\r\n      display: block;\r\n      left: -10px;\r\n    }\r\n  }\r\n  input{\r\n    width: 100%;\r\n    max-width: 350px;\r\n    padding: 8px 5px;\r\n  }\r\n  .btn-actions{\r\n    margin: 0 auto;\r\n    align-items: center;\r\n    display: flex;\r\n    max-width: 350px;\r\n    \r\n    .fa-arrow-left{\r\n      margin-right: 5px;\r\n    }\r\n  }\r\n  .btn{\r\n    height: 45px;\r\n    text-transform: uppercase;\r\n    font-weight: 600; \r\n    width: 100%;\r\n    border: 1px solid #aaa;\r\n    outline: none;\r\n    cursor: pointer;\r\n\r\n  }\r\n  .sign-in{\r\n    background: rgba(89, 125, 204, 0.8);\r\n    color: #f8f8f8;\r\n    &:hover{\r\n      background: rgba(89, 125, 204, 0.6);\r\n    }\r\n  }\r\n  .sign-up{\r\n    &:hover{\r\n      background: rgba(0, 0, 0, 0.1);\r\n      color: #444;\r\n    }\r\n  }\r\n\r\n`","import React from 'react'\r\nimport { FormContainer } from './styles'\r\n\r\nconst Form = ({ submit, signUp, setIsSignIn, messageError }) => {\r\n  return (\r\n    <FormContainer onSubmit={submit}>\r\n      <span className='error'>{messageError}</span>\r\n      {signUp && <div className=\"group-input\">\r\n        <input type=\"text\" name='name' placeholder='Digite seu nome completo' />\r\n      </div>}\r\n      <div className=\"group-input\">\r\n        <input type=\"email\" name='email' placeholder='Digite seu email' />\r\n      </div>\r\n      <div className=\"group-input\">\r\n        <input type=\"password\" name='password' placeholder='Digite sua senha' />\r\n      </div>\r\n      {signUp && <div className=\"group-input\">\r\n        <input type=\"password\" name='confirmPassword' placeholder='Confirme sua senha' />\r\n      </div>}\r\n      <div className=\"btn-actions\">\r\n        <button\r\n          onClick={() => signUp ? setIsSignIn(true) : setIsSignIn(false)}\r\n          className='btn sign-up'\r\n          type='button'>\r\n          {signUp\r\n            ? <span><i className=\"fas fa-arrow-left\" />Voltar</span>\r\n            : 'Cadastre-se'}\r\n        </button>\r\n        <button className='btn sign-in'>{signUp ? 'Cadastre-se' : 'Login'}</button>\r\n      </div>\r\n    </FormContainer>\r\n  )\r\n}\r\n\r\nexport default Form\r\n","import React, { useEffect } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { loginUser } from '../../../reducers/userInfo/actionsCreators'\r\nimport Form from '../../Form'\r\n\r\nconst SignIn = ({ loginUser, setIsSignIn, messageError, setMessageError }) => {\r\n  useEffect(() => {\r\n    setMessageError('')\r\n  }, [])\r\n\r\n  const login = async (e) => {\r\n    e.preventDefault()\r\n    const { email, password } = e.target\r\n    if (!email.value || !password.value) {\r\n      setMessageError('Preencha os campos corretamente!')\r\n      return false\r\n    }\r\n\r\n    await loginUser(email.value, password.value)\r\n    window.location.reload()\r\n  }\r\n  return (\r\n    <Form submit={login} setIsSignIn={setIsSignIn} messageError={messageError} />\r\n  )\r\n}\r\n\r\nexport default connect(null, { loginUser })(SignIn)\r\n","import React, { useEffect } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport api from '../../../config/api'\r\nimport { loginUser } from '../../../reducers/userInfo/actionsCreators'\r\nimport Form from '../../Form'\r\n\r\nconst SignUp = ({ setIsSignIn, messageError, setMessageError, loginUser }) => {\r\n  useEffect(() => {\r\n    setMessageError('')\r\n  }, [])\r\n  const register = async (e) => {\r\n    e.preventDefault()\r\n    const { name, email, password, confirmPassword } = e.target\r\n    if (!name.value || !email.value || !password.value || !confirmPassword.value) {\r\n      setMessageError('Todos os campos são obrigatórios!')\r\n      return false\r\n    }\r\n\r\n    if (password.value !== confirmPassword.value) {\r\n      setMessageError('Senhas diferentes!')\r\n      return false\r\n    }\r\n    try {\r\n      await api.post('auth/register', {\r\n        name: name.value,\r\n        email: email.value,\r\n        password: password.value\r\n      })\r\n      await loginUser(email.value, password.value)\r\n      window.location.reload()\r\n    } catch (error) {\r\n      setMessageError('Ocorreu um erro ao tentar se cadastrar!')\r\n    }\r\n\r\n  }\r\n  return (\r\n    <Form submit={register} setIsSignIn={setIsSignIn} signUp={true} messageError={messageError} />\r\n  )\r\n}\r\n\r\nexport default connect(null, { loginUser })(SignUp)\r\n","import styled from 'styled-components'\r\n\r\nexport const Container = styled.section`\r\n  background: #ddd;\r\n  height: 100%;\r\n  width: 100%;\r\n\r\n  header{\r\n    text-align:center;\r\n\r\n    .logo{\r\n      font-size: 7.5em;\r\n      color: rgba(89, 125, 204, 0.8);\r\n      p{\r\n        font-size: 20px;\r\n      }\r\n    }\r\n    .login{\r\n      color: #444;\r\n      font-style: italic;\r\n      font-size: 1.4em;\r\n    }\r\n  }\r\n`","import React, { useState } from 'react'\r\nimport SignIn from './SignIn'\r\nimport SignUp from './SignUp'\r\nimport { Container } from './styles'\r\nconst Auth = () => {\r\n  const [isSignIn, setIsSignIn] = useState(true)\r\n  const [messageError, setMessageError] = useState('')\r\n  return (\r\n    <Container>\r\n      <header>\r\n        <div className=\"logo\">\r\n          <i className=\"fas fa-comments\"></i>\r\n          <p>Chat</p>\r\n        </div>\r\n        <div className=\"login\">\r\n          <h1>{isSignIn ? 'Login' : 'Cadastro'}</h1>\r\n        </div>\r\n      </header>\r\n      {isSignIn\r\n        ? <SignIn\r\n          setIsSignIn={setIsSignIn}\r\n          messageError={messageError}\r\n          setMessageError={setMessageError} />\r\n        : <SignUp\r\n          setIsSignIn={setIsSignIn}\r\n          messageError={messageError}\r\n          setMessageError={setMessageError} />}\r\n    </Container>\r\n  )\r\n}\r\n\r\nexport default Auth\r\n","import styled from 'styled-components'\r\n\r\nexport const ContainerChat = styled.div`\r\n  max-width: 1060px;\r\n  width: 100%;\r\n  height: 78vh;\r\n  border: 1px solid #bbb;\r\n  margin: 40px auto;\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  border-radius: 8px;\r\n  overflow: hidden;\r\n  position: relative;\r\n\r\n  @media (max-height:670px){\r\n    height: 85vh\r\n  }\r\n`","import React, { useEffect, useState } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { updateStatus } from '../../reducers/conversations/actionsCreators'\r\nimport { loginUser, getInfoUserLogged } from '../../reducers/userInfo/actionsCreators'\r\nimport { loadingConversations } from '../../reducers/conversations/actionsCreators'\r\nimport InfoUser from '../../components/InfoUser'\r\nimport Posts from '../../components/Chat'\r\nimport ListChat from '../../components/ListChat'\r\nimport Auth from '../../components/Auth'\r\nimport { ContainerChat } from './styles'\r\nimport socket from '../../config/socket.io'\r\nlet timer\r\n\r\nconst Chat = ({ userInfo, loadingConversations, loginUser, userActive, updateStatus, getInfoUserLogged }) => {\r\n  const [isLogged, setIsLogged] = useState(null)\r\n  const [isInitialStatusUpdate, setIsInitialStatusUpdate] = useState(false)\r\n\r\n  useEffect(() => {\r\n    const getUserInfo = async () => {\r\n      const token = JSON.parse(localStorage.getItem('@chat@'))\r\n      if (token) {\r\n        setIsLogged(true)\r\n        getInfoUserLogged()\r\n        loadingConversations()\r\n      } else {\r\n        setIsLogged(false)\r\n      }\r\n    }\r\n    getUserInfo()\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    if (userActive.hasOwnProperty('_id')) {\r\n      clearInterval(timer)\r\n      timer = setInterval(() => {\r\n        socket.emit('verifyStatus', userActive._id)\r\n      }, 3000)\r\n    }\r\n  }, [userActive])\r\n\r\n  useEffect(() => {\r\n    if (!isInitialStatusUpdate) {\r\n      updateStatus()\r\n      setIsInitialStatusUpdate(true)\r\n    }\r\n  }, [userActive])\r\n\r\n  window.addEventListener('beforeunload', function () {\r\n    socket.emit('off', userInfo.user._id)\r\n    return ''\r\n  })\r\n\r\n  return (\r\n    <ContainerChat>\r\n      {isLogged === false && <Auth />}\r\n\r\n      {isLogged && <>\r\n        {/* info user and search users */}\r\n        <InfoUser socket={socket} />\r\n        {/* Component message */}\r\n        <Posts />\r\n        {/* Component list users */}\r\n        <ListChat />\r\n      </>}\r\n    </ContainerChat>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  userInfo: state.userInfo,\r\n  userActive: state.posts.userActive\r\n})\r\n\r\nexport default connect(mapStateToProps, { updateStatus, loadingConversations, loginUser, getInfoUserLogged })(Chat)\r\n","import React from 'react';\nimport Chat from './pages/Chat'\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Chat />\n    </div>\n  );\n}\n\nexport default App\n","import { LOGIN_USER, SEARCH_USER, UPDATE_IMAGE_PROFILE } from './actionsCreators'\r\n\r\nconst initialState = {\r\n  serachUsers: []\r\n}\r\n\r\nconst userInfo = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case LOGIN_USER:\r\n      return {\r\n        ...state,\r\n        ...action.payload\r\n      }\r\n    case SEARCH_USER:\r\n      return {\r\n        ...state,\r\n        serachUsers: action.payload\r\n      }\r\n    case UPDATE_IMAGE_PROFILE:\r\n      return {\r\n        ...state,\r\n        imageProfile: action.payload\r\n      }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport default userInfo","import { LOADING_POSTS, NEW_MESSAGE, CLEAN_POSTS_USER, MESSAGE_READ, PREVIOUS_POSTS } from './actionsCreators'\r\n\r\nconst initialState = {\r\n  posts: {},\r\n  userActive: {}\r\n}\r\n\r\nconst loadingPosts = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case LOADING_POSTS: {\r\n      const { userActive, posts } = action.payload\r\n      return {\r\n        ...state,\r\n        ...posts,\r\n        posts: {\r\n          ...state.posts,\r\n          [posts.idConversation]: posts.posts\r\n        },\r\n        userActive: userActive\r\n      }\r\n    }\r\n    case PREVIOUS_POSTS: {\r\n      const { posts } = action.payload\r\n      return {\r\n        ...state,\r\n        ...action.payload.posts,\r\n        posts: {\r\n          ...state.posts,\r\n          [posts.idConversation]: [...posts.posts, ...state.posts[posts.idConversation]]\r\n        },\r\n      }\r\n    }\r\n    case NEW_MESSAGE: {\r\n      const { conversation } = action.payload\r\n      return {\r\n        ...state,\r\n        posts: {\r\n          ...state.posts,\r\n          [conversation]: state.posts[conversation]\r\n            ? state.posts[conversation].concat(action.payload)\r\n            : [action.payload]\r\n        }\r\n      }\r\n    }\r\n    case CLEAN_POSTS_USER: {\r\n      const { [action.payload]: id, ...tall } = state.posts\r\n      return {\r\n        posts: {\r\n          ...tall\r\n        },\r\n        userActive: {}\r\n      }\r\n    }\r\n    case MESSAGE_READ: {\r\n      const { _id, conversation } = action.payload\r\n      return {\r\n        ...state,\r\n        posts: {\r\n          ...state.posts,\r\n          [conversation]: state.posts[conversation].map(message => message._id === _id\r\n            ? { ...action.payload }\r\n            : message)\r\n        }\r\n      }\r\n    }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport default loadingPosts","import { LOADING_CONVERSATIONS, STATUS, UPDATE_MESSAGES_NOT_READ } from './actionsCreators'\r\n\r\nconst initialState = {\r\n  contacts: [],\r\n  status: {}\r\n}\r\nconst conversations = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case LOADING_CONVERSATIONS:\r\n      return {\r\n        ...state,\r\n        contacts: action.payload\r\n      }\r\n    case STATUS:\r\n      return {\r\n        ...state,\r\n        status: action.payload\r\n      }\r\n    case UPDATE_MESSAGES_NOT_READ:\r\n      return {\r\n        ...state,\r\n        contacts: state.contacts.map(contact => contact.idConversation === action.payload.idConversation\r\n          ? { ...contact, messagesNotRead: action.payload.numberMessages }\r\n          : contact)\r\n      }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport default conversations","import { compose, createStore, applyMiddleware } from 'redux'\r\nimport thunk from 'redux-thunk'\r\nimport reducers from '../reducers'\r\n\r\nconst logger = () => {\r\n  return window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()\r\n}\r\nlet compo\r\nif (logger()) {\r\n  compo = compose(applyMiddleware(thunk), logger())\r\n} else {\r\n  compo = compose(applyMiddleware(thunk))\r\n}\r\n\r\nexport default createStore(reducers, {}, compo)","import { combineReducers } from 'redux'\r\nimport userInfo from './userInfo'\r\nimport posts from './posts'\r\nimport listConversations from './conversations'\r\n\r\nexport default combineReducers({\r\n  userInfo,\r\n  posts,\r\n  listConversations\r\n})","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux'\nimport App from './App';\nimport './index.css';\nimport store from './store'\nimport 'normalize.css'\n// import * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n// serviceWorker.unregister();\n"],"sourceRoot":""}