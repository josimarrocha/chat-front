(window["webpackJsonpfront-end"]=window["webpackJsonpfront-end"]||[]).push([[0],{117:function(e,n){},144:function(e,n,t){},146:function(e,n,t){"use strict";t.r(n);var r,a=t(0),o=t.n(a),i=t(24),s=t.n(i),c=t(7),u=t(2),l=t.n(u),p=t(3),d=t(6),f=t(36),m=t.n(f),g=t(14),b=t.n(g),v="https://api-chat-back.herokuapp.com/",h=b()(v),x=JSON.parse(localStorage.getItem("@chat@")),w=x?m.a.create({baseURL:v,headers:{Authorization:"Bearer ".concat(x.hasOwnProperty("token")?x.token:"")}}):m.a.create({baseURL:v}),E="convertation:USER_STATUS",O=function(){return function(){var e=Object(p.a)(l.a.mark((function e(n){var t,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.get("/conversations");case 2:t=e.sent,r=t.data,n({type:"conversations:LOADING_CONVERSATIONS",payload:r});case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},y=function(e){return function(n){e?n({type:E,payload:{}}):h.on("status",(function(e){n({type:E,payload:e})}))}},j=b()(v),k=function(e,n){return function(){var t=Object(p.a)(l.a.mark((function t(r){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={data:""},t.next=3,w.post("/auth/sign-in",{email:e,password:n});case 3:a=t.sent,localStorage.setItem("@chat@",JSON.stringify({token:a.data.token})),r({type:"user:LOGIN_USER",payload:a.data});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},S=function(e,n){var t=new Date(e).getHours(),r=new Date(e).getMinutes();r=r<10?"0".concat(r):r,t=t<10?"0".concat(t):t;var a=new Date(e).getDate(),o=new Date(e).getMonth(),i=new Date(e).getFullYear();return"posts"===n?"".concat(t,":").concat(r):a===(new Date).getDate()?"".concat(t,":").concat(r):(new Date).getDate()-a>1||(new Date).getMonth()+1>o+1?"".concat(a<10?"0".concat(a):a,"/").concat(o<10?"".concat(o+1):o,"/").concat(i):(new Date).getDate()-a===1&&"list"===n?"Ontem":"Ontem ".concat(t,":").concat(r)},N=t(4),P=t(5);function C(){var e=Object(N.a)(["\n  width: 170px;\n  background: #f1f1f1;\n  position: absolute;\n  top: 60px;\n  left: 0px;\n  border: solid 1px #bbb;\n  color: #666;\n  list-style-type: none;\n  z-index: 14;\n  li{\n    font-size: 15px;\n    font-weight: 600;\n    text-align: center;\n    height: 30px;\n    border-bottom: 1px solid #bbb;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    cursor: pointer;\n\n    label{\n      width: 100%;\n      display: inline-block;\n      padding-top: 5px;\n      height: 100%;\n      cursor: pointer;\n    }\n\n    &:hover{\n      background: #ddd;\n    }\n  }\n"]);return C=function(){return e},e}var I=P.a.ul(C()),_=function(e){var n=e.setFileImage,t=e.setShowInpurtUpdateName,r=Object(a.useRef)();Object(a.useEffect)((function(){r.current.focus()}),[]);return o.a.createElement(o.a.Fragment,null,o.a.createElement(I,{ref:r},o.a.createElement("li",{onClick:function(){return t(!0)}},"Alterar nome do perfil"),o.a.createElement("li",null,o.a.createElement("input",{type:"file",id:"#file",hidden:!0,onChange:function(e){var t=e.target.files;return n(t[0])}}),o.a.createElement("label",{htmlFor:"#file"},"Alterar imagem")),o.a.createElement("li",{onClick:function(){localStorage.removeItem("@chat@"),window.location.reload()}},"Logout")))},D=t(10),A=function(e){return function(){var n=Object(p.a)(l.a.mark((function n(t){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t({type:"posts:NEW_MESSAGE",payload:e});case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()};function U(){var e=Object(N.a)(["\n  align-items:center;\n  background: #eee;\n  border-bottom: 1px solid #ddd;\n  cursor: pointer;\n  display: flex;\n  padding: 2px 5px;\n  height: 60px;\n  transition: background 200ms linear;\n  position: relative;\n  width: 100%;\n  &:hover{\n    background: #ddd;\n  }  \n  &:hover .btn-user-options{\n    display: block;\n  }\n\n  .user-image{\n    width: 40px;\n    img{\n      border-radius: 50%;\n      width: 100%;\n      max-width: 100%;\n    }\n  }\n\n  .user-info{\n    margin-left: 10px;\n    color: #666;\n    width: 70%;\n    letter-spacing: 0.6px;\n\n    p{\n     font-size: 12px; \n    }\n  }\n  .messages-not-read{\n    position: absolute;\n    background:rgba(89, 125, 204, 0.9);\n    width: 22px;\n    height: 22px;\n    max-height: 25px;\n    font-size: 14px;\n    padding-top: 3px ;\n    border-radius: 50%;\n    color: #F8f8f8;\n    left:25px;\n    text-align: center;\n    bottom: 1px;\n  }\n  .last-update{\n    position: absolute;\n    right: 10px;\n    top:6px;\n    font-size: 13px;\n    color: #777;\n    z-index: 8;\n  }\n  .btn-user-options{\n    position: absolute;\n    right: 10px;\n    bottom: 7px;\n    display: none;\n    z-index: 14;\n    width: 60px;\n  \n    i{\n      margin-left: 15px;\n      color: #888;\n      border-radius: 50%;\n      padding: 6px 12px;\n      transition: background 200ms ease-in;\n      &:hover{\n        background: rgba(0, 0, 0, 0.1);\n      }\n    }\n    .user-options{\n      width:160px;\n      position: absolute;\n      right: 28px;\n      background: #EEEEEE;\n      border-radius: 4px;\n      border: solid 1px #bbb;\n      z-index: 15;\n    }\n    li{\n      padding: 8px 5px 8px 10px;\n      border-bottom: 1px solid #bbb;\n    }\n  }\n\n  .add-chat a{\n    display: block;\n    text-decoration: none;\n    background: #7693D2;\n    color: #f8f8f8;\n    margin-top: 3px;\n    margin-bottom: 3px;\n    padding: 3px;\n    border-radius: 4px;\n    text-align: center;\n    width: 150px;\n  }\n"]);return U=function(){return e},e}var R=P.a.li(U());function L(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function T(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?L(t,!0).forEach((function(n){Object(D.a)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):L(t).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var M=Object(c.b)((function(e){return{listConversations:e.listConversations,userActive:e.posts.userActive,posts:e.posts.posts}}),{loadingPosts:function(e){return function(){var n=Object(p.a)(l.a.mark((function n(t){var r;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.idConversation){n.next=4;break}return n.next=3,w.get("conversation/messages/".concat(e.idConversation,"/1"));case 3:r=n.sent;case 4:t({type:"posts:LOADING_POSTS",payload:{posts:r?r.data:{messages:[],_id:e.idConversation},userActive:e}});case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},updateStatus:y})((function(e){var n=e.userChat,t=e.loadingPosts,r=e.search,i=e.listConversations,s=e.lastUpdate,c=e.updateStatus,u=e.userActive,f=e.posts,m=e.messagesNotRead,g=e.setIsShowConfirm,b=e.setDeleteUser,v=e.idConversation,h=e.setShowList,x=Object(a.useState)(!1),E=Object(d.a)(x,2),O=E[0],y=E[1],j=function(){var e=Object(p.a)(l.a.mark((function e(r){var a,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("teste"),i.contacts.some((function(e){return e.user._id===r}))){e.next=14;break}return e.next=5,w.post("/create/conversation",{userId:r});case 5:return a=e.sent,o=a.data,e.next=9,t(T({},n,{idConversation:o.idConversation}));case 9:if(!u.hasOwnProperty("_id")){e.next=14;break}if(u._id!==r){e.next=12;break}return e.abrupt("return",!1);case 12:return c(!0),e.abrupt("return",!0);case 14:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),k=function(){var e=Object(p.a)(l.a.mark((function e(r){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u.hasOwnProperty("_id")){e.next=4;break}return e.next=3,t(T({},n,{idConversation:r,messagesNotRead:m}));case 3:return e.abrupt("return",!1);case 4:if(!u.hasOwnProperty("_id")){e.next=10;break}if(u._id.toString()!==n._id.toString()||!f[r]){e.next=7;break}return e.abrupt("return",!1);case 7:return e.next=9,t(T({},n,{idConversation:r,messagesNotRead:m}));case 9:c(!0);case 10:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return o.a.createElement(R,{onClick:function(){0===i.contacts.length?j(n._id):i.contacts.every((function(e){return e.user._id===n._id?k(e.idConversation):j(n._id)})),r&&h(!1)}},o.a.createElement("div",{className:"user-image"},o.a.createElement("img",{src:n.imageProfile?n.imageProfile:"images/userDefault.png",alt:""})),o.a.createElement("div",{className:"user-info"},o.a.createElement("div",{className:"user-name"},o.a.createElement("h4",null,n.name.length>=18?n.name.substring(0,18)+"...":n.name),o.a.createElement("p",null,n.username),!r&&!!m&&o.a.createElement("span",{className:"messages-not-read"},m))),!r&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"last-update"},o.a.createElement("span",null,S(s,"list"))),o.a.createElement("div",{className:"btn-user-options",onClick:function(){return y(!O)},onMouseLeave:function(){return y(!1)}},o.a.createElement("i",{className:"fas fa-ellipsis-v"}),O&&o.a.createElement("ul",{className:"user-options"},o.a.createElement("li",{onClick:function(){g(!0),b({idUser:n._id,idConversation:v})}},"Excluir mensagens")))))}));function z(){var e=Object(N.a)(["\n  flex: 3;\n  display: flex;\n  align-items: center;\n\n  form{\n    width: 60%;\n    position: relative;\n    \n    input{\n      width: 100%;\n      padding: 5px 3px;\n      border-top-left-radius: 5px;\n      border-bottom-left-radius: 3px;\n      border-top-right-radius: 5px;\n      border-bottom-right-radius: 3px;\n      border: none;\n      outline: 0;\n    }\n    ul{\n      box-shadow: 1px 1px 5px #999;\n      width: 100%;\n      position: absolute;\n      z-index: 12;\n    }\n  }\n"]);return z=function(){return e},e}var F=P.a.div(z()),G=Object(c.b)((function(e){return{searchUsers:e.userInfo.serachUsers}}),{searchUser:function(e){return function(){var n=Object(p.a)(l.a.mark((function n(t){var r;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(""===e){n.next=4;break}return n.next=3,w.get("/users/".concat(e));case 3:r=n.sent;case 4:t({type:"user:SEARCH_USER",payload:r?r.data:[]});case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}})((function(e){var n=e.searchUsers,t=e.searchUser,r=Object(a.useState)(!1),i=Object(d.a)(r,2),s=i[0],c=i[1],u=Object(a.useRef)();return o.a.createElement(F,null,o.a.createElement("form",{action:""},o.a.createElement("input",{type:"text",ref:u,onFocus:function(){return c(!0)},onBlur:function(){return u.current.value=""},placeholder:"Pesquisar usu\xe1rios",name:"input",autoComplete:"off",onChange:function(){var e=u.current.value;t(e)}}),s&&o.a.createElement("ul",null,n.map((function(e){return o.a.createElement(M,{key:"search:".concat(e._id),search:!0,userChat:e,setShowList:c})})))))}));function V(){var e=Object(N.a)(["\n  width: 100%;\n  position: absolute;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.6);\n  z-index: 20;\n  top: 0;\n  left: 0;\n  form{\n    max-width: 350px;\n    width: 100%;\n    margin: 250px auto;\n     \n    .form-group input{\n      width: 100%;\n      /* height: 35px; */\n      padding: 5px 5px;\n    }\n\n    .action{\n      \n    }\n  }\n"]);return V=function(){return e},e}function H(){var e=Object(N.a)(["\n    margin: 0 auto;\n    align-items: center;\n    display: flex;\n    max-width: 350px;\n    padding-top: 20px;\n\n    .btn{\n      height: 40px;\n      text-transform: uppercase;\n      font-weight: 600; \n      width: 100%;\n      border: 1px solid #aaa;\n      outline: none;\n      cursor: pointer;\n\n      &:first-child{\n        margin-right: 10px;\n        background: rgba(89, 125, 204, 0.8);\n        color: #f8f8f8;\n        &:hover{\n          background: rgba(89, 125, 204, 0.6);\n        }\n      }\n    }\n"]);return H=function(){return e},e}function B(){var e=Object(N.a)(["\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.5);\n  top: 0;\n  left:0;\n  z-index: 15;\n\n  .close-preview{\n    color:white;\n    right: 250px;\n  }\n  .image-content{\n    display: flex;\n    justify-content: center;\n    width: 100%;\n    figure{\n      margin-top: 50px;\n      img{\n        display: block;\n        width:100%;\n        max-width:400px;\n      }\n    }\n  }\n"]);return B=function(){return e},e}function q(){var e=Object(N.a)(["\n  width:100%;\n  background: rgba(89, 125, 204, 0.8);\n  height: 70px;\n  border-bottom: 1px solid #bbb;\n  padding: 5px 10px;\n  display: flex;\n  border-top-left-radius: 8px;\n  border-top-right-radius: 8px;\n  justify-content: space-between;\n  \n  .user-logged > div, .user-conversation{\n    display: flex;\n    align-items:center;\n    color: #f2f2f2;\n    position: relative;\n    flex: 2;\n  }\n  .user-conversation{\n    flex: 2;\n  }\n  .user-logged > div{\n    justify-content: flex-end;\n    height: 100%;\n    i {\n      margin-right: 15px;\n      margin-left: 15px;\n    }\n  }\n  .user-logged{\n    position: relative;\n  }\n  .user-logged > div:hover{\n    cursor: pointer;\n    background: rgba(89, 125, 204, 0.5);\n  }\n  .user-img{\n    width: 60px;\n    img{\n      background: white;\n      ::selection{\n        background: transparent;\n      }\n      border-radius: 50%;\n      max-width:100%;\n    }\n  }\n  .user-img.conversation{\n    width: 40px;\n    float:right;\n  }\n  .user-info.logged{\n    margin-right: 10px;\n  }\n  .user-info.conversation{\n    margin-left: 10px;\n    p{\n      font-size: 14px;\n    }\n    .user-status{\n      position: relative;\n      margin-left: 4px;\n      letter-spacing: 0.6px;\n      &::before{\n        content: '';\n        position: relative;\n        top:3px;\n        right: 5px;\n        display: inline-block;\n        width: 15px;\n        height: 15px;\n        border-radius: 50%;\n        background: #4fdb66;\n      }\n    }\n  }\n"]);return q=function(){return e},e}var J,X=P.a.header(q()),W=P.a.div(B()),Y=P.a.div(H()),K=P.a.div(V()),Q=Object(c.b)((function(e){return{userInfo:e.userInfo,status:e.listConversations.status,userActive:e.posts.userActive}}),{updateImageProfile:function(e){return function(){var n=Object(p.a)(l.a.mark((function n(t){var r,a;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,w.put("users/imageProfile",e);case 2:r=n.sent,a=r.data.newImage,t({type:"user:UPDATE_IMAGE_PROFILE",payload:a});case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},updateNameUser:function(e){return function(){var n=Object(p.a)(l.a.mark((function n(t){var r,a;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,w.put("/user",{name:e});case 2:r=n.sent,a=r.data.newName,t({type:"user:UPDATE_NAME_USER",payload:a});case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}})((function(e){var n=e.userInfo,t=e.userActive,r=e.status,i=e.updateImageProfile,s=e.updateNameUser,c=Object(a.useState)(!1),u=Object(d.a)(c,2),f=u[0],m=u[1],g=Object(a.useState)(!1),b=Object(d.a)(g,2),v=b[0],x=b[1],w=Object(a.useState)(!1),E=Object(d.a)(w,2),O=E[0],y=E[1],j=Object(a.useState)(!1),k=Object(d.a)(j,2),N=k[0],P=k[1];Object(a.useEffect)((function(){t._id&&h.on("typing",(function(e){e.idUser===t._id&&e.idConversation===t.idConversation&&(clearTimeout(J),P(!0),J=setTimeout((function(){P(!1)}),1e3))}))}),[t._id]);var C=function(){var e=Object(p.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O&&((n=new FormData).append("imageProfile",O),i(n),I());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){y(null),m(!1)};return o.a.createElement(X,null,O&&o.a.createElement(W,null,o.a.createElement("div",{className:"close-preview",onClick:I},o.a.createElement("i",{className:"fas fa-times"})),o.a.createElement("div",{className:"image-content"},o.a.createElement("figure",null,o.a.createElement("img",{src:window.URL.createObjectURL(O),alt:""}))),o.a.createElement(Y,null,o.a.createElement("button",{className:"btn",onClick:C},"Confirmar"),o.a.createElement("button",{className:"btn",onClick:I},"Cancelar"))),v&&o.a.createElement(K,null,o.a.createElement("form",{action:"",onSubmit:function(e){e.preventDefault();var n=e.target.newName.value;""!==n&&(s(n),x(!1),m(!1))}},o.a.createElement("div",{className:"form-group"},o.a.createElement("input",{type:"text",name:"newName",value:n.name,placeholder:"Digite um novo nome para o perfil"})),o.a.createElement(Y,null,o.a.createElement("button",{className:"btn"},"Alterar"),o.a.createElement("button",{className:"btn",onClick:function(){return x(!1)}},"Cancelar")))),o.a.createElement("div",{className:"user-conversation"},t.hasOwnProperty("_id")&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"user-img conversation"},o.a.createElement("img",{src:t.imageProfile?t.imageProfile:"images/userDefault.png",alt:""})),o.a.createElement("div",{className:"user-info conversation"},t&&o.a.createElement("h4",null,t.name),t&&o.a.createElement("p",null,t.username),function(){if(r.hasOwnProperty("_id"))return r.status?o.a.createElement("small",{className:"user-status"},o.a.createElement("b",null,N?"Digitando...":"Online")):o.a.createElement("small",{style:{fontSize:11}},o.a.createElement("b",null,"Visto por \xfaltimo ",S(r.updatedAt)))}()))),o.a.createElement(G,null),o.a.createElement("div",{className:"user-logged"},o.a.createElement("div",{onClick:function(){return setTimeout((function(){return m(!f)}),100)}},o.a.createElement("i",{className:"fas fa-sort-down"}),o.a.createElement("div",{className:"user-info logged"},n.name&&o.a.createElement("h3",null,n.name),n.email&&o.a.createElement("p",null,n.email)),o.a.createElement("div",{className:"user-img logged"},o.a.createElement("img",{src:n.imageProfile?n.imageProfile:"images/userDefault.png",alt:""}))),f&&o.a.createElement(_,{setFileImage:y,setIsMenuVisible:m,setShowInpurtUpdateName:x})))})),Z=t(64),$=t(26);function ee(){var e=Object(N.a)(["\n  clear: both;\n  position: relative;\n\n .warningMessage{\n    text-align: center;\n    font-weight: bold;\n    font-size: 13px;\n    color: #888;\n    width: fit-content;\n    background: #dcdcdc;\n    border-bottom: 1px solid #bbb;\n    display: block;\n    padding: 5px;\n    border-radius: 5px;\n    margin: 0 auto;\n  } \n\n  .content-message{\n    width: fit-content;\n    min-width:40px;\n    max-width: ",";\n    background: ",";\n    margin-bottom: 5px;\n    border-radius: 6px;\n    padding: 5px 8px;\n    z-index: 2;\n    float: ",";\n    display: flex;\n    flex-direction: column;\n    position: ",";\n\n    &::after{\n      content: '';\n      position: absolute;\n      border-width: 10px;\n      border-color: beige transparent transparent transparent;\n      border-style: solid;\n      top:0;\n      right: -10px;\n      ","\n    }\n\n    .content-img{\n      width: 100%;\n      overflow: hidden;\n      max-width: 100%;\n      max-height: 250px;\n    }\n    .content-img img{\n      width: 210px;\n      margin: 0 auto;\n      text-align: center;\n      display: block;\n      transition: transform 300ms ease-in-out;\n    }\n    div{\n      .hour{\n        position: relative;\n        width: 30px;\n        font-weight: 600;\n        color: #777;\n        float: right;\n        font-size: 11px;\n        right: -7px;\n        margin-top: 3px;\n      }\n    }\n  }\n"]);return ee=function(){return e},e}var ne=P.a.div(ee(),(function(e){return e.isImg?"40%":"60%"}),(function(e){return e.isIdUserLogged?"beige":"#f8f8f8"}),(function(e){return e.isIdUserLogged?"right":"left"}),(function(e){return e.preview?"static":"relative"}),(function(e){return!e.isIdUserLogged&&"\n        left: -10px;\n        right: inherit;\n        border-color: #f8f8f8 transparent transparent transparent;\n      "})),te=function(e){var n=e.isIdUserLogged,t=e.message,r=e.setUrlPreviewImage;return o.a.createElement(ne,{isIdUserLogged:n,"data-id-message":t._id,"data-js":!n&&"viewed:".concat(t.viewed),isImg:!1},t&&o.a.createElement("div",{className:"content-message"},t.imagePath&&o.a.createElement("div",{className:"content-img"},o.a.createElement("img",{onClick:function(){return r(t.imagePath)},src:t.imagePath,alt:""})),o.a.createElement("div",null,o.a.createElement("p",null,t.message),o.a.createElement("span",{className:"hour"},S(t.createdAt,"posts")))))};function re(){var e=Object(N.a)(["\n  background: #d6d6c5;\n  width: 100%;\n  height: 100%;\n  padding: 5px 15px;\n  overflow-y: auto;\n  position: relative;\n  opacity: 0;\n  transition: opacity 50ms linear;\n  flex: 5;\n  \n  ::-webkit-scrollbar {\n    width: 6px;\n    background: #F4F4F4;\n  }\n  ::-webkit-scrollbar-thumb {\n    -webkit-border-radius: 5px;\n    border-radius: 5px;\n    background:rgba(172, 167, 167, 0.8); \n  }\n"]);return re=function(){return e},e}var ae=P.a.main(re());function oe(e){var n=function(e,n){if("object"!==typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"===typeof n?n:String(n)}function ie(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function se(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ie(t,!0).forEach((function(n){Object(D.a)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ie(t).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var ce={},ue=0,le=Object(c.b)((function(e){return{userInfo:e.userInfo,posts:e.posts.posts,pageActual:e.posts.page,totalPages:e.posts.totalPages,nextPage:e.posts.nextPage,messagesNotRead:e.posts.userActive.messagesNotRead}}),{newMessage:A,previousPosts:function(e,n){return function(){var t=Object(p.a)(l.a.mark((function t(r){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.get("conversation/messages/".concat(e,"/").concat(n));case 2:a=t.sent,r({type:"posts:PREVIOUS_POSTS",payload:{posts:a.data}});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var n=e.posts,t=e.userInfo,r=e.idConversation,i=e.containerChatRef,s=e.positionLine,c=e.messagesNotRead,u=e.pageActual,d=e.nextPage,f=e.previousPosts,m=e.totalPages,g=e.setUrlPreviewImage,x=e.setLoadingMessages,w=b()(v);Object(a.useEffect)((function(){ue=0,i.current.style.opacity=0,c?(i.current.scrollTop=0,E(!0)):(i.current.scrollTop+=99999,i.current.style.opacity=1,O()),i.current.style.opacity=1,O()}),[r]),Object(a.useEffect)((function(){w.on("newMessage",(function(){O(),i.current.scrollHeight-i.current.scrollTop-100<600?i.current.scrollTop=i.current.scrollHeight:E(!1)}))}),[]);var E=function(e){var n=document.querySelectorAll('[data-js="viewed:false"]')[0],t=n.getBoundingClientRect().top;i.current.style.opacity=1,function(e){var n=document.createElement("span");n.textContent="Mensagen(s) n\xe3o visualizada(s)",n.classList.add("warningMessage"),e.insertAdjacentElement("afterbegin",n)}(n),e&&(i.current.scrollTop=t-s+100)},O=function(){if(i.current.scrollHeight===i.current.clientHeight){var e=document.querySelectorAll('[data-js="viewed:false"]');e&&(Object.keys(ce).forEach((function(n){e.forEach(function(){var e=Object(p.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.getBoundingClientRect().top<s&&h.emit("registerMessageViewed",n);case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())})),ce={}),i.current.style.opacity=1}},y=function(){var e=Object(p.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.currentTarget.scrollTop<200)){e.next=8;break}if(!(u<m&&ue!==u)){e.next=8;break}return ue=u,x(!0),e.next=6,f(r,d);case 6:return setTimeout((function(){return x(!1)}),200),e.abrupt("return");case 8:u===m&&(ue=0);case 9:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),j=function(){var e=Object(p.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object.keys(ce).length>0&&document.querySelectorAll('[data-js="viewed:false"]').forEach((function(e){if(ce[e.getAttribute("data-id-message")]){var n=ce[e.getAttribute("data-id-message")];if(e.getBoundingClientRect().top<s){var t=ce,r=(t[n],Object($.a)(t,[n].map(oe)));ce=se({},r),h.emit("registerMessageViewed",n)}}})),e.next=3,y(n);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return o.a.createElement(ae,{ref:i,onScroll:j},n[r].map((function(e){return function(e){(e.from.toString()!==t._id||e.to.toString()!==t._id)&&!e.viewed&&(ce=se({},ce,Object(D.a)({},e._id,e._id)))}(e),o.a.createElement(te,{setUrlPreviewImage:g,key:e._id,isIdUserLogged:e.from.toString()===t._id,message:e})})))})),pe=t(66);t(143);function de(){var e=Object(N.a)(["\n  position: absolute;\n  max-width: 100%;\n  width: 100%;\n  padding: 15px 0;\n  left: 0;\n  background: #eee;\n  bottom: 100%;\n  z-index: 10;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n\n  .header{\n    .close{\n      position: absolute;\n      right: 50px;\n      top: 10px;\n      font-size: 28px;\n      cursor: pointer;\n      color: #444;\n    }\n\n    .image-name{\n      margin-bottom: 20px;\n      font-weight: 600;\n    }\n  }\n\n  .img-content{\n    max-width: 45%;\n    max-height: 380px;\n    img{\n      max-width: 80%;\n      max-height: 380px;\n      width: 100%;\n    }\n  }\n"]);return de=function(){return e},e}function fe(){var e=Object(N.a)(["\n  background: #ddd;\n  padding: 8px 15px;\n  width: 100%;\n  display: flex;\n  max-height: 80px;\n  flex-wrap:wrap;\n  align-items: center;\n  position: relative;\n\n  @media (max-height: 700px) {\n    max-height: 100px;\n    margin-bottom: 15px;\n  }\n  \n  .message-content{\n    div.close-picker{\n      width: 100%;\n      height: 1000%;\n      background: transparent;\n      position: absolute;\n      top:-900%;\n      left:0;\n      z-index: 0;\n    }\n    textarea{\n      max-width: 500px;\n      resize: none;\n      overflow-x: hidden;\n      padding-left:12px;\n      padding-top:10px;\n      border-radius: 50px;\n      border: solid 1px #bbb;\n      outline:0;\n      @media (max-width: 900px) {\n        max-width: 320px;\n      }\n    }\n  }\n  .icons i{\n    font-size: 28px;\n    color: #3bb6e7;\n    margin-left: 10px;\n    cursor: pointer;\n  }\n  .icons .fa-laugh{\n    color: #999;\n  }\n  .btn-send{\n    margin-left: 8px;\n    button{\n      border-radius: 20px;\n      text-decoration:none;\n      background: #aaa;\n      color: #f8f8f8;\n      font-size: 18px;\n      padding: 10px 40px;\n      display: block;\n      letter-spacing: 0.8px;\n      font-weight: 600;\n      border:none;\n      outline: none;\n\n      &:active{\n        transition: background 200ms ease;\n        background: #ccc;\n      }\n    }\n  }\n"]);return fe=function(){return e},e}var me=P.a.div(fe()),ge=P.a.figure(de()),be=Object(c.b)((function(e){return{userActive:e.posts.userActive,listConversations:e.listConversations,userInfo:e.userInfo}}),{loadingConversations:O})((function(e){var n=e.userActive,t=e.userInfo,r=e.containerChatRef,i=Object(a.useState)(""),s=Object(d.a)(i,2),c=s[0],u=s[1],f=Object(a.useState)(!1),m=Object(d.a)(f,2),g=m[0],b=m[1],v=Object(a.useState)(null),x=Object(d.a)(v,2),E=x[0],O=x[1],y=Object(a.useRef)(),j=function(){var e=Object(p.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c&&!E){e.next=12;break}return(t=new FormData).append("userId",n._id),t.append("message",c),t.append("image",E||""),e.next=7,w.post("conversation/message",t);case 7:r.current&&(r.current.scrollTop=r.current.scrollHeight),u(""),O(null),(a=document.querySelector(".warningMessage"))&&a.remove();case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return o.a.createElement(me,null,E&&o.a.createElement(ge,null,o.a.createElement("div",{className:"header"},o.a.createElement("div",{className:"image-name"},o.a.createElement("p",null,E.name)),o.a.createElement("div",{className:"close",onClick:function(){return O(null)}},o.a.createElement("i",{className:"fas fa-times"}))),o.a.createElement("div",{className:"img-content"},o.a.createElement("img",{src:URL.createObjectURL(E),alt:""}))),o.a.createElement("div",{className:"message-content"},g&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"close-picker",onClick:function(){y.current.focus(),b(!1)}}),o.a.createElement(pe.a,{onSelect:function(e){var n=e.native;u(c+n)},set:"google",style:{position:"absolute",bottom:"65px",left:0,zIndex:20,height:""}})),o.a.createElement("textarea",{cols:"50",rows:"2",ref:y,placeholder:"Escreva uma mensagem",value:c,onChange:function(e){u(e.target.value),h.emit("writing",{idUser:t._id,idConversation:n.idConversation})},onKeyUp:function(e){13===e.keyCode&&j()}})),o.a.createElement("input",{type:"file",id:"#file",hidden:!0,onChange:function(e){var n=e.target.files;return O(n[0])}}),o.a.createElement("div",{className:"icons"},o.a.createElement("i",{className:"far fa-laugh",onClick:function(){b(!g)}}),o.a.createElement("label",{htmlFor:"#file"},o.a.createElement("i",{className:"fas fa-image"}))),o.a.createElement("div",{className:"btn-send"},o.a.createElement("button",{onClick:j},"Enviar")))}));function ve(){var e=Object(N.a)(["\n  max-width: 1060px;\n  height: 30px;\n  width: 100%;\n  position: absolute;\n  bottom:75px;\n  overflow: unset\n"]);return ve=function(){return e},e}function he(){var e=Object(N.a)(["\n  flex: 1 1 70%;\n  height: 91%;\n  display:flex;\n  flex-direction: column;\n  position: relative;\n  background-image: url('images/speech-bubble.svg');\n  background-repeat: no-repeat;\n  background-position-x: 70px;\n\n  .loader-mensagens{\n    width: 100%;\n    position: absolute;\n    top:0;\n    left:0;\n    text-align: center;\n    background: rgba(255, 255, 255, 0.5);\n    z-index: 15;\n  }\n"]);return he=function(){return e},e}var xe,we=P.a.div(he()),Ee=P.a.div(ve()),Oe=Object(c.b)((function(e){return{userActive:e.posts.userActive}}),{newMessage:A,loadingConversations:O,updateMessageRead:function(e){var n=e.message,t=e.messagesNotRead;return function(e){e({type:"conversations:UPDATE_MESSAGES_NOT_READ",payload:{numberMessages:t,idConversation:n.conversation}}),e({type:"posts:MESSAGE_READ",payload:n})}}})((function(e){var n=e.userActive,t=e.newMessage,r=e.loadingConversations,i=e.updateMessageRead,s=Object(a.useState)(""),c=Object(d.a)(s,2),u=c[0],f=c[1],m=Object(a.useState)(!1),g=Object(d.a)(m,2),x=g[0],w=g[1],E=Object(a.useRef)(),O=Object(a.useRef)();Object(a.useEffect)((function(){xe=O.current.getBoundingClientRect().top,b()(v).on("newMessage",function(){var e=Object(p.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(n);case 2:setTimeout((function(){return r()}),200);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),h.on("messageRead",(function(e){i(e)}))}),[]),Object(a.useEffect)((function(){y()}),[n.idConversation]);var y=function(){return o.a.createElement(le,{positionLine:xe,idConversation:n.idConversation,containerChatRef:E,setUrlPreviewImage:f,setLoadingMessages:w})};return o.a.createElement(o.a.Fragment,null,u&&o.a.createElement("div",{className:"preview-image"},o.a.createElement("div",{className:"close-preview",onClick:function(){return f(!1)}},o.a.createElement("i",{className:"fas fa-times"})),o.a.createElement("figure",null,o.a.createElement("img",{src:u,alt:""}))),o.a.createElement(we,null,o.a.createElement("div",{className:"loader-mensagens"},o.a.createElement(Z.PulseLoader,{loading:x,color:"#7693d2"})),n.hasOwnProperty("_id")&&y(),o.a.createElement(Ee,{ref:O}),n.hasOwnProperty("_id")&&o.a.createElement(be,{containerChatRef:E})))}));function ye(){var e=Object(N.a)(["\n  position: absolute;\n  height: 120px;\n  width: 100%;\n  background: rgba(0, 0, 0, 0.5);\n  z-index: 6;\n  top: 50%;\n  transform: translateY(-50%);\n  color: #eee;\n\n  .close-modal{\n    position: absolute;\n    right: 10%;\n    top: 10px;\n    font-size: 26px;\n  }\n  .confirm-content{\n    padding-top:10px;\n    text-align:center;\n\n    h3{\n      letter-spacing: 0.7px;\n      margin-left: 5px;\n    }\n    i{\n      color: #eaf73b;\n      font-size: 26px;\n      margin-right: 10px;\n    }\n  }\n\n  .btn-actions{\n    margin-top: 20px;\n\n    .btn{\n      max-width: 160px;\n      width: 100%;\n      height: 30px;\n      text-transform: uppercase;\n      font-weight: 600;\n      border: 1px solid #aaa;\n      outline: 0;\n      cursor: pointer;\n      &:hover{\n        background: rgba(255, 255, 255, 0.6)\n      }\n    }\n    .btn.ok{\n      margin-left: 10px;\n      background: #7693D2;\n      color: #f8f8f8;\n      &:hover{\n        background: rgba(118, 147, 210, 0.8);\n      }\n    }\n  }\n"]);return ye=function(){return e},e}var je=P.a.div(ye()),ke=function(e){var n=e.setIsShowConfirm,t=e.deleteConversation;return o.a.createElement(je,null,o.a.createElement("div",{className:"close-modal",onClick:function(){return n(!1)}},o.a.createElement("i",{className:"fas fa-times"})),o.a.createElement("div",{className:"confirm-content"},o.a.createElement("h4",null,o.a.createElement("i",{className:"fas fa-exclamation-triangle"}),"Tem certeza disso? Isso apagar\xe1 todas as mensagens.",o.a.createElement("br",null),"Deseja realmente continuar?"),o.a.createElement("div",{className:"btn-actions"},o.a.createElement("button",{className:"btn cancel",onClick:function(){return n(!1)}},"Cancelar"),o.a.createElement("button",{className:"btn ok",onClick:function(){return t()}},"Excluir"))))};function Se(){var e=Object(N.a)(["\nposition: relative;\nflex: 1 1 25%;\n@media (max-width: 930px) {\n  /* min-width: 500px; */\n  /* flex: 0;    */\n}\n.content{\n  z-index: 5;\n  position: relative;\n  height: 100%;\n  background: #ffffef;\n  /* height: 90%; */\n  overflow-y: auto;\n  border-left: solid 1px #bbb;\n    /* @media (max-width: 930px) {\n      transform: translateX(110%);\n      height: 100%;\n      position: absolute;\n      right: 0;\n      bottom: 0;\n    } */\n  }\n"]);return Se=function(){return e},e}var Ne=P.a.section(Se()),Pe=Object(c.b)((function(e){return{listConversations:e.listConversations}}),{cleanPosts:function(e){var n=e.idConversation,t=e.idUser;return function(){var e=Object(p.a)(l.a.mark((function e(r){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(n,t),e.next=3,w.delete("conversation/".concat(n,"/").concat(t));case 3:r({type:"posts:CLEAN_POSTS_USER",payload:n});case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},loadingConversations:O})((function(e){var n=e.listConversations,t=e.cleanPosts,r=e.loadingConversations,i=Object(a.useState)(!1),s=Object(d.a)(i,2),c=s[0],u=s[1],f=Object(a.useState)({}),m=Object(d.a)(f,2),g=m[0],b=m[1],v=function(){var e=Object(p.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(g);case 2:r(),u(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return o.a.createElement(o.a.Fragment,null,c&&o.a.createElement(ke,{deleteConversation:v,setIsShowConfirm:u}),o.a.createElement(Ne,null,o.a.createElement("div",{className:"content"},o.a.createElement("ul",{className:"list-conversas"},n.contacts.map((function(e){return o.a.createElement(M,{key:e.user._id,userChat:e.user,lastUpdate:e.updatedAt,idConversation:e.idConversation,messagesNotRead:e.messagesNotRead,setDeleteUser:b,setIsShowConfirm:u})}))))))}));function Ce(){var e=Object(N.a)(["\n  text-align: center;\n  width: 100%;\n  max-width: 350px;\n  margin: 0 auto;\n\n  .error{\n    color: red;\n    display: block;\n    margin-bottom: 10px;\n  }\n  .group-input{\n    margin-bottom: 15px;\n    position: relative;\n\n    ","\n  }\n  input{\n    width: 100%;\n    max-width: 350px;\n    padding: 8px 5px;\n  }\n  .btn-actions{\n    margin: 0 auto;\n    align-items: center;\n    display: flex;\n    max-width: 350px;\n    \n    .fa-arrow-left{\n      margin-right: 5px;\n    }\n  }\n  .btn{\n    height: 45px;\n    text-transform: uppercase;\n    font-weight: 600; \n    width: 100%;\n    border: 1px solid #aaa;\n    outline: none;\n    cursor: pointer;\n\n  }\n  .sign-in{\n    background: rgba(89, 125, 204, 0.8);\n    color: #f8f8f8;\n    &:hover{\n      background: rgba(89, 125, 204, 0.6);\n    }\n  }\n  .sign-up{\n    &:hover{\n      background: rgba(0, 0, 0, 0.1);\n      color: #444;\n    }\n  }\n\n"]);return Ce=function(){return e},e}var Ie=P.a.form(Ce(),(function(e){return e.signUp&&"\n      &:before{\n        content: '*';\n        color: red;\n        position: absolute;\n        display: block;\n        left: -10px;\n      }\n    "})),_e=function(e){var n=e.submit,t=e.signUp,r=e.setIsSignIn,a=e.messageError;return o.a.createElement(Ie,{onSubmit:n,signUp:t},o.a.createElement("span",{className:"error"},a),t&&o.a.createElement("div",{className:"group-input"},o.a.createElement("input",{type:"text",name:"name",placeholder:"Digite seu nome completo"})),o.a.createElement("div",{className:"group-input"},o.a.createElement("input",{type:"email",name:"email",placeholder:"Digite seu email"})),o.a.createElement("div",{className:"group-input"},o.a.createElement("input",{type:"password",name:"password",placeholder:"Digite sua senha"})),t&&o.a.createElement("div",{className:"group-input"},o.a.createElement("input",{type:"password",name:"confirmPassword",placeholder:"Confirme sua senha"})),o.a.createElement("div",{className:"btn-actions"},o.a.createElement("button",{onClick:function(){return r(!!t)},className:"btn sign-up",type:"button"},t?o.a.createElement("span",null,o.a.createElement("i",{className:"fas fa-arrow-left"}),"Voltar"):"Cadastre-se"),o.a.createElement("button",{className:"btn sign-in"},t?"Cadastre-se":"Login")))},De=Object(c.b)(null,{loginUser:k})((function(e){var n=e.loginUser,t=e.setIsSignIn,r=e.messageError,i=e.setMessageError;Object(a.useEffect)((function(){i("")}),[]);var s=function(){var e=Object(p.a)(l.a.mark((function e(t){var r,a,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r=t.target,a=r.email,o=r.password,a.value&&o.value){e.next=5;break}return i("Preencha os campos corretamente!"),e.abrupt("return",!1);case 5:return e.next=7,n(a.value,o.value);case 7:window.location.reload();case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return o.a.createElement(_e,{submit:s,setIsSignIn:t,messageError:r})})),Ae=Object(c.b)(null,{loginUser:k})((function(e){var n=e.setIsSignIn,t=e.messageError,r=e.setMessageError,i=e.loginUser;Object(a.useEffect)((function(){r("")}),[]);var s=function(){var e=Object(p.a)(l.a.mark((function e(n){var t,a,o,s,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),t=n.target,a=t.name,o=t.email,s=t.password,c=t.confirmPassword,a.value&&o.value&&s.value&&c.value){e.next=5;break}return r("Todos os campos s\xe3o obrigat\xf3rios!"),e.abrupt("return",!1);case 5:if(s.value===c.value){e.next=8;break}return r("Senhas diferentes!"),e.abrupt("return",!1);case 8:return e.prev=8,e.next=11,w.post("auth/register",{name:a.value,email:o.value,password:s.value});case 11:return e.next=13,i(o.value,s.value);case 13:window.location.reload(),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(8),r("Ocorreu um erro ao tentar se cadastrar!");case 19:case"end":return e.stop()}}),e,null,[[8,16]])})));return function(n){return e.apply(this,arguments)}}();return o.a.createElement(_e,{submit:s,setIsSignIn:n,signUp:!0,messageError:t})}));function Ue(){var e=Object(N.a)(["\n  background: #ddd;\n  height: 100%;\n  width: 100%;\n\n  header{\n    text-align:center;\n\n    .logo{\n      font-size: 7.5em;\n      color: rgba(89, 125, 204, 0.8);\n      p{\n        font-size: 20px;\n      }\n    }\n    .login{\n      color: #444;\n      font-style: italic;\n      font-size: 1.4em;\n    }\n  }\n"]);return Ue=function(){return e},e}var Re=P.a.section(Ue()),Le=function(){var e=Object(a.useState)(!0),n=Object(d.a)(e,2),t=n[0],r=n[1],i=Object(a.useState)(""),s=Object(d.a)(i,2),c=s[0],u=s[1];return o.a.createElement(Re,null,o.a.createElement("header",null,o.a.createElement("div",{className:"logo"},o.a.createElement("i",{className:"fas fa-comments"}),o.a.createElement("p",null,"Chat")),o.a.createElement("div",{className:"login"},o.a.createElement("h1",null,t?"Login":"Cadastro"))),t?o.a.createElement(De,{setIsSignIn:r,messageError:c,setMessageError:u}):o.a.createElement(Ae,{setIsSignIn:r,messageError:c,setMessageError:u}))};function Te(){var e=Object(N.a)(["\n  max-width: 1160px;\n  min-width: 1000px;\n  width: 100%;\n  height: 88vh;\n  border: 1px solid #bbb;\n  margin: 40px auto;\n  display: flex;\n  flex-wrap: wrap;\n  border-radius: 8px;\n  overflow: hidden;\n  position: relative;\n\n  /* @media (max-height:670px){\n    height: 85vh\n  } */\n  .preview-image{\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    background: #f8f8f8;\n    z-index: 10;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    figure{\n      width: 100%;\n      img{\n        margin: 20px auto;\n        display: block;\n        max-width: 70%;\n        max-height: 500px;\n      }\n    }\n  }\n"]);return Te=function(){return e},e}var Me,ze=P.a.div(Te()),Fe=Object(c.b)((function(e){return{userInfo:e.userInfo,userActive:e.posts.userActive}}),{updateStatus:y,loadingConversations:O,loginUser:k,getInfoUserLogged:function(){return function(){var e=Object(p.a)(l.a.mark((function e(n){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.get("/user");case 2:t=e.sent,clearInterval(r),r=setInterval((function(){j.emit("online",t.data._id)}),2e3),n({type:"user:LOGIN_USER",payload:t.data});case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()}})((function(e){var n=e.userInfo,t=e.loadingConversations,r=e.userActive,i=e.updateStatus,s=e.getInfoUserLogged,c=Object(a.useState)(null),u=Object(d.a)(c,2),f=u[0],m=u[1],g=Object(a.useState)(!1),b=Object(d.a)(g,2),v=b[0],x=b[1];return Object(a.useEffect)((function(){(function(){var e=Object(p.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:JSON.parse(localStorage.getItem("@chat@"))?(m(!0),s(),t()):m(!1);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(a.useEffect)((function(){r.hasOwnProperty("_id")&&(clearInterval(Me),Me=setInterval((function(){h.emit("verifyStatus",r._id)}),3e3))}),[r]),Object(a.useEffect)((function(){v||(i(),x(!0))}),[r]),n._id&&window.addEventListener("beforeunload",(function(){return h.emit("off",n._id),""})),o.a.createElement(ze,null,!1===f&&o.a.createElement(Le,null),f&&o.a.createElement(o.a.Fragment,null,o.a.createElement(Q,{socket:h}),o.a.createElement(Oe,null),o.a.createElement(Pe,null)))}));var Ge=function(){return o.a.createElement("div",{className:"App"},o.a.createElement(Fe,null))},Ve=(t(144),t(12)),He=t(39);function Be(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function qe(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Be(t,!0).forEach((function(n){Object(D.a)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Be(t).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Je={serachUsers:[]},Xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"user:LOGIN_USER":return qe({},e,{},n.payload);case"user:SEARCH_USER":return qe({},e,{serachUsers:n.payload});case"user:UPDATE_IMAGE_PROFILE":return qe({},e,{imageProfile:n.payload});case"user:UPDATE_NAME_USER":return qe({},e,{name:n.payload});default:return e}},We=t(40);function Ye(e){var n=function(e,n){if("object"!==typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"===typeof n?n:String(n)}function Ke(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Qe(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Ke(t,!0).forEach((function(n){Object(D.a)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ke(t).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Ze={posts:{},userActive:{}},$e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"posts:LOADING_POSTS":var t=n.payload,r=t.userActive,a=t.posts;return Qe({},e,{},a,{posts:Qe({},e.posts,Object(D.a)({},a.idConversation,a.posts)),userActive:r});case"posts:PREVIOUS_POSTS":var o=n.payload.posts;return Qe({},e,{},n.payload.posts,{posts:Qe({},e.posts,Object(D.a)({},o.idConversation,[].concat(Object(We.a)(o.posts),Object(We.a)(e.posts[o.idConversation]))))});case"posts:NEW_MESSAGE":var i=n.payload.conversation;return Qe({},e,{posts:Qe({},e.posts,Object(D.a)({},i,e.posts[i]?e.posts[i].concat(n.payload):[n.payload]))});case"posts:CLEAN_POSTS_USER":var s=e.posts,c=n.payload,u=(s[c],Object($.a)(s,[c].map(Ye)));return{posts:Qe({},u),userActive:{}};case"posts:MESSAGE_READ":var l=n.payload,p=l._id,d=l.conversation;return Qe({},e,{posts:Qe({},e.posts,Object(D.a)({},d,e.posts[d].map((function(e){return e._id===p?Qe({},n.payload):e}))))});default:return e}};function en(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function nn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?en(t,!0).forEach((function(n){Object(D.a)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):en(t).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var tn,rn={contacts:[],status:{}},an=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rn,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"conversations:LOADING_CONVERSATIONS":return nn({},e,{contacts:n.payload});case E:return nn({},e,{status:n.payload});case"conversations:UPDATE_MESSAGES_NOT_READ":return nn({},e,{contacts:e.contacts.map((function(e){return e.idConversation===n.payload.idConversation?nn({},e,{messagesNotRead:n.payload.numberMessages}):e}))});default:return e}},on=Object(Ve.c)({userInfo:Xe,posts:$e,listConversations:an}),sn=function(){return window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()};tn=sn()?Object(Ve.d)(Object(Ve.a)(He.a),sn()):Object(Ve.d)(Object(Ve.a)(He.a));var cn=Object(Ve.e)(on,{},tn);t(145);s.a.render(o.a.createElement(c.a,{store:cn},o.a.createElement(Ge,null)),document.getElementById("root"))},69:function(e,n,t){e.exports=t(146)}},[[69,1,2]]]);
//# sourceMappingURL=main.94a6cd70.chunk.js.map