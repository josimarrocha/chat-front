(window["webpackJsonpfront-end"]=window["webpackJsonpfront-end"]||[]).push([[0],{112:function(e,n){},117:function(e,n,t){},119:function(e,n,t){"use strict";t.r(n);var r,a=t(0),o=t.n(a),i=t(22),s=t.n(i),c=t(7),u=t(2),l=t.n(u),p=t(3),d=t(6),f=t(32),m=t.n(f),g=t(12),b=t.n(g),v="http://localhost:3333",h=b()(v),x=JSON.parse(localStorage.getItem("@chat@")),w=x?m.a.create({baseURL:v,headers:{Authorization:"Bearer ".concat(x.hasOwnProperty("token")?x.token:"")}}):m.a.create({baseURL:v}),E="convertation:USER_STATUS",O=function(){return function(){var e=Object(p.a)(l.a.mark((function e(n){var t,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.get("/conversations");case 2:t=e.sent,r=t.data,n({type:"conversations:LOADING_CONVERSATIONS",payload:r});case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},y=function(e){return function(n){e?n({type:E,payload:{}}):h.on("status",(function(e){n({type:E,payload:e})}))}},j=b()(v),k=function(e,n){return function(){var t=Object(p.a)(l.a.mark((function t(r){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={data:""},t.next=3,w.post("/auth/sign-in",{email:e,password:n});case 3:a=t.sent,localStorage.setItem("@chat@",JSON.stringify({token:a.data.token})),r({type:"user:LOGIN_USER",payload:a.data});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},S=function(e,n){var t=new Date(e).getHours(),r=new Date(e).getMinutes();r=r<10?"0".concat(r):r,t=t<10?"0".concat(t):t;var a=new Date(e).getDate(),o=new Date(e).getMonth(),i=new Date(e).getFullYear();return"posts"===n?"".concat(t,":").concat(r):a===(new Date).getDate()?"".concat(t,":").concat(r):(new Date).getDate()-a>1||(new Date).getMonth()+1>o+1?"".concat(a<10?"0".concat(a):a,"/").concat(o<10?"0".concat(o+1):o,"/").concat(i):(new Date).getDate()-a===1&&"list"===n?"Ontem":"Ontem ".concat(t,":").concat(r)},P=t(4),N=t(5);function C(){var e=Object(P.a)(["\n  width: 170px;\n  background: #f1f1f1;\n  position: absolute;\n  top: 60px;\n  left: 0px;\n  border: solid 1px #bbb;\n  color: #666;\n  list-style-type: none;\n  z-index: 14;\n  li{\n    font-size: 15px;\n    font-weight: 600;\n    text-align: center;\n    height: 30px;\n    border-bottom: 1px solid #bbb;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    label{\n      width: 100%;\n      display: inline-block;\n      padding-top: 5px;\n      height: 100%;\n    }\n\n    &:hover{\n      background: #ddd;\n    }\n  }\n"]);return C=function(){return e},e}var I=N.a.ul(C()),_=function(e){var n=e.setFileImage,t=Object(a.useRef)();Object(a.useEffect)((function(){t.current.focus()}),[]);return o.a.createElement(o.a.Fragment,null,o.a.createElement(I,{ref:t},o.a.createElement("li",null,o.a.createElement("input",{type:"file",id:"#file",hidden:!0,onChange:function(e){var t=e.target.files;return n(t[0])}}),o.a.createElement("label",{htmlFor:"#file"},"Alterar imagem")),o.a.createElement("li",{onClick:function(){localStorage.removeItem("@chat@"),window.location.reload()}},"Logout")))},D=t(8),A=function(e){return function(){var n=Object(p.a)(l.a.mark((function n(t){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t({type:"posts:NEW_MESSAGE",payload:e});case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()};function U(){var e=Object(P.a)(["\n  align-items:center;\n  background: #eee;\n  border-bottom: 1px solid #ddd;\n  cursor: pointer;\n  display: flex;\n  padding: 2px 5px;\n  height: 60px;\n  transition: background 200ms linear;\n  position: relative;\n  width: 100%;\n  &:hover{\n    background: #ddd;\n  }  \n  &:hover .btn-user-options{\n    display: block;\n  }\n\n  .user-image{\n    width: 40px;\n    img{\n      border-radius: 50%;\n      width: 100%;\n      max-width: 100%;\n    }\n  }\n\n  .user-info{\n    margin-left: 10px;\n    color: #666;\n    width: 70%;\n    letter-spacing: 0.6px;\n\n    p{\n     font-size: 12px; \n    }\n  }\n  .messages-not-read{\n    position: absolute;\n    background:rgba(89, 125, 204, 0.9);\n    width: 22px;\n    height: 22px;\n    max-height: 25px;\n    font-size: 14px;\n    padding-top: 3px ;\n    border-radius: 50%;\n    color: #F8f8f8;\n    left:25px;\n    text-align: center;\n    bottom: 1px;\n  }\n  .last-update{\n    position: absolute;\n    right: 10px;\n    top:6px;\n    font-size: 13px;\n    color: #777;\n    z-index: 8;\n  }\n  .btn-user-options{\n    position: absolute;\n    right: 10px;\n    bottom: 7px;\n    display: none;\n    z-index: 14;\n    width: 60px;\n  \n    i{\n      margin-left: 15px;\n      color: #888;\n      border-radius: 50%;\n      padding: 6px 12px;\n      transition: background 200ms ease-in;\n      &:hover{\n        background: rgba(0, 0, 0, 0.1);\n      }\n    }\n    .user-options{\n      width:160px;\n      position: absolute;\n      right: 28px;\n      background: #EEEEEE;\n      border-radius: 4px;\n      border: solid 1px #bbb;\n      z-index: 15;\n    }\n    li{\n      padding: 8px 5px 8px 10px;\n      border-bottom: 1px solid #bbb;\n    }\n  }\n\n  .add-chat a{\n    display: block;\n    text-decoration: none;\n    background: #7693D2;\n    color: #f8f8f8;\n    margin-top: 3px;\n    margin-bottom: 3px;\n    padding: 3px;\n    border-radius: 4px;\n    text-align: center;\n    width: 150px;\n  }\n"]);return U=function(){return e},e}var R=N.a.li(U());function L(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function T(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?L(t,!0).forEach((function(n){Object(D.a)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):L(t).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var z=Object(c.b)((function(e){return{listConversations:e.listConversations,userActive:e.posts.userActive,posts:e.posts.posts}}),{loadingPosts:function(e){return function(){var n=Object(p.a)(l.a.mark((function n(t){var r;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.idConversation){n.next=4;break}return n.next=3,w.get("conversation/messages/".concat(e.idConversation,"/1"));case 3:r=n.sent;case 4:t({type:"posts:LOADING_POSTS",payload:{posts:r?r.data:{messages:[],_id:e.idConversation},userActive:e}});case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},updateStatus:y})((function(e){var n=e.userChat,t=e.loadingPosts,r=e.search,i=e.listConversations,s=e.lastUpdate,c=e.updateStatus,u=e.userActive,f=e.posts,m=e.messagesNotRead,g=e.setIsShowConfirm,b=e.setDeleteUser,v=e.idConversation,h=e.setShowList,x=Object(a.useState)(!1),E=Object(d.a)(x,2),O=E[0],y=E[1],j=function(){var e=Object(p.a)(l.a.mark((function e(r){var a,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.contacts.some((function(e){return e.user._id===r}))){e.next=13;break}return e.next=4,w.post("/create/conversation",{userId:r});case 4:return a=e.sent,o=a.data,e.next=8,t(T({},n,{idConversation:o.idConversation}));case 8:if(!u.hasOwnProperty("_id")){e.next=13;break}if(u._id!==r){e.next=11;break}return e.abrupt("return",!1);case 11:return c(!0),e.abrupt("return",!0);case 13:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),k=function(){var e=Object(p.a)(l.a.mark((function e(r){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u.hasOwnProperty("_id")){e.next=4;break}return e.next=3,t(T({},n,{idConversation:r,messagesNotRead:m}));case 3:return e.abrupt("return",!1);case 4:if(!u.hasOwnProperty("_id")){e.next=10;break}if(u._id.toString()!==n._id.toString()||!f[r]){e.next=7;break}return e.abrupt("return",!1);case 7:return e.next=9,t(T({},n,{idConversation:r,messagesNotRead:m}));case 9:c(!0);case 10:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return o.a.createElement(R,{onClick:function(){0===i.contacts.length?j(n._id):i.contacts.every((function(e){return e.user._id===n._id?k(e.idConversation):j(n._id)})),r&&h(!1)}},o.a.createElement("div",{className:"user-image"},o.a.createElement("img",{src:n.imageProfile?n.imageProfile:"images/userDefault.png",alt:""})),o.a.createElement("div",{className:"user-info"},o.a.createElement("div",{className:"user-name"},o.a.createElement("h4",null,n.name.length>=18?n.name.substring(0,18)+"...":n.name),o.a.createElement("p",null,n.username),!r&&!!m&&o.a.createElement("span",{className:"messages-not-read"},m))),!r&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"last-update"},o.a.createElement("span",null,S(s,"list"))),o.a.createElement("div",{className:"btn-user-options",onClick:function(){return y(!O)},onMouseLeave:function(){return y(!1)}},o.a.createElement("i",{className:"fas fa-ellipsis-v"}),O&&o.a.createElement("ul",{className:"user-options"},o.a.createElement("li",{onClick:function(){g(!0),b({idUser:n._id,idConversation:v})}},"Excluir contato")))))}));function M(){var e=Object(P.a)(["\n  flex: 3;\n  display: flex;\n  align-items: center;\n\n  form{\n    width: 60%;\n    position: relative;\n    \n    input{\n      width: 100%;\n      padding: 5px 3px;\n      border-top-left-radius: 5px;\n      border-bottom-left-radius: 3px;\n      border-top-right-radius: 5px;\n      border-bottom-right-radius: 3px;\n      border: none;\n      outline: 0;\n    }\n    ul{\n      box-shadow: 1px 1px 5px #999;\n      width: 100%;\n      position: absolute;\n      z-index: 12;\n    }\n  }\n"]);return M=function(){return e},e}var F=N.a.div(M()),G=Object(c.b)((function(e){return{searchUsers:e.userInfo.serachUsers}}),{searchUser:function(e){return function(){var n=Object(p.a)(l.a.mark((function n(t){var r;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(""===e){n.next=4;break}return n.next=3,w.get("/users/".concat(e));case 3:r=n.sent;case 4:t({type:"user:SEARCH_USER",payload:r?r.data:[]});case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}})((function(e){var n=e.searchUsers,t=e.searchUser,r=Object(a.useState)(!1),i=Object(d.a)(r,2),s=i[0],c=i[1],u=Object(a.useRef)();return o.a.createElement(F,null,o.a.createElement("form",{action:""},o.a.createElement("input",{type:"text",ref:u,onFocus:function(){return c(!0)},onBlur:function(){return u.current.value=""},placeholder:"Pesquisar usu\xe1rios",name:"input",autoComplete:"off",onChange:function(){var e=u.current.value;t(e)}}),s&&o.a.createElement("ul",null,n.map((function(e){return o.a.createElement(z,{key:"search:".concat(e._id),search:!0,userChat:e,setShowList:c})})))))}));function V(){var e=Object(P.a)(["\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.5);\n  top: 0;\n  left:0;\n  z-index: 15;\n\n  .close-preview{\n    color:white;\n    right: 250px;\n  }\n  .image-content{\n    display: flex;\n    justify-content: center;\n    width: 100%;\n    figure{\n      margin-top: 50px;\n      img{\n        display: block;\n        width:100%;\n        max-width:400px;\n      }\n    }\n  }\n  .actions{\n    margin: 0 auto;\n    align-items: center;\n    display: flex;\n    max-width: 350px;\n    padding-top: 20px;\n\n    .btn{\n      height: 45px;\n      text-transform: uppercase;\n      font-weight: 600; \n      width: 100%;\n      border: 1px solid #aaa;\n      outline: none;\n      cursor: pointer;\n\n      &:first-child{\n        margin-right: 10px;\n        background: rgba(89, 125, 204, 0.8);\n        color: #f8f8f8;\n        &:hover{\n          background: rgba(89, 125, 204, 0.6);\n        }\n      }\n    }\n  }\n"]);return V=function(){return e},e}function H(){var e=Object(P.a)(["\n  width:100%;\n  background: rgba(89, 125, 204, 0.8);\n  height: 70px;\n  border-bottom: 1px solid #bbb;\n  padding: 5px 10px;\n  display: flex;\n  border-top-left-radius: 8px;\n  border-top-right-radius: 8px;\n  justify-content: space-between;\n  \n  .user-logged > div, .user-conversation{\n    display: flex;\n    align-items:center;\n    color: #f2f2f2;\n    position: relative;\n    flex: 2;\n  }\n  .user-conversation{\n    flex: 2;\n  }\n  .user-logged > div{\n    justify-content: flex-end;\n    height: 100%;\n    i {\n      margin-right: 15px;\n      margin-left: 15px;\n    }\n  }\n  .user-logged{\n    position: relative;\n  }\n  .user-logged > div:hover{\n    cursor: pointer;\n    background: rgba(89, 125, 204, 0.5);\n  }\n  .user-img{\n    width: 60px;\n    img{\n      background: white;\n      ::selection{\n        background: transparent;\n      }\n      border-radius: 50%;\n      max-width:100%;\n    }\n  }\n  .user-img.conversation{\n    width: 40px;\n    float:right;\n  }\n  .user-info.logged{\n    margin-right: 10px;\n  }\n  .user-info.conversation{\n    margin-left: 10px;\n    p{\n      font-size: 14px;\n    }\n    .user-status{\n      position: relative;\n      margin-left: 4px;\n      &::before{\n        content: '';\n        position: relative;\n        top:3px;\n        right: 5px;\n        display: inline-block;\n        width: 15px;\n        height: 15px;\n        border-radius: 50%;\n        background: #4fdb66;\n      }\n    }\n  }\n"]);return H=function(){return e},e}var B=N.a.header(H()),J=N.a.div(V()),X=Object(c.b)((function(e){return{userInfo:e.userInfo,status:e.listConversations.status,userActive:e.posts.userActive}}),{updateImageProfile:function(e){return function(){var n=Object(p.a)(l.a.mark((function n(t){var r,a;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,w.put("users/imageProfile",e);case 2:r=n.sent,a=r.data.newImage,t({type:"user:UPDATE_IMAGE_PROFILE",payload:a});case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}})((function(e){var n=e.userInfo,t=e.userActive,r=e.status,i=e.updateImageProfile,s=Object(a.useState)(!1),c=Object(d.a)(s,2),u=c[0],f=c[1],m=Object(a.useState)(!1),g=Object(d.a)(m,2),b=g[0],v=g[1],h=function(){var e=Object(p.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b&&((n=new FormData).append("imageProfile",b),i(n),x());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){v(null),f(!1)};return o.a.createElement(B,null,b&&o.a.createElement(J,null,o.a.createElement("div",{className:"close-preview",onClick:x},o.a.createElement("i",{className:"fas fa-times"})),o.a.createElement("div",{className:"image-content"},o.a.createElement("figure",null,o.a.createElement("img",{src:window.URL.createObjectURL(b),alt:""}))),o.a.createElement("div",{className:"actions"},o.a.createElement("button",{className:"btn",onClick:h},"Confirmar"),o.a.createElement("button",{className:"btn",onClick:x},"Cancelar"))),o.a.createElement("div",{className:"user-conversation"},t.hasOwnProperty("_id")&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"user-img conversation"},o.a.createElement("img",{src:t.imageProfile?t.imageProfile:"images/userDefault.png",alt:""})),o.a.createElement("div",{className:"user-info conversation"},t&&o.a.createElement("h4",null,t.name),t&&o.a.createElement("p",null,t.username),function(){if(r.hasOwnProperty("_id"))return r.status?o.a.createElement("small",{className:"user-status"},o.a.createElement("b",null,"Online")):o.a.createElement("small",{style:{fontSize:11}},o.a.createElement("b",null,"Visto por \xfaltimo ",S(r.updatedAt)))}()))),o.a.createElement(G,null),o.a.createElement("div",{className:"user-logged"},o.a.createElement("div",{onClick:function(){return setTimeout((function(){return f(!u)}),100)}},o.a.createElement("i",{className:"fas fa-sort-down"}),o.a.createElement("div",{className:"user-info logged"},n.name&&o.a.createElement("h3",null,n.name),n.email&&o.a.createElement("p",null,n.email)),o.a.createElement("div",{className:"user-img logged"},o.a.createElement("img",{src:n.imageProfile?n.imageProfile:"images/userDefault.png",alt:""}))),u&&o.a.createElement(_,{setFileImage:v,setIsMenuVisible:f})))})),q=t(23);function W(){var e=Object(P.a)(["\n  clear: both;\n  position: relative;\n\n .warningMessage{\n    text-align: center;\n    font-weight: bold;\n    font-size: 13px;\n    color: #888;\n    width: fit-content;\n    background: #dcdcdc;\n    border-bottom: 1px solid #bbb;\n    display: block;\n    padding: 5px;\n    border-radius: 5px;\n    margin: 0 auto;\n  } \n\n  .content-message{\n    width: fit-content;\n    min-width:40px;\n    max-width: ",";\n    background: ",";\n    margin-bottom: 5px;\n    border-radius: 6px;\n    padding: 5px 8px;\n    z-index: 2;\n    float: ",";\n    display: flex;\n    flex-direction: column;\n    position: ",";\n\n    &::after{\n      content: '';\n      position: absolute;\n      border-width: 10px;\n      border-color: beige transparent transparent transparent;\n      border-style: solid;\n      top:0;\n      right: -10px;\n      ","\n    }\n\n    .content-img{\n      width: 100%;\n      overflow: hidden;\n      max-width: 100%;\n      max-height: 250px;\n    }\n    .content-img img{\n      width: 210px;\n      margin: 0 auto;\n      text-align: center;\n      display: block;\n      transition: transform 300ms ease-in-out;\n    }\n    div{\n      .hour{\n        position: relative;\n        width: 30px;\n        font-weight: 600;\n        color: #777;\n        float: right;\n        font-size: 11px;\n        right: -7px;\n        margin-top: 3px;\n      }\n    }\n  }\n"]);return W=function(){return e},e}var Y=N.a.div(W(),(function(e){return e.isImg?"40%":"60%"}),(function(e){return e.isIdUserLogged?"beige":"#f8f8f8"}),(function(e){return e.isIdUserLogged?"right":"left"}),(function(e){return e.preview?"static":"relative"}),(function(e){return!e.isIdUserLogged&&"\n        left: -10px;\n        right: inherit;\n        border-color: #f8f8f8 transparent transparent transparent;\n      "})),K=function(e){var n=e.isIdUserLogged,t=e.message,r=e.setUrlPreviewImage;return o.a.createElement(Y,{isIdUserLogged:n,"data-id-message":t._id,"data-js":!n&&"viewed:".concat(t.viewed),isImg:!1},t&&o.a.createElement("div",{className:"content-message"},t.imagePath&&o.a.createElement("div",{className:"content-img"},o.a.createElement("img",{onClick:function(){return r(t.imagePath)},src:t.imagePath,alt:""})),o.a.createElement("div",null,o.a.createElement("p",null,t.message),o.a.createElement("span",{className:"hour"},S(t.createdAt,"posts")))))};function Q(){var e=Object(P.a)(["\n  background: #d6d6c5;\n  width: 100%;\n  height: 100%;\n  padding: 5px 15px;\n  overflow-y: auto;\n  position: relative;\n  \n  ::-webkit-scrollbar {\n    width: 6px;\n    background: #F4F4F4;\n  }\n  ::-webkit-scrollbar-thumb {\n    -webkit-border-radius: 5px;\n    border-radius: 5px;\n    background:rgba(172, 167, 167, 0.8); \n  }\n"]);return Q=function(){return e},e}var Z=N.a.main(Q());function $(e){var n=function(e,n){if("object"!==typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"===typeof n?n:String(n)}function ee(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function ne(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ee(t,!0).forEach((function(n){Object(D.a)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ee(t).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var te={},re={},ae=0,oe=Object(c.b)((function(e){return{userInfo:e.userInfo,posts:e.posts.posts,pageActual:e.posts.page,totalPages:e.posts.totalPages,nextPage:e.posts.nextPage,messagesNotRead:e.posts.userActive.messagesNotRead}}),{newMessage:A,previousPosts:function(e,n){return function(){var t=Object(p.a)(l.a.mark((function t(r){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.get("conversation/messages/".concat(e,"/").concat(n));case 2:a=t.sent,r({type:"posts:PREVIOUS_POSTS",payload:{posts:a.data}});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var n=e.posts,t=e.userInfo,r=e.idConversation,i=e.containerChatRef,s=e.positionLine,c=e.messagesNotRead,u=e.pageActual,f=e.nextPage,m=e.previousPosts,g=e.totalPages,x=e.setUrlPreviewImage,w=Object(a.useState)(!1),E=Object(d.a)(w,2),O=(E[0],E[1],Object(a.useState)(!1)),y=Object(d.a)(O,2),j=(y[0],y[1],b()(v));Object(a.useEffect)((function(){if(c){var e=document.createElement("span");e.textContent="Mensagen(s) n\xe3o visualizada(s)",e.classList.add("warningMessage");var n=document.querySelectorAll('[data-js="viewed:false"]')[0],t=n.getBoundingClientRect().top;i.current.scrollTop=t-s+100,n.insertAdjacentElement("afterbegin",e)}else i.current.scrollTop=i.current.scrollHeight;j.on("newMessage",(function(){i.current.scrollHeight-i.current.scrollTop-100<600&&(i.current.scrollTop=i.current.scrollHeight),k()})),k()}),[r]);var k=function(){if(i.current.scrollHeight===i.current.clientHeight){var e=document.querySelectorAll('[data-js="viewed:false"]');e&&(Object.keys(re).forEach((function(n){e.forEach(function(){var e=Object(p.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.getBoundingClientRect().top<s&&h.emit("registerMessageViewed",n);case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())})),re={})}},S=function(){var e=Object(p.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.currentTarget.scrollTop<200)){e.next=6;break}if(!(u<g&&ae!==u)){e.next=6;break}return ae=u,e.next=5,m(r,f);case 5:return e.abrupt("return");case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),P=function(){var e=Object(p.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return te=ne({},te,Object(D.a)({},r,n.currentTarget.scrollTop)),Object.keys(re).length>0&&document.querySelectorAll('[data-js="viewed:false"]').forEach((function(e){if(re[e.getAttribute("data-id-message")]){var n=re[e.getAttribute("data-id-message")];if(e.getBoundingClientRect().top<s){var t=re,r=(t[n],Object(q.a)(t,[n].map($)));re=ne({},r),h.emit("registerMessageViewed",n)}}})),e.next=4,S(n);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return o.a.createElement(Z,{ref:i,onScroll:P},n[r].map((function(e){return function(e){e.idUser.toString()===t._id||e.viewed||(re=ne({},re,Object(D.a)({},e._id,e._id)))}(e),o.a.createElement(K,{setUrlPreviewImage:x,key:e._id,isIdUserLogged:e.idUser.toString()===t._id,message:e})})))})),ie=t(61);t(116);function se(){var e=Object(P.a)(["\n  position: absolute;\n  max-width: 100%;\n  width: 100%;\n  padding: 15px 0;\n  left: 0;\n  background: #eee;\n  bottom: 100%;\n  z-index: 10;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n\n  .header{\n    .close{\n      position: absolute;\n      right: 50px;\n      top: 10px;\n      font-size: 28px;\n      cursor: pointer;\n      color: #444;\n    }\n\n    .image-name{\n      margin-bottom: 20px;\n      font-weight: 600;\n    }\n  }\n\n  .img-content{\n    max-width: 45%;\n    max-height: 380px;\n    img{\n      max-width: 80%;\n      max-height: 380px;\n      width: 100%;\n    }\n  }\n"]);return se=function(){return e},e}function ce(){var e=Object(P.a)(["\n  background: #ddd;\n  padding: 5px 15px;\n  width: 100%;\n  height: 100px;\n  display: flex;\n  /* padding-bottom:15px; */\n  flex-wrap:wrap;\n  align-items: center;\n  position: relative;\n\n  .message-content{\n    textarea{\n      max-width: 400px;\n      resize: none;\n      overflow-x: hidden;\n      padding-left:12px;\n      padding-top:10px;\n      border-radius: 50px;\n      border: solid 1px #bbb;\n      outline:0;\n      @media (max-width: 900px) {\n        max-width: 320px;\n      }\n    }\n  }\n  .icons i{\n    font-size: 28px;\n    color: #3bb6e7;\n    margin-left: 10px;\n    cursor: pointer;\n  }\n  .icons .fa-laugh{\n    color: #999;\n  }\n  .btn-send{\n    margin-left: 8px;\n    a{\n      border-radius: 20px;\n      text-decoration:none;\n      background: #aaa;\n      color: #f8f8f8;\n      font-size: 18px;\n      padding: 10px 40px;\n      display: block;\n      letter-spacing: 0.8px;\n      font-weight: 600;\n    }\n  }\n"]);return ce=function(){return e},e}var ue=N.a.div(ce()),le=N.a.figure(se()),pe=Object(c.b)((function(e){return{userActive:e.posts.userActive,listConversations:e.listConversations}}),{loadingConversations:O})((function(e){var n=e.userActive,t=(e.loadingConversations,e.containerChatRef),r=Object(a.useState)(""),i=Object(d.a)(r,2),s=i[0],c=i[1],u=Object(a.useState)(!1),f=Object(d.a)(u,2),m=f[0],g=f[1],b=Object(a.useState)(null),v=Object(d.a)(b,2),h=v[0],x=v[1],E=function(){var e=Object(p.a)(l.a.mark((function e(r){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),!s&&!h){e.next=11;break}return(a=new FormData).append("userId",n._id),a.append("message",s),a.append("image",h||""),e.next=8,w.post("conversation/message",a);case 8:t.current&&(t.current.scrollTop=t.current.scrollHeight),c(""),x(null);case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return o.a.createElement(ue,null,h&&o.a.createElement(le,null,o.a.createElement("div",{className:"header"},o.a.createElement("div",{className:"image-name"},o.a.createElement("p",null,h.name)),o.a.createElement("div",{className:"close",onClick:function(){return x(null)}},o.a.createElement("i",{className:"fas fa-times"}))),o.a.createElement("div",{className:"img-content"},o.a.createElement("img",{src:URL.createObjectURL(h),alt:""}))),o.a.createElement("div",{className:"message-content"},m&&o.a.createElement(ie.a,{onSelect:function(e){var n=e.native;c(s+n)},set:"google",autoFocus:"true",style:{position:"absolute",bottom:"80px",left:0,zIndex:20,height:""}}),o.a.createElement("textarea",{cols:"50",rows:"2",placeholder:"Escreva uma mensagem",value:s,onChange:function(e){var n=e.target;return c(n.value)}})),o.a.createElement("input",{type:"file",name:"",id:"#file",hidden:!0,onChange:function(e){var n=e.target.files;return x(n[0])}}),o.a.createElement("div",{className:"icons"},o.a.createElement("i",{className:"far fa-laugh",onClick:function(){return g(!m)}}),o.a.createElement("label",{htmlFor:"#file"},o.a.createElement("i",{className:"fas fa-image"}))),o.a.createElement("div",{className:"btn-send"},o.a.createElement("a",{href:"/",onClick:E},"Enviar")))}));function de(){var e=Object(P.a)(["\n  max-width: 1060px;\n  height: 30px;\n  width: 100%;\n  position: absolute;\n  bottom:90px;\n  overflow: unset\n"]);return de=function(){return e},e}function fe(){var e=Object(P.a)(["\n  flex: 1 1 70%;\n  height: 90%;\n  display:flex;\n  flex-direction: column;\n  position: relative;\n  background-image: url('images/speech-bubble.svg');\n  background-repeat: no-repeat;\n  background-position-x: 70px;\n"]);return fe=function(){return e},e}var me,ge=N.a.div(fe()),be=N.a.div(de()),ve=Object(c.b)((function(e){return{userActive:e.posts.userActive}}),{newMessage:A,loadingConversations:O,updateMessageRead:function(e){var n=e.message,t=e.messagesNotRead;return function(e){e({type:"conversations:UPDATE_MESSAGES_NOT_READ",payload:{numberMessages:t,idConversation:n.conversation}}),e({type:"posts:MESSAGE_READ",payload:n})}}})((function(e){var n=e.userActive,t=e.newMessage,r=e.loadingConversations,i=e.updateMessageRead,s=Object(a.useState)(""),c=Object(d.a)(s,2),u=c[0],l=c[1],p=Object(a.useRef)(),f=Object(a.useRef)();return Object(a.useEffect)((function(){me=f.current.getBoundingClientRect().top,b()(v).on("newMessage",(function(e){t(e),r()})),h.on("messageRead",(function(e){i(e)}))}),[]),o.a.createElement(o.a.Fragment,null,u&&o.a.createElement("div",{className:"preview-image"},o.a.createElement("div",{className:"close-preview",onClick:function(){return l(!1)}},o.a.createElement("i",{className:"fas fa-times"})),o.a.createElement("figure",null,o.a.createElement("img",{src:u,alt:""}))),o.a.createElement(ge,null,n.hasOwnProperty("_id")&&o.a.createElement(oe,{positionLine:me,idConversation:n.idConversation,containerChatRef:p,setUrlPreviewImage:l}),o.a.createElement(be,{ref:f}),n.hasOwnProperty("_id")&&o.a.createElement(pe,{containerChatRef:p})))}));function he(){var e=Object(P.a)(["\n  position: absolute;\n  height: 120px;\n  width: 100%;\n  background: rgba(0, 0, 0, 0.5);\n  z-index: 6;\n  top: 50%;\n  transform: translateY(-50%);\n  color: #eee;\n\n  .close-modal{\n    position: absolute;\n    right: 10%;\n    top: 10px;\n    font-size: 26px;\n  }\n  .confirm-content{\n    padding-top:10px;\n    text-align:center;\n\n    h3{\n      letter-spacing: 0.7px;\n      margin-left: 5px;\n    }\n    i{\n      color: #eaf73b;\n      font-size: 26px;\n      margin-right: 10px;\n    }\n  }\n\n  .btn-actions{\n    margin-top: 20px;\n\n    .btn{\n      max-width: 160px;\n      width: 100%;\n      height: 30px;\n      text-transform: uppercase;\n      font-weight: 600;\n      border: 1px solid #aaa;\n      outline: 0;\n      cursor: pointer;\n      &:hover{\n        background: rgba(255, 255, 255, 0.6)\n      }\n    }\n    .btn.ok{\n      margin-left: 10px;\n      background: #7693D2;\n      color: #f8f8f8;\n      &:hover{\n        background: rgba(118, 147, 210, 0.8);\n      }\n    }\n  }\n"]);return he=function(){return e},e}var xe=N.a.div(he()),we=function(e){var n=e.setIsShowConfirm,t=e.deleteConversation;return o.a.createElement(xe,null,o.a.createElement("div",{className:"close-modal",onClick:function(){return n(!1)}},o.a.createElement("i",{className:"fas fa-times"})),o.a.createElement("div",{className:"confirm-content"},o.a.createElement("h4",null,o.a.createElement("i",{className:"fas fa-exclamation-triangle"}),"Deseja realmente excluir o contato? Todas as mensagens ser\xe3o apagadas. ",o.a.createElement("br",null),"Deseja realmente continuar?"),o.a.createElement("div",{className:"btn-actions"},o.a.createElement("button",{className:"btn cancel",onClick:function(){return n(!1)}},"Cancelar"),o.a.createElement("button",{className:"btn ok",onClick:function(){return t()}},"Excluir"))))};function Ee(){var e=Object(P.a)(["\nposition: relative;\nflex: 1 1 25%;\n@media (max-width: 930px) {\n  /* min-width: 500px; */\n  /* flex: 0;    */\n}\n.content{\n  z-index: 5;\n  position: relative;\n  height: 100%;\n  background: #ffffef;\n  /* height: 90%; */\n  overflow-y: auto;\n  border-left: solid 1px #bbb;\n    /* @media (max-width: 930px) {\n      transform: translateX(110%);\n      height: 100%;\n      position: absolute;\n      right: 0;\n      bottom: 0;\n    } */\n  }\n"]);return Ee=function(){return e},e}var Oe=N.a.section(Ee()),ye=Object(c.b)((function(e){return{listConversations:e.listConversations}}),{cleanPosts:function(e){var n=e.idConversation,t=e.idUser;return function(){var e=Object(p.a)(l.a.mark((function e(r){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.delete("conversation/".concat(n,"/").concat(t));case 2:r({type:"posts:CLEAN_POSTS_USER",payload:n});case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},loadingConversations:O})((function(e){var n=e.listConversations,t=e.cleanPosts,r=e.loadingConversations,i=Object(a.useState)(!1),s=Object(d.a)(i,2),c=s[0],u=s[1],f=Object(a.useState)({}),m=Object(d.a)(f,2),g=m[0],b=m[1],v=function(){var e=Object(p.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(g);case 2:r(),u(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return o.a.createElement(o.a.Fragment,null,c&&o.a.createElement(we,{deleteConversation:v,setIsShowConfirm:u}),o.a.createElement(Oe,null,o.a.createElement("div",{className:"content"},o.a.createElement("ul",{className:"list-conversas"},n.contacts.map((function(e){return o.a.createElement(z,{key:e.user._id,userChat:e.user,lastUpdate:e.updatedAt,idConversation:e.idConversation,messagesNotRead:e.messagesNotRead,setDeleteUser:b,setIsShowConfirm:u})}))))))}));function je(){var e=Object(P.a)(["\n  text-align: center;\n  width: 100%;\n  max-width: 350px;\n  margin: 0 auto;\n\n  .error{\n    color: red;\n    display: block;\n    margin-bottom: 10px;\n  }\n  .group-input{\n    margin-bottom: 15px;\n    position: relative;\n\n    &:before{\n      content: '*';\n      color: red;\n      position: absolute;\n      display: block;\n      left: -10px;\n    }\n  }\n  input{\n    width: 100%;\n    max-width: 350px;\n    padding: 8px 5px;\n  }\n  .btn-actions{\n    margin: 0 auto;\n    align-items: center;\n    display: flex;\n    max-width: 350px;\n    \n    .fa-arrow-left{\n      margin-right: 5px;\n    }\n  }\n  .btn{\n    height: 45px;\n    text-transform: uppercase;\n    font-weight: 600; \n    width: 100%;\n    border: 1px solid #aaa;\n    outline: none;\n    cursor: pointer;\n\n  }\n  .sign-in{\n    background: rgba(89, 125, 204, 0.8);\n    color: #f8f8f8;\n    &:hover{\n      background: rgba(89, 125, 204, 0.6);\n    }\n  }\n  .sign-up{\n    &:hover{\n      background: rgba(0, 0, 0, 0.1);\n      color: #444;\n    }\n  }\n\n"]);return je=function(){return e},e}var ke=N.a.form(je()),Se=function(e){var n=e.submit,t=e.signUp,r=e.setIsSignIn,a=e.messageError;return o.a.createElement(ke,{onSubmit:n},o.a.createElement("span",{className:"error"},a),t&&o.a.createElement("div",{className:"group-input"},o.a.createElement("input",{type:"text",name:"name",placeholder:"Digite seu nome completo"})),o.a.createElement("div",{className:"group-input"},o.a.createElement("input",{type:"email",name:"email",placeholder:"Digite seu email"})),o.a.createElement("div",{className:"group-input"},o.a.createElement("input",{type:"password",name:"password",placeholder:"Digite sua senha"})),t&&o.a.createElement("div",{className:"group-input"},o.a.createElement("input",{type:"password",name:"confirmPassword",placeholder:"Confirme sua senha"})),o.a.createElement("div",{className:"btn-actions"},o.a.createElement("button",{onClick:function(){return r(!!t)},className:"btn sign-up",type:"button"},t?o.a.createElement("span",null,o.a.createElement("i",{className:"fas fa-arrow-left"}),"Voltar"):"Cadastre-se"),o.a.createElement("button",{className:"btn sign-in"},t?"Cadastre-se":"Login")))},Pe=Object(c.b)(null,{loginUser:k})((function(e){var n=e.loginUser,t=e.setIsSignIn,r=e.messageError,i=e.setMessageError;Object(a.useEffect)((function(){i("")}),[]);var s=function(){var e=Object(p.a)(l.a.mark((function e(t){var r,a,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r=t.target,a=r.email,o=r.password,a.value&&o.value){e.next=5;break}return i("Preencha os campos corretamente!"),e.abrupt("return",!1);case 5:return e.next=7,n(a.value,o.value);case 7:window.location.reload();case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return o.a.createElement(Se,{submit:s,setIsSignIn:t,messageError:r})})),Ne=Object(c.b)(null,{loginUser:k})((function(e){var n=e.setIsSignIn,t=e.messageError,r=e.setMessageError,i=e.loginUser;Object(a.useEffect)((function(){r("")}),[]);var s=function(){var e=Object(p.a)(l.a.mark((function e(n){var t,a,o,s,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),t=n.target,a=t.name,o=t.email,s=t.password,c=t.confirmPassword,a.value&&o.value&&s.value&&c.value){e.next=5;break}return r("Todos os campos s\xe3o obrigat\xf3rios!"),e.abrupt("return",!1);case 5:if(s.value===c.value){e.next=8;break}return r("Senhas diferentes!"),e.abrupt("return",!1);case 8:return e.prev=8,e.next=11,w.post("auth/register",{name:a.value,email:o.value,password:s.value});case 11:return e.next=13,i(o.value,s.value);case 13:window.location.reload(),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(8),r("Ocorreu um erro ao tentar se cadastrar!");case 19:case"end":return e.stop()}}),e,null,[[8,16]])})));return function(n){return e.apply(this,arguments)}}();return o.a.createElement(Se,{submit:s,setIsSignIn:n,signUp:!0,messageError:t})}));function Ce(){var e=Object(P.a)(["\n  background: #ddd;\n  height: 100%;\n  width: 100%;\n\n  header{\n    text-align:center;\n\n    .logo{\n      font-size: 7.5em;\n      color: rgba(89, 125, 204, 0.8);\n      p{\n        font-size: 20px;\n      }\n    }\n    .login{\n      color: #444;\n      font-style: italic;\n      font-size: 1.4em;\n    }\n  }\n"]);return Ce=function(){return e},e}var Ie=N.a.section(Ce()),_e=function(){var e=Object(a.useState)(!0),n=Object(d.a)(e,2),t=n[0],r=n[1],i=Object(a.useState)(""),s=Object(d.a)(i,2),c=s[0],u=s[1];return o.a.createElement(Ie,null,o.a.createElement("header",null,o.a.createElement("div",{className:"logo"},o.a.createElement("i",{className:"fas fa-comments"}),o.a.createElement("p",null,"Chat")),o.a.createElement("div",{className:"login"},o.a.createElement("h1",null,t?"Login":"Cadastro"))),t?o.a.createElement(Pe,{setIsSignIn:r,messageError:c,setMessageError:u}):o.a.createElement(Ne,{setIsSignIn:r,messageError:c,setMessageError:u}))};function De(){var e=Object(P.a)(["\n  max-width: 1160px;\n  width: 100%;\n  height: 78vh;\n  border: 1px solid #bbb;\n  margin: 40px auto;\n  display: flex;\n  flex-wrap: wrap;\n  border-radius: 8px;\n  overflow: hidden;\n  position: relative;\n\n  @media (max-height:670px){\n    height: 85vh\n  }\n  .preview-image{\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    background: #f8f8f8;\n    z-index: 10;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    figure{\n      width: 100%;\n      img{\n        margin: 20px auto;\n        display: block;\n        max-width: 70%;\n        max-height: 500px;\n      }\n    }\n  }\n"]);return De=function(){return e},e}var Ae,Ue=N.a.div(De()),Re=Object(c.b)((function(e){return{userInfo:e.userInfo,userActive:e.posts.userActive}}),{updateStatus:y,loadingConversations:O,loginUser:k,getInfoUserLogged:function(){return function(){var e=Object(p.a)(l.a.mark((function e(n){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.get("/user");case 2:t=e.sent,clearInterval(r),r=setInterval((function(){j.emit("online",t.data._id)}),2e3),n({type:"user:LOGIN_USER",payload:t.data});case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()}})((function(e){var n=e.userInfo,t=e.loadingConversations,r=e.userActive,i=e.updateStatus,s=e.getInfoUserLogged,c=Object(a.useState)(null),u=Object(d.a)(c,2),f=u[0],m=u[1],g=Object(a.useState)(!1),b=Object(d.a)(g,2),v=b[0],x=b[1];return Object(a.useEffect)((function(){(function(){var e=Object(p.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:JSON.parse(localStorage.getItem("@chat@"))?(m(!0),s(),t()):m(!1);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(a.useEffect)((function(){r.hasOwnProperty("_id")&&(clearInterval(Ae),Ae=setInterval((function(){h.emit("verifyStatus",r._id)}),3e3))}),[r]),Object(a.useEffect)((function(){v||(i(),x(!0))}),[r]),n._id&&window.addEventListener("beforeunload",(function(){return h.emit("off",n._id),""})),o.a.createElement(Ue,null,!1===f&&o.a.createElement(_e,null),f&&o.a.createElement(o.a.Fragment,null,o.a.createElement(X,{socket:h}),o.a.createElement(ve,null),o.a.createElement(ye,null)))}));var Le=function(){return o.a.createElement("div",{className:"App"},o.a.createElement(Re,null))},Te=(t(117),t(10)),ze=t(35);function Me(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Fe(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Me(t,!0).forEach((function(n){Object(D.a)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Me(t).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Ge={serachUsers:[]},Ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"user:LOGIN_USER":return Fe({},e,{},n.payload);case"user:SEARCH_USER":return Fe({},e,{serachUsers:n.payload});case"user:UPDATE_IMAGE_PROFILE":return Fe({},e,{imageProfile:n.payload});default:return e}},He=t(36);function Be(e){var n=function(e,n){if("object"!==typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"===typeof n?n:String(n)}function Je(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Xe(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Je(t,!0).forEach((function(n){Object(D.a)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Je(t).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var qe={posts:{},userActive:{}},We=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"posts:LOADING_POSTS":var t=n.payload,r=t.userActive,a=t.posts;return Xe({},e,{},a,{posts:Xe({},e.posts,Object(D.a)({},a.idConversation,a.posts)),userActive:r});case"posts:PREVIOUS_POSTS":var o=n.payload.posts;return Xe({},e,{},n.payload.posts,{posts:Xe({},e.posts,Object(D.a)({},o.idConversation,[].concat(Object(He.a)(o.posts),Object(He.a)(e.posts[o.idConversation]))))});case"posts:NEW_MESSAGE":var i=n.payload.conversation;return Xe({},e,{posts:Xe({},e.posts,Object(D.a)({},i,e.posts[i]?e.posts[i].concat(n.payload):[n.payload]))});case"posts:CLEAN_POSTS_USER":var s=e.posts,c=n.payload,u=(s[c],Object(q.a)(s,[c].map(Be)));return{posts:Xe({},u),userActive:{}};case"posts:MESSAGE_READ":var l=n.payload,p=l._id,d=l.conversation;return Xe({},e,{posts:Xe({},e.posts,Object(D.a)({},d,e.posts[d].map((function(e){return e._id===p?Xe({},n.payload):e}))))});default:return e}};function Ye(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Ke(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Ye(t,!0).forEach((function(n){Object(D.a)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ye(t).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Qe,Ze={contacts:[],status:{}},$e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"conversations:LOADING_CONVERSATIONS":return Ke({},e,{contacts:n.payload});case E:return Ke({},e,{status:n.payload});case"conversations:UPDATE_MESSAGES_NOT_READ":return Ke({},e,{contacts:e.contacts.map((function(e){return e.idConversation===n.payload.idConversation?Ke({},e,{messagesNotRead:n.payload.numberMessages}):e}))});default:return e}},en=Object(Te.c)({userInfo:Ve,posts:We,listConversations:$e}),nn=function(){return window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()};Qe=nn()?Object(Te.d)(Object(Te.a)(ze.a),nn()):Object(Te.d)(Object(Te.a)(ze.a));var tn=Object(Te.e)(en,{},Qe);t(118);s.a.render(o.a.createElement(c.a,{store:tn},o.a.createElement(Le,null)),document.getElementById("root"))},64:function(e,n,t){e.exports=t(119)}},[[64,1,2]]]);
//# sourceMappingURL=main.bc7e4f5d.chunk.js.map