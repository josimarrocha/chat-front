(window["webpackJsonpfront-end"]=window["webpackJsonpfront-end"]||[]).push([[0],{145:function(e,n){},150:function(e,n,t){},152:function(e,n,t){"use strict";t.r(n);var a,r=t(0),o=t.n(r),i=t(20),s=t.n(i),c=t(7),u=t(2),l=t.n(u),p=t(3),d=t(6),f=t(29),m=t(41),g=t.n(m),b=t(16),v=t.n(b),h="https://api-chat-back.herokuapp.com/",x=v()(h),w=JSON.parse(localStorage.getItem("@chat@")),E=w?g.a.create({baseURL:h,headers:{Authorization:"Bearer ".concat(w.hasOwnProperty("token")?w.token:"")}}):g.a.create({baseURL:h}),O="convertation:USER_STATUS",y=function(){return function(){var e=Object(p.a)(l.a.mark((function e(n){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.get("/conversations");case 2:t=e.sent,a=t.data,n({type:"conversations:LOADING_CONVERSATIONS",payload:a});case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},j=function(e){return function(n){e?n({type:O,payload:{}}):x.on("status",(function(e){n({type:O,payload:e})}))}},k=v()(h),S=function(e,n){return function(){var t=Object(p.a)(l.a.mark((function t(a){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={data:""},t.next=3,E.post("/auth/sign-in",{email:e,password:n});case 3:r=t.sent,localStorage.setItem("@chat@",JSON.stringify({token:r.data.token})),a({type:"user:LOGIN_USER",payload:r.data});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},N=function(e){return function(){var n=Object(p.a)(l.a.mark((function n(t){var a;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(""===e){n.next=4;break}return n.next=3,E.get("/users/".concat(e));case 3:a=n.sent;case 4:t({type:"user:SEARCH_USER",payload:a?a.data:[]});case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},C=function(e,n){var t=new Date(e).getHours(),a=new Date(e).getMinutes();a=a<10?"0".concat(a):a,t=t<10?"0".concat(t):t;var r=new Date(e).getDate(),o=new Date(e).getMonth(),i=new Date(e).getFullYear();return"posts"===n?"".concat(t,":").concat(a):r===(new Date).getDate()?"".concat(t,":").concat(a):(new Date).getDate()-r>1||(new Date).getMonth()+1>o+1?"".concat(r<10?"0".concat(r):r,"/").concat(o<10?"".concat(o+1):o,"/").concat(i):(new Date).getDate()-r===1&&"list"===n?"Ontem":"Ontem ".concat(t,":").concat(a)},P=t(4),I=t(5);function _(){var e=Object(P.a)(["\n  width: 170px;\n  background: #f1f1f1;\n  position: absolute;\n  top: 60px;\n  left: 0px;\n  border: solid 1px #bbb;\n  color: #666;\n  list-style-type: none;\n  z-index: 14;\n  li{\n    font-size: 15px;\n    font-weight: 600;\n    text-align: center;\n    height: 30px;\n    border-bottom: 1px solid #bbb;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    cursor: pointer;\n\n    label{\n      width: 100%;\n      display: inline-block;\n      padding-top: 5px;\n      height: 100%;\n      cursor: pointer;\n    }\n\n    &:hover{\n      background: #ddd;\n    }\n  }\n"]);return _=function(){return e},e}var U=I.a.ul(_()),D=function(e){var n=e.setFileImage,t=e.setShowInpurtUpdateName,a=Object(r.useRef)();Object(r.useEffect)((function(){a.current.focus()}),[]);return o.a.createElement(o.a.Fragment,null,o.a.createElement(U,{ref:a},o.a.createElement("li",{onClick:function(){return t(!0)}},"Alterar nome do perfil"),o.a.createElement("li",null,o.a.createElement("input",{type:"file",id:"#file",hidden:!0,onChange:function(e){var t=e.target.files;return n(t[0])}}),o.a.createElement("label",{htmlFor:"#file"},"Alterar imagem")),o.a.createElement("li",{onClick:function(){localStorage.removeItem("@chat@"),window.location.reload()}},"Logout")))},A=t(10),R=function(e){return function(){var n=Object(p.a)(l.a.mark((function n(t){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t({type:"posts:NEW_MESSAGE",payload:e});case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()};function T(){var e=Object(P.a)(["\n  align-items:center;\n  background: #eee;\n  border-bottom: 1px solid #ddd;\n  cursor: pointer;\n  display: flex;\n  padding: 2px 5px;\n  height: 60px;\n  transition: background 200ms linear;\n  position: relative;\n  width: 100%;\n  &:hover{\n    background: #ddd;\n  }  \n  &:hover .btn-user-options{\n    display: block;\n  }\n\n  .user-image{\n    width: 40px;\n    img{\n      border-radius: 50%;\n      width: 100%;\n      max-width: 100%;\n    }\n  }\n\n  .user-info{\n    margin-left: 10px;\n    color: #666;\n    width: 70%;\n    letter-spacing: 0.6px;\n\n    p{\n     font-size: 12px; \n    }\n  }\n  .messages-not-read{\n    position: absolute;\n    background:rgba(89, 125, 204, 0.9);\n    width: 22px;\n    height: 22px;\n    max-height: 25px;\n    font-size: 14px;\n    padding-top: 3px ;\n    border-radius: 50%;\n    color: #F8f8f8;\n    left:25px;\n    text-align: center;\n    bottom: 1px;\n  }\n  .last-update{\n    position: absolute;\n    right: 10px;\n    top:6px;\n    font-size: 13px;\n    color: #777;\n    z-index: 8;\n  }\n  .btn-user-options{\n    position: absolute;\n    right: 10px;\n    bottom: 7px;\n    display: none;\n    z-index: 14;\n    width: 60px;\n  \n    i{\n      margin-left: 15px;\n      color: #888;\n      border-radius: 50%;\n      padding: 6px 12px;\n      transition: background 200ms ease-in;\n      &:hover{\n        background: rgba(0, 0, 0, 0.1);\n      }\n    }\n    .user-options{\n      width:160px;\n      position: absolute;\n      right: 28px;\n      background: #EEEEEE;\n      border-radius: 4px;\n      border: solid 1px #bbb;\n      z-index: 15;\n    }\n    li{\n      padding: 8px 5px 8px 10px;\n      border-bottom: 1px solid #bbb;\n    }\n  }\n\n  .add-chat a{\n    display: block;\n    text-decoration: none;\n    background: #7693D2;\n    color: #f8f8f8;\n    margin-top: 3px;\n    margin-bottom: 3px;\n    padding: 3px;\n    border-radius: 4px;\n    text-align: center;\n    width: 150px;\n  }\n"]);return T=function(){return e},e}var L=I.a.li(T());function z(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function M(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?z(t,!0).forEach((function(n){Object(A.a)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):z(t).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var F=Object(c.b)((function(e){return{listConversations:e.listConversations,userActive:e.posts.userActive,posts:e.posts.posts}}),{loadingPosts:function(e){return function(){var n=Object(p.a)(l.a.mark((function n(t){var a;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.idConversation){n.next=4;break}return n.next=3,E.get("conversation/messages/".concat(e.idConversation,"/1"));case 3:a=n.sent;case 4:t({type:"posts:LOADING_POSTS",payload:{posts:a?a.data:{messages:[],_id:e.idConversation},userActive:e}});case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},updateStatus:j})((function(e){var n=e.userChat,t=e.loadingPosts,a=e.search,i=e.listConversations,s=e.lastUpdate,c=e.updateStatus,u=e.userActive,f=e.posts,m=e.messagesNotRead,g=e.setIsShowConfirm,b=e.setDeleteUser,v=e.idConversation,h=e.setShowList,x=Object(r.useState)(!1),w=Object(d.a)(x,2),O=w[0],y=w[1],j=function(){var e=Object(p.a)(l.a.mark((function e(a){var r,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("teste"),i.contacts.some((function(e){return e.user._id===a}))){e.next=14;break}return e.next=5,E.post("/create/conversation",{userId:a});case 5:return r=e.sent,o=r.data,e.next=9,t(M({},n,{idConversation:o.idConversation}));case 9:if(!u.hasOwnProperty("_id")){e.next=14;break}if(u._id!==a){e.next=12;break}return e.abrupt("return",!1);case 12:return c(!0),e.abrupt("return",!0);case 14:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),k=function(){var e=Object(p.a)(l.a.mark((function e(a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u.hasOwnProperty("_id")){e.next=4;break}return e.next=3,t(M({},n,{idConversation:a,messagesNotRead:m}));case 3:return e.abrupt("return",!1);case 4:if(!u.hasOwnProperty("_id")){e.next=10;break}if(u._id.toString()!==n._id.toString()||!f[a]){e.next=7;break}return e.abrupt("return",!1);case 7:return e.next=9,t(M({},n,{idConversation:a,messagesNotRead:m}));case 9:c(!0);case 10:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return o.a.createElement(L,{onClick:function(){0===i.contacts.length?j(n._id):i.contacts.every((function(e){return e.user._id===n._id?k(e.idConversation):j(n._id)})),a&&h(!1)}},o.a.createElement("div",{className:"user-image"},o.a.createElement("img",{src:n.imageProfile?n.imageProfile:"images/userDefault.png",alt:""})),o.a.createElement("div",{className:"user-info"},o.a.createElement("div",{className:"user-name"},o.a.createElement("h4",null,n.name.length>=18?n.name.substring(0,18)+"...":n.name),o.a.createElement("p",null,n.username),!a&&!!m&&o.a.createElement("span",{className:"messages-not-read"},m))),!a&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"last-update"},o.a.createElement("span",null,C(s,"list"))),o.a.createElement("div",{className:"btn-user-options",onClick:function(){return y(!O)},onMouseLeave:function(){return y(!1)}},o.a.createElement("i",{className:"fas fa-ellipsis-v"}),O&&o.a.createElement("ul",{className:"user-options"},o.a.createElement("li",{onClick:function(){g(!0),b({idUser:n._id,idConversation:v})}},"Excluir mensagens")))))}));function G(){var e=Object(P.a)(["\n  flex: 3;\n  display: flex;\n  align-items: center;\n\n  form{\n    width: 60%;\n    position: relative;\n    \n    input{\n      width: 100%;\n      padding: 5px 3px;\n      border-top-left-radius: 5px;\n      border-bottom-left-radius: 3px;\n      border-top-right-radius: 5px;\n      border-bottom-right-radius: 3px;\n      border: none;\n      outline: 0;\n    }\n    ul{\n      box-shadow: 1px 1px 5px #999;\n      width: 100%;\n      position: absolute;\n      z-index: 12;\n    }\n  }\n"]);return G=function(){return e},e}var V=I.a.div(G()),B=Object(c.b)((function(e){return{searchUsers:e.userInfo.serachUsers}}),{searchUser:N})((function(e){var n=e.searchUsers,t=e.searchUser,a=Object(r.useState)(!1),i=Object(d.a)(a,2),s=i[0],c=i[1],u=Object(r.useRef)();return o.a.createElement(V,null,o.a.createElement("form",{action:""},o.a.createElement("input",{type:"text",ref:u,className:"input-search",onFocus:function(){return c(!0)},onBlur:function(){return u.current.value=""},placeholder:"Pesquisar usu\xe1rios",name:"input",autoComplete:"off",onChange:function(){var e=u.current.value;t(e)}}),s&&o.a.createElement("ul",null,n.map((function(e){return o.a.createElement(F,{key:"search:".concat(e._id),search:!0,userChat:e,setShowList:c})})))))}));function H(){var e=Object(P.a)(["\n  width: 100%;\n  position: absolute;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.6);\n  z-index: 20;\n  top: 0;\n  left: 0;\n  form{\n    max-width: 350px;\n    width: 100%;\n    margin: 250px auto;\n     \n    .form-group input{\n      width: 100%;\n      /* height: 35px; */\n      padding: 8px 5px;\n    }\n\n    .action{\n      \n    }\n  }\n"]);return H=function(){return e},e}function X(){var e=Object(P.a)(["\n    margin: 0 auto;\n    align-items: center;\n    display: flex;\n    max-width: 350px;\n    padding-top: 20px;\n\n    .btn{\n      height: 40px;\n      text-transform: uppercase;\n      font-weight: 600; \n      width: 100%;\n      border: 1px solid #aaa;\n      outline: none;\n      cursor: pointer;\n\n      &:first-child{\n        margin-right: 10px;\n        background: rgba(89, 125, 204, 0.8);\n        color: #f8f8f8;\n        &:hover{\n          background: rgba(89, 125, 204, 0.6);\n        }\n      }\n    }\n"]);return X=function(){return e},e}function q(){var e=Object(P.a)(["\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.5);\n  top: 0;\n  left:0;\n  z-index: 15;\n\n  .close-preview{\n    color:white;\n    right: 250px;\n  }\n  .image-content{\n    display: flex;\n    justify-content: center;\n    width: 100%;\n    figure{\n      margin-top: 50px;\n      img{\n        display: block;\n        width:100%;\n        max-width:400px;\n      }\n    }\n  }\n"]);return q=function(){return e},e}function J(){var e=Object(P.a)(["\n  width:100%;\n  background: rgba(89, 125, 204, 0.8);\n  height: 70px;\n  border-bottom: 1px solid #bbb;\n  padding: 5px 10px;\n  display: flex;\n  border-top-left-radius: 8px;\n  border-top-right-radius: 8px;\n  justify-content: space-between;\n  \n  .user-logged > div, .user-conversation{\n    display: flex;\n    align-items:center;\n    color: #f2f2f2;\n    position: relative;\n    flex: 2;\n  }\n  .user-conversation{\n    flex: 2;\n  }\n  .user-logged > div{\n    justify-content: flex-end;\n    height: 100%;\n    i {\n      margin-right: 15px;\n      margin-left: 15px;\n    }\n  }\n  .user-logged{\n    position: relative;\n  }\n  .user-logged > div:hover{\n    cursor: pointer;\n    background: rgba(89, 125, 204, 0.5);\n  }\n  .user-img{\n    width: 60px;\n    img{\n      background: white;\n      ::selection{\n        background: transparent;\n      }\n      border-radius: 50%;\n      max-width:100%;\n    }\n  }\n  .user-img.conversation{\n    width: 40px;\n    float:right;\n  }\n  .user-info.logged{\n    margin-right: 10px;\n  }\n  .user-info.conversation{\n    margin-left: 10px;\n    p{\n      font-size: 14px;\n    }\n    .user-status{\n      position: relative;\n      margin-left: 4px;\n      letter-spacing: 0.6px;\n      &::before{\n        content: '';\n        position: relative;\n        top:3px;\n        right: 5px;\n        display: inline-block;\n        width: 15px;\n        height: 15px;\n        border-radius: 50%;\n        background: #4fdb66;\n      }\n    }\n  }\n"]);return J=function(){return e},e}var W,Y=I.a.header(J()),K=I.a.div(q()),Q=I.a.div(X()),Z=I.a.div(H()),$=Object(c.b)((function(e){return{userInfo:e.userInfo,status:e.listConversations.status,userActive:e.posts.userActive}}),{updateImageProfile:function(e){return function(){var n=Object(p.a)(l.a.mark((function n(t){var a,r;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,E.put("users/imageProfile",e);case 2:a=n.sent,r=a.data.newImage,t({type:"user:UPDATE_IMAGE_PROFILE",payload:r});case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},updateNameUser:function(e){return function(){var n=Object(p.a)(l.a.mark((function n(t){var a,r;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,E.put("/user",{name:e});case 2:a=n.sent,r=a.data.newName,t({type:"user:UPDATE_NAME_USER",payload:r});case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}})((function(e){var n=e.userInfo,t=e.userActive,a=e.status,i=e.updateImageProfile,s=e.updateNameUser,c=Object(r.useState)(!1),u=Object(d.a)(c,2),f=u[0],m=u[1],g=Object(r.useState)(!1),b=Object(d.a)(g,2),v=b[0],h=b[1],w=Object(r.useState)(!1),E=Object(d.a)(w,2),O=E[0],y=E[1],j=Object(r.useState)(!1),k=Object(d.a)(j,2),S=k[0],N=k[1];Object(r.useEffect)((function(){t._id&&x.on("typing",(function(e){e.idUser===t._id&&e.idConversation===t.idConversation&&(clearTimeout(W),N(!0),W=setTimeout((function(){N(!1)}),1e3))}))}),[t._id]);var P=function(){var e=Object(p.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O&&((n=new FormData).append("imageProfile",O),i(n),I());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){y(null),m(!1)};return o.a.createElement(Y,{className:"header-info"},O&&o.a.createElement(K,null,o.a.createElement("div",{className:"close-preview",onClick:I},o.a.createElement("i",{className:"fas fa-times"})),o.a.createElement("div",{className:"image-content"},o.a.createElement("figure",null,o.a.createElement("img",{src:window.URL.createObjectURL(O),alt:""}))),o.a.createElement(Q,null,o.a.createElement("button",{className:"btn",onClick:P},"Confirmar"),o.a.createElement("button",{className:"btn",onClick:I},"Cancelar"))),v&&o.a.createElement(Z,null,o.a.createElement("form",{action:"",onSubmit:function(e){e.preventDefault();var n=e.target.newName.value;""!==n&&(s(n),h(!1),m(!1))}},o.a.createElement("div",{className:"form-group"},o.a.createElement("input",{type:"text",name:"newName",defaultValue:n.name,placeholder:"Digite um novo nome para o perfil"})),o.a.createElement(Q,null,o.a.createElement("button",{className:"btn"},"Alterar"),o.a.createElement("button",{className:"btn",onClick:function(){return h(!1)}},"Cancelar")))),o.a.createElement("div",{className:"user-conversation"},t.hasOwnProperty("_id")&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"user-img conversation"},o.a.createElement("img",{src:t.imageProfile?t.imageProfile:"images/userDefault.png",alt:""})),o.a.createElement("div",{className:"user-info conversation"},t&&o.a.createElement("h4",null,t.name),t&&o.a.createElement("p",null,t.username),function(){if(a.hasOwnProperty("_id"))return a.status?o.a.createElement("small",{className:"user-status"},o.a.createElement("b",null,S?"Digitando...":"Online")):o.a.createElement("small",{style:{fontSize:11}},o.a.createElement("b",null,"Visto por \xfaltimo ",C(a.updatedAt)))}()))),o.a.createElement(B,null),o.a.createElement("div",{className:"user-logged"},o.a.createElement("div",{onClick:function(){return setTimeout((function(){return m(!f)}),100)}},o.a.createElement("i",{className:"fas fa-sort-down"}),o.a.createElement("div",{className:"user-info logged"},n.name&&o.a.createElement("h3",null,n.name),n.email&&o.a.createElement("p",null,n.email)),o.a.createElement("div",{className:"user-img logged"},o.a.createElement("img",{src:n.imageProfile?n.imageProfile:"images/userDefault.png",alt:""}))),f&&o.a.createElement(D,{setFileImage:y,setIsMenuVisible:m,setShowInpurtUpdateName:h})))})),ee=t(153),ne=t(31),te=t(154);function ae(){var e=Object(P.a)(["\n  clear: both;\n  position: relative;\n\n .warningMessage{\n    text-align: center;\n    font-weight: bold;\n    font-size: 13px;\n    color: #888;\n    width: fit-content;\n    background: #dcdcdc;\n    border-bottom: 1px solid #bbb;\n    display: block;\n    padding: 5px;\n    border-radius: 5px;\n    margin: 0 auto;\n  } \n\n  .content-message{\n    width: fit-content;\n    min-width:40px;\n    max-width: ",";\n    background: ",";\n    margin-bottom: 5px;\n    border-radius: 6px;\n    padding: 5px 8px;\n    z-index: 2;\n    float: ",";\n    display: flex;\n    flex-direction: column;\n    box-shadow: 0 0 15px #aaa;\n    position: ",";\n\n    &::after{\n      content: '';\n      position: absolute;\n      border-width: 10px;\n      border-color: beige transparent transparent transparent;\n      border-style: solid;\n      top:0;\n      right: -10px;\n      ","\n    }\n\n    .content-img{\n      width: 100%;\n      overflow: hidden;\n      max-width: 100%;\n      max-height: 250px;\n      cursor: pointer;\n    }\n    .content-img img{\n      width: 210px;\n      margin: 0 auto;\n      text-align: center;\n      display: block;\n      transition: transform 300ms ease-in-out;\n    }\n    div{\n      .hour{\n        position: relative;\n        width: 30px;\n        font-weight: 600;\n        color: #777;\n        float: right;\n        font-size: 11px;\n        right: -7px;\n        margin-top: 3px;\n      }\n    }\n  }\n"]);return ae=function(){return e},e}var re=I.a.div(ae(),(function(e){return e.isImg?"40%":"60%"}),(function(e){return e.isIdUserLogged?"beige":"#f8f8f8"}),(function(e){return e.isIdUserLogged?"right":"left"}),(function(e){return e.preview?"static":"relative"}),(function(e){return!e.isIdUserLogged&&"\n        left: -10px;\n        right: inherit;\n        border-color: #f8f8f8 transparent transparent transparent;\n      "})),oe=function(e){var n=e.isIdUserLogged,t=e.message,a=e.setUrlPreviewImage;return o.a.createElement(re,{isIdUserLogged:n,"data-id-message":t._id,"data-js":!n&&"viewed:".concat(t.viewed),isImg:!1},t&&o.a.createElement("div",{className:"content-message"},t.imagePath&&o.a.createElement("div",{className:"content-img"},o.a.createElement("img",{onClick:function(){return a(t.imagePath)},src:t.imagePath,alt:""})),o.a.createElement("div",null,o.a.createElement("p",null,t.message),o.a.createElement("span",{className:"hour"},C(t.createdAt,"posts")))))};function ie(){var e=Object(P.a)(["\n  background: #d6d6c5;\n  width: 100%;\n  height: 100%;\n  padding: 5px 15px;\n  overflow-y: auto;\n  position: relative;\n  opacity: 0;\n  transition: opacity 50ms linear;\n  flex: 5;\n  \n  ::-webkit-scrollbar {\n    width: 6px;\n    background: #F4F4F4;\n  }\n  ::-webkit-scrollbar-thumb {\n    -webkit-border-radius: 5px;\n    border-radius: 5px;\n    background:rgba(172, 167, 167, 0.8); \n  }\n\n  .messages-enter {\n    opacity: 0;\n    position: absolute;\n    transform: translateX(-40px);\n  }\n  .messages-enter-active {\n    opacity: 1;\n    transition: opacity 300ms ease-in;\n    transform: translateX(0%);\n    transition: transform 300ms ease-in;\n    position: relative;\n  }\n  .messages-exit {\n    /* opacity: 1; */\n  }\n  .messages-exit-active {\n    /* opacity: 0; */\n    /* transition: opacity 200ms ease-out; */\n  }\n"]);return ie=function(){return e},e}var se=I.a.main(ie());function ce(e){var n=function(e,n){if("object"!==typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,n||"default");if("object"!==typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"===typeof n?n:String(n)}function ue(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function le(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ue(t,!0).forEach((function(n){Object(A.a)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ue(t).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var pe={},de=0,fe=Object(c.b)((function(e){return{userInfo:e.userInfo,posts:e.posts.posts,pageActual:e.posts.page,totalPages:e.posts.totalPages,nextPage:e.posts.nextPage,messagesNotRead:e.posts.userActive.messagesNotRead}}),{newMessage:R,previousPosts:function(e,n){return function(){var t=Object(p.a)(l.a.mark((function t(a){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.get("conversation/messages/".concat(e,"/").concat(n));case 2:r=t.sent,a({type:"posts:PREVIOUS_POSTS",payload:{posts:r.data}});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var n=e.posts,t=e.userInfo,a=e.idConversation,i=e.containerChatRef,s=e.positionLine,c=e.messagesNotRead,u=e.pageActual,d=e.nextPage,f=e.previousPosts,m=e.totalPages,g=e.setUrlPreviewImage,b=e.setLoadingMessages,w=v()(h);Object(r.useEffect)((function(){de=0,i.current.scrollTop=0,i.current.style.opacity=0,c?(i.current.scrollTop=0,E(!0)):(i.current.scrollTop+=99999,i.current.style.opacity=1,O()),i.current.style.opacity=1,O()}),[a]),Object(r.useEffect)((function(){w.on("newMessage",(function(){O(),i.current.scrollHeight-i.current.scrollTop-100<650?i.current.scrollTop=99999:E(!1)}))}),[]);var E=function(e){var n=document.querySelectorAll('[data-js="viewed:false"]')[0];if(n){var t=n.getBoundingClientRect().top;i.current.style.opacity=1,function(e){var n=document.createElement("span");n.textContent="Mensagen(s) n\xe3o visualizada(s)",n.classList.add("warningMessage"),e.insertAdjacentElement("afterbegin",n)}(n),e&&(i.current.scrollTop=t-s+100)}},O=function(){if(i.current.scrollHeight===i.current.clientHeight){var e=document.querySelectorAll('[data-js="viewed:false"]');e&&(Object.keys(pe).forEach((function(n){e.forEach(function(){var e=Object(p.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.getBoundingClientRect().top<s&&x.emit("registerMessageViewed",n);case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())})),pe={}),i.current.style.opacity=1}},y=function(){var e=Object(p.a)(l.a.mark((function e(n){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(u<m&&de!==u)){e.next=9;break}return t=i.current.firstChild.childNodes[4],de=u,b(!0),e.next=6,f(a,d);case 6:return setTimeout((function(){b(!1)}),200),i.current.scrollTop=t.getBoundingClientRect().top,e.abrupt("return");case 9:u===m&&(de=0);case 10:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),j=function(){var e=Object(p.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object.keys(pe).length>0&&document.querySelectorAll('[data-js="viewed:false"]').forEach((function(e){if(pe[e.getAttribute("data-id-message")]){var n=pe[e.getAttribute("data-id-message")];if(e.getBoundingClientRect().top<s){var t=pe,a=(t[n],Object(ne.a)(t,[n].map(ce)));pe=le({},a),x.emit("registerMessageViewed",n)}}})),!(n.currentTarget.scrollTop<200)){e.next=4;break}return e.next=4,y(n);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return o.a.createElement(se,{ref:i,onScroll:j},o.a.createElement(te.a,null,n[a].map((function(e){return function(e){(e.from.toString()!==t._id||e.to.toString()!==t._id)&&!e.viewed&&(pe=le({},pe,Object(A.a)({},e._id,e._id)))}(e),o.a.createElement(ee.a,{key:e._id,timeout:400,classNames:"messages"},o.a.createElement(oe,{setUrlPreviewImage:g,isIdUserLogged:e.from.toString()===t._id,message:e}))}))))})),me=t(70);t(149);function ge(){var e=Object(P.a)(["\n  position: absolute;\n  max-width: 100%;\n  width: 100%;\n  padding: 15px 0;\n  left: 0;\n  background: #eee;\n  bottom: 100%;\n  z-index: 10;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n\n  .header{\n    .close{\n      position: absolute;\n      right: 50px;\n      top: 10px;\n      font-size: 28px;\n      cursor: pointer;\n      color: #444;\n    }\n\n    .image-name{\n      margin-bottom: 20px;\n      font-weight: 600;\n    }\n  }\n\n  .img-content{\n    max-width: 45%;\n    max-height: 380px;\n    img{\n      max-width: 80%;\n      max-height: 380px;\n      width: 100%;\n    }\n  }\n"]);return ge=function(){return e},e}function be(){var e=Object(P.a)(["\n  background: #ddd;\n  padding: 8px 15px;\n  width: 100%;\n  display: flex;\n  max-height: 80px;\n  flex-wrap:wrap;\n  align-items: center;\n  position: relative;\n\n  @media (max-height: 700px) {\n    max-height: 100px;\n    margin-bottom: 15px;\n  }\n  \n  .message-content{\n    div.close-picker{\n      width: 100%;\n      height: 1000%;\n      background: transparent;\n      position: absolute;\n      top:-900%;\n      left:0;\n      z-index: 0;\n    }\n    textarea{\n      max-width: 500px;\n      resize: none;\n      overflow-x: hidden;\n      padding-left:12px;\n      padding-top:10px;\n      border-radius: 50px;\n      border: solid 1px #bbb;\n      outline:0;\n      @media (max-width: 900px) {\n        max-width: 320px;\n      }\n    }\n  }\n  .icons i{\n    font-size: 28px;\n    color: #3bb6e7;\n    margin-left: 10px;\n    cursor: pointer;\n  }\n  .icons .fa-laugh{\n    color: #999;\n  }\n  .btn-send{\n    margin-left: 8px;\n    button{\n      border-radius: 20px;\n      text-decoration:none;\n      background: #aaa;\n      color: #f8f8f8;\n      font-size: 18px;\n      padding: 10px 40px;\n      display: block;\n      letter-spacing: 0.8px;\n      font-weight: 600;\n      border:none;\n      outline: none;\n\n      &:active{\n        transition: background 200ms ease;\n        background: #ccc;\n      }\n    }\n  }\n"]);return be=function(){return e},e}var ve=I.a.div(be()),he=I.a.figure(ge()),xe=Object(c.b)((function(e){return{userActive:e.posts.userActive,listConversations:e.listConversations,userInfo:e.userInfo}}),{loadingConversations:y})((function(e){var n=e.userActive,t=e.userInfo,a=e.containerChatRef,i=Object(r.useState)(""),s=Object(d.a)(i,2),c=s[0],u=s[1],f=Object(r.useState)(!1),m=Object(d.a)(f,2),g=m[0],b=m[1],v=Object(r.useState)(null),h=Object(d.a)(v,2),w=h[0],O=h[1],y=Object(r.useRef)(),j=function(){var e=Object(p.a)(l.a.mark((function e(){var t,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===c.trim()&&!w){e.next=12;break}return(t=new FormData).append("userId",n._id),t.append("message",c),t.append("image",w||""),e.next=7,E.post("conversation/message",t);case 7:a.current&&(a.current.scrollTop=a.current.scrollHeight),u(""),O(null),(r=document.querySelector(".warningMessage"))&&r.remove();case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return o.a.createElement(ve,null,w&&o.a.createElement(he,null,o.a.createElement("div",{className:"header"},o.a.createElement("div",{className:"image-name"},o.a.createElement("p",null,w.name)),o.a.createElement("div",{className:"close",onClick:function(){return O(null)}},o.a.createElement("i",{className:"fas fa-times"}))),o.a.createElement("div",{className:"img-content"},o.a.createElement("img",{src:URL.createObjectURL(w),alt:""}))),o.a.createElement("div",{className:"message-content"},g&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"close-picker",onClick:function(){y.current.focus(),b(!1)}}),o.a.createElement(me.a,{onSelect:function(e){var n=e.native;u(c+n)},set:"google",style:{position:"absolute",bottom:"65px",left:0,zIndex:20,height:""}})),o.a.createElement("textarea",{cols:"50",rows:"2",ref:y,placeholder:"Escreva uma mensagem",value:c,onChange:function(e){u(e.target.value),x.emit("writing",{idUser:t._id,idConversation:n.idConversation})},onKeyUp:function(e){13===e.keyCode&&j()}})),o.a.createElement("input",{type:"file",id:"#file",hidden:!0,onChange:function(e){var n=e.target.files;return O(n[0])}}),o.a.createElement("div",{className:"icons"},o.a.createElement("i",{className:"far fa-laugh",onClick:function(){b(!g)}}),o.a.createElement("label",{htmlFor:"#file"},o.a.createElement("i",{className:"fas fa-image"}))),o.a.createElement("div",{className:"btn-send"},o.a.createElement("button",{onClick:j},"Enviar")))}));function we(){var e=Object(P.a)(["\n  max-width: 1060px;\n  height: 30px;\n  width: 100%;\n  position: absolute;\n  bottom:75px;\n  overflow: unset\n"]);return we=function(){return e},e}function Ee(){var e=Object(P.a)(["\n  flex: 1 1 70%;\n  height: 91%;\n  display:flex;\n  flex-direction: column;\n  position: relative;\n  background-image: url('images/speech-bubble.svg');\n  background-size: 60%;\n  background-repeat: no-repeat;\n  background-position-x: 150px;\n  background-position-y: 60px;\n  @media (max-height: 700px) {\n    background-position-y: 0px;\n  }\n  .loader-mensagens{\n    width: 100%;\n    position: absolute;\n    top:0;\n    left:0;\n    text-align: center;\n    background: rgba(255, 255, 255, 0.5);\n    z-index: 15;\n  }\n"]);return Ee=function(){return e},e}var Oe,ye=I.a.div(Ee()),je=I.a.div(we()),ke=Object(c.b)((function(e){return{userActive:e.posts.userActive}}),{newMessage:R,loadingConversations:y,updateMessageRead:function(e){var n=e.message,t=e.messagesNotRead;return function(e){e({type:"conversations:UPDATE_MESSAGES_NOT_READ",payload:{numberMessages:t,idConversation:n.conversation}}),e({type:"posts:MESSAGE_READ",payload:n})}}})((function(e){var n=e.userActive,t=e.newMessage,a=e.loadingConversations,i=e.updateMessageRead,s=Object(r.useState)(""),c=Object(d.a)(s,2),u=c[0],m=c[1],g=Object(r.useState)(!1),b=Object(d.a)(g,2),w=b[0],E=b[1],O=Object(r.useRef)(),y=Object(r.useRef)();Object(r.useEffect)((function(){Oe=y.current.getBoundingClientRect().top,v()(h).on("newMessage",function(){var e=Object(p.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(n);case 2:setTimeout((function(){return a()}),200);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),x.on("messageRead",(function(e){setTimeout((function(){return i(e)}),300)}))}),[]),Object(r.useEffect)((function(){j()}),[n.idConversation]);var j=function(){return o.a.createElement(fe,{positionLine:Oe,idConversation:n.idConversation,containerChatRef:O,setUrlPreviewImage:m,setLoadingMessages:E})};return o.a.createElement(o.a.Fragment,null,o.a.createElement(ee.a,{in:!!u,timeout:300,classNames:"preview",unmountOnExit:!0},o.a.createElement("div",{className:"preview-image"},o.a.createElement("div",{className:"close-preview",onClick:function(){return m(!1)}},o.a.createElement("i",{className:"fas fa-times"})),o.a.createElement("figure",null,o.a.createElement("img",{src:u,alt:""})))),o.a.createElement(ye,null,o.a.createElement("div",{className:"loader-mensagens"},o.a.createElement(f.PulseLoader,{loading:w,color:"#7693d2"})),n.hasOwnProperty("_id")&&j(),o.a.createElement(je,{ref:y}),n.hasOwnProperty("_id")&&o.a.createElement(xe,{containerChatRef:O})))}));function Se(){var e=Object(P.a)(["\n  position: absolute;\n  height: 120px;\n  width: 100%;\n  background: rgba(0, 0, 0, 0.5);\n  z-index: 6;\n  top: 50%;\n  transform: translateY(-50%);\n  color: #eee;\n\n  .close-modal{\n    position: absolute;\n    right: 10%;\n    top: 10px;\n    font-size: 26px;\n  }\n  .confirm-content{\n    padding-top:10px;\n    text-align:center;\n\n    h3{\n      letter-spacing: 0.7px;\n      margin-left: 5px;\n    }\n    i{\n      color: #eaf73b;\n      font-size: 26px;\n      margin-right: 10px;\n    }\n  }\n\n  .btn-actions{\n    margin-top: 20px;\n\n    .btn{\n      max-width: 160px;\n      width: 100%;\n      height: 30px;\n      text-transform: uppercase;\n      font-weight: 600;\n      border: 1px solid #aaa;\n      outline: 0;\n      cursor: pointer;\n      &:hover{\n        background: rgba(255, 255, 255, 0.6)\n      }\n    }\n    .btn.ok{\n      margin-left: 10px;\n      background: #7693D2;\n      color: #f8f8f8;\n      &:hover{\n        background: rgba(118, 147, 210, 0.8);\n      }\n    }\n  }\n"]);return Se=function(){return e},e}var Ne=I.a.div(Se()),Ce=function(e){var n=e.setIsShowConfirm,t=e.deleteConversation;return o.a.createElement(Ne,null,o.a.createElement("div",{className:"close-modal",onClick:function(){return n(!1)}},o.a.createElement("i",{className:"fas fa-times"})),o.a.createElement("div",{className:"confirm-content"},o.a.createElement("h4",null,o.a.createElement("i",{className:"fas fa-exclamation-triangle"}),"Tem certeza disso? Isso apagar\xe1 todas as mensagens.",o.a.createElement("br",null),"Deseja realmente continuar?"),o.a.createElement("div",{className:"btn-actions"},o.a.createElement("button",{className:"btn cancel",onClick:function(){return n(!1)}},"Cancelar"),o.a.createElement("button",{className:"btn ok",onClick:function(){return t()}},"Excluir"))))};function Pe(){var e=Object(P.a)(["\nposition: relative;\nflex: 1 1 25%;\n@media (max-width: 930px) {\n  /* min-width: 500px; */\n  /* flex: 0;    */\n}\n.content{\n  z-index: 5;\n  position: relative;\n  height: 100%;\n  background: #ffffef;\n  /* height: 90%; */\n  overflow-y: auto;\n  border-left: solid 1px #bbb;\n    /* @media (max-width: 930px) {\n      transform: translateX(110%);\n      height: 100%;\n      position: absolute;\n      right: 0;\n      bottom: 0;\n    } */\n    .add-user{\n      text-align: center;\n      margin-top: 50px;\n      color: #555;\n      font-style: italic;\n    }\n  }\n"]);return Pe=function(){return e},e}var Ie=I.a.section(Pe()),_e=Object(c.b)((function(e){return{listConversations:e.listConversations}}),{cleanPosts:function(e){var n=e.idConversation,t=e.idUser;return function(){var e=Object(p.a)(l.a.mark((function e(a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(n,t),e.next=3,E.delete("conversation/".concat(n,"/").concat(t));case 3:a({type:"posts:CLEAN_POSTS_USER",payload:n});case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},loadingConversations:y,searchUser:N})((function(e){var n=e.listConversations,t=e.cleanPosts,a=e.loadingConversations,i=(e.searchUser,Object(r.useState)(!1)),s=Object(d.a)(i,2),c=s[0],u=s[1],f=Object(r.useState)({}),m=Object(d.a)(f,2),g=m[0],b=m[1],v=function(){var e=Object(p.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(g);case 2:a(),u(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return o.a.createElement(o.a.Fragment,null,c&&o.a.createElement(Ce,{deleteConversation:v,setIsShowConfirm:u}),o.a.createElement(Ie,null,o.a.createElement("div",{className:"content"},n.contacts.length?o.a.createElement("ul",{className:"list-conversas"},n.contacts.map((function(e){return o.a.createElement(F,{key:e.user._id,userChat:e.user,lastUpdate:e.updatedAt,idConversation:e.idConversation,messagesNotRead:e.messagesNotRead,setDeleteUser:b,setIsShowConfirm:u})}))):o.a.createElement("div",{className:"add-user"},"Sua lista de conversas est\xe1 vazia",o.a.createElement("br",null)))))}));function Ue(){var e=Object(P.a)(["\n  text-align: center;\n  width: 100%;\n  max-width: 350px;\n  margin: 0 auto;\n\n  .error{\n    color: red;\n    display: block;\n    margin-bottom: 10px;\n  }\n  .group-input{\n    margin-bottom: 15px;\n    position: relative;\n\n    ","\n  }\n  input{\n    width: 100%;\n    max-width: 350px;\n    padding: 8px 5px;\n  }\n  .btn-actions{\n    margin: 0 auto;\n    align-items: center;\n    display: flex;\n    max-width: 350px;\n    \n    .fa-arrow-left{\n      margin-right: 5px;\n    }\n  }\n  .btn{\n    height: 45px;\n    text-transform: uppercase;\n    font-weight: 600; \n    width: 100%;\n    border: 1px solid #aaa;\n    outline: none;\n    cursor: pointer;\n\n  }\n  .sign-in{\n    background: rgba(89, 125, 204, 0.8);\n    color: #f8f8f8;\n    &:hover{\n      background: rgba(89, 125, 204, 0.6);\n    }\n  }\n  .sign-up{\n    &:hover{\n      background: rgba(0, 0, 0, 0.1);\n      color: #444;\n    }\n  }\n\n"]);return Ue=function(){return e},e}var De=I.a.form(Ue(),(function(e){return e.signUp&&"\n      &:before{\n        content: '*';\n        color: red;\n        position: absolute;\n        display: block;\n        left: -10px;\n      }\n    "})),Ae=function(e){var n=e.submit,t=e.signUp,a=e.setIsSignIn,r=e.messageError;return o.a.createElement(De,{onSubmit:n,signUp:t},o.a.createElement("span",{className:"error"},r),t&&o.a.createElement("div",{className:"group-input"},o.a.createElement("input",{type:"text",name:"name",placeholder:"Digite seu nome completo"})),o.a.createElement("div",{className:"group-input"},o.a.createElement("input",{type:"email",name:"email",placeholder:"Digite seu email"})),o.a.createElement("div",{className:"group-input"},o.a.createElement("input",{type:"password",name:"password",placeholder:"Digite sua senha"})),t&&o.a.createElement("div",{className:"group-input"},o.a.createElement("input",{type:"password",name:"confirmPassword",placeholder:"Confirme sua senha"})),o.a.createElement("div",{className:"btn-actions"},o.a.createElement("button",{onClick:function(){return a(!!t)},className:"btn sign-up",type:"button"},t?o.a.createElement("span",null,o.a.createElement("i",{className:"fas fa-arrow-left"}),"Voltar"):"Cadastre-se"),o.a.createElement("button",{className:"btn sign-in"},t?"Cadastre-se":"Login")))},Re=Object(c.b)(null,{loginUser:S})((function(e){var n=e.loginUser,t=e.setIsSignIn,a=e.messageError,i=e.setMessageError;Object(r.useEffect)((function(){i("")}),[]);var s=function(){var e=Object(p.a)(l.a.mark((function e(t){var a,r,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=t.target,r=a.email,o=a.password,r.value&&o.value){e.next=5;break}return i("Preencha os campos corretamente!"),e.abrupt("return",!1);case 5:return e.next=7,n(r.value,o.value);case 7:window.location.reload();case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return o.a.createElement(Ae,{submit:s,setIsSignIn:t,messageError:a})})),Te=Object(c.b)(null,{loginUser:S})((function(e){var n=e.setIsSignIn,t=e.messageError,a=e.setMessageError,i=e.loginUser;Object(r.useEffect)((function(){a("")}),[]);var s=function(){var e=Object(p.a)(l.a.mark((function e(n){var t,r,o,s,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),t=n.target,r=t.name,o=t.email,s=t.password,c=t.confirmPassword,r.value&&o.value&&s.value&&c.value){e.next=5;break}return a("Todos os campos s\xe3o obrigat\xf3rios!"),e.abrupt("return",!1);case 5:if(s.value===c.value){e.next=8;break}return a("Senhas diferentes!"),e.abrupt("return",!1);case 8:return e.prev=8,e.next=11,E.post("auth/register",{name:r.value,email:o.value,password:s.value});case 11:return e.next=13,i(o.value,s.value);case 13:window.location.reload(),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(8),a("Ocorreu um erro ao tentar se cadastrar!");case 19:case"end":return e.stop()}}),e,null,[[8,16]])})));return function(n){return e.apply(this,arguments)}}();return o.a.createElement(Ae,{submit:s,setIsSignIn:n,signUp:!0,messageError:t})}));function Le(){var e=Object(P.a)(["\n  background: #ddd;\n  height: 100%;\n  width: 100%;\n\n  header{\n    text-align:center;\n\n    .logo{\n      font-size: 7.5em;\n      color: rgba(89, 125, 204, 0.8);\n      p{\n        font-size: 20px;\n      }\n    }\n    .login{\n      color: #444;\n      font-style: italic;\n      font-size: 1.4em;\n    }\n  }\n"]);return Le=function(){return e},e}var ze=I.a.section(Le()),Me=function(){var e=Object(r.useState)(!0),n=Object(d.a)(e,2),t=n[0],a=n[1],i=Object(r.useState)(""),s=Object(d.a)(i,2),c=s[0],u=s[1];return o.a.createElement(ze,null,o.a.createElement("header",null,o.a.createElement("div",{className:"logo"},o.a.createElement("i",{className:"fas fa-comments"}),o.a.createElement("p",null,"Chat")),o.a.createElement("div",{className:"login"},o.a.createElement("h1",null,t?"Login":"Cadastro"))),t?o.a.createElement(Re,{setIsSignIn:a,messageError:c,setMessageError:u}):o.a.createElement(Te,{setIsSignIn:a,messageError:c,setMessageError:u}))};function Fe(){var e=Object(P.a)(["\n  max-width: 1160px;\n  min-width: 1000px;\n  width: 100%;\n  height: 88vh;\n  border: 1px solid #bbb;\n  margin: 40px auto;\n  display: flex;\n  flex-wrap: wrap;\n  border-radius: 8px;\n  overflow: hidden;\n  position: relative;\n  box-shadow: 0 0 10px #666; \n\n  .preview-image{\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    background: #f8f8f8;\n    z-index: 10;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    figure{\n      width: 100%;\n      img{\n        margin: 20px auto;\n        display: block;\n        max-width: 70%;\n        max-height: 500px;\n      }\n    }\n  }\n\n  .loader{\n    width: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n\n.preview-enter {\n  opacity: 0;\n}\n.preview-enter-active {\n  opacity: 1;\n  transition: opacity 400ms ease-in;\n}\n.preview-exit {\n  opacity: 1;\n}\n.preview-exit-active {\n  opacity: 0;\n  transition: opacity 200ms ease-out;\n}\n"]);return Fe=function(){return e},e}var Ge,Ve=I.a.div(Fe()),Be=Object(c.b)((function(e){return{userInfo:e.userInfo,userActive:e.posts.userActive}}),{updateStatus:j,loadingConversations:y,loginUser:S,getInfoUserLogged:function(){return function(){var e=Object(p.a)(l.a.mark((function e(n){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.get("/user");case 2:t=e.sent,clearInterval(a),a=setInterval((function(){k.emit("online",t.data._id)}),2e3),n({type:"user:LOGIN_USER",payload:t.data});case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()}})((function(e){var n=e.userInfo,t=e.loadingConversations,a=e.userActive,i=e.updateStatus,s=e.getInfoUserLogged,c=Object(r.useState)(null),u=Object(d.a)(c,2),m=u[0],g=u[1],b=Object(r.useState)(!1),v=Object(d.a)(b,2),h=v[0],w=v[1],E=Object(r.useState)(!0),O=Object(d.a)(E,2),y=O[0],j=O[1];return Object(r.useEffect)((function(){(function(){var e=Object(p.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!JSON.parse(localStorage.getItem("@chat@"))){e.next=10;break}return g(!0),e.next=5,s();case 5:return e.next=7,t();case 7:setTimeout((function(){return j(!1)}),500),e.next=11;break;case 10:g(!1);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(r.useEffect)((function(){a.hasOwnProperty("_id")&&(clearInterval(Ge),Ge=setInterval((function(){x.emit("verifyStatus",a._id)}),3e3))}),[a]),Object(r.useEffect)((function(){h||(i(),w(!0))}),[a]),n._id&&window.addEventListener("beforeunload",(function(){return x.emit("off",n._id),""})),o.a.createElement(Ve,null,!1===m&&o.a.createElement(Me,null),m&&o.a.createElement(o.a.Fragment,null,y?o.a.createElement("div",{className:"loader"},o.a.createElement(f.PulseLoader,{color:"rgba(89, 125, 204, 0.8)"})):o.a.createElement(o.a.Fragment,null,o.a.createElement($,{socket:x}),o.a.createElement(ke,null),o.a.createElement(_e,null))))}));var He=function(){return o.a.createElement("div",{className:"App"},o.a.createElement(Be,null))},Xe=(t(150),t(14)),qe=t(44);function Je(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function We(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Je(t,!0).forEach((function(n){Object(A.a)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Je(t).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Ye={serachUsers:[]},Ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"user:LOGIN_USER":return We({},e,{},n.payload);case"user:SEARCH_USER":return We({},e,{serachUsers:n.payload});case"user:UPDATE_IMAGE_PROFILE":return We({},e,{imageProfile:n.payload});case"user:UPDATE_NAME_USER":return We({},e,{name:n.payload});default:return e}},Qe=t(45);function Ze(e){var n=function(e,n){if("object"!==typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,n||"default");if("object"!==typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"===typeof n?n:String(n)}function $e(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function en(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?$e(t,!0).forEach((function(n){Object(A.a)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):$e(t).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var nn={posts:{},userActive:{}},tn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nn,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"posts:LOADING_POSTS":var t=n.payload,a=t.userActive,r=t.posts;return en({},e,{},r,{posts:en({},e.posts,Object(A.a)({},r.idConversation,r.posts)),userActive:a});case"posts:PREVIOUS_POSTS":var o=n.payload.posts;return en({},e,{},n.payload.posts,{posts:en({},e.posts,Object(A.a)({},o.idConversation,[].concat(Object(Qe.a)(o.posts),Object(Qe.a)(e.posts[o.idConversation]))))});case"posts:NEW_MESSAGE":var i=n.payload.conversation;return en({},e,{posts:en({},e.posts,Object(A.a)({},i,e.posts[i]?e.posts[i].concat(n.payload):[n.payload]))});case"posts:CLEAN_POSTS_USER":var s=e.posts,c=n.payload,u=(s[c],Object(ne.a)(s,[c].map(Ze)));return{posts:en({},u),userActive:{}};case"posts:MESSAGE_READ":var l=n.payload,p=l._id,d=l.conversation;return en({},e,{posts:en({},e.posts,Object(A.a)({},d,e.posts[d].map((function(e){return e._id===p?en({},n.payload):e}))))});default:return e}};function an(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function rn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?an(t,!0).forEach((function(n){Object(A.a)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):an(t).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var on,sn={contacts:[],status:{}},cn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sn,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"conversations:LOADING_CONVERSATIONS":return rn({},e,{contacts:n.payload});case O:return rn({},e,{status:n.payload});case"conversations:UPDATE_MESSAGES_NOT_READ":return rn({},e,{contacts:e.contacts.map((function(e){return e.idConversation===n.payload.idConversation?rn({},e,{messagesNotRead:n.payload.numberMessages}):e}))});default:return e}},un=Object(Xe.c)({userInfo:Ke,posts:tn,listConversations:cn}),ln=function(){return window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()};on=ln()?Object(Xe.d)(Object(Xe.a)(qe.a),ln()):Object(Xe.d)(Object(Xe.a)(qe.a));var pn=Object(Xe.e)(un,{},on);t(151);s.a.render(o.a.createElement(c.a,{store:pn},o.a.createElement(He,null)),document.getElementById("root"))},75:function(e,n,t){e.exports=t(152)}},[[75,1,2]]]);
//# sourceMappingURL=main.7434d654.chunk.js.map